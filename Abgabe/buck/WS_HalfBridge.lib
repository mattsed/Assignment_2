******************************************************************************************************************************************************************************
*
*  888888              888888               888888  .o888888888888o.    8888         88888888888  o888888888888888   88888888888888o   88888888888  88888888888  8888888888o
*   88888             88888888             88888   .8888888  8888888.   8888         88888888888  o8888888888888888  888888  8888888o  88888888888  88888888888  88888888888o
*    88888           8888  8888           88888   .8888888.  .8888888.  8888         8888         888888888          888888  88888888  8888         8888         8888   88888
*     88888         8888    8888         88888    88888888    88888888  8888         8888         888888888          888888  88888888  8888         8888         8888   88888
*      88888       8888      8888       88888     88888888    88888888  8888         8888888      o888888888888888o  888888  8888888o  8888888      8888888      8888   88888
*       88888     8888        8888     88888      88888888    88888888  8888         8888888      o888888888888888o  88888888888888o   8888888      8888888      8888   88888
*        88888   8888          8888   88888       88888888    88888888  8888         8888                  88888888  8888              8888         8888         8888   88888
*         88888 8888            8888 88888        .8888888.  .8888888.  8888         8888                  88888888  8888              8888         8888         8888   88888
*          88888888             88888888           .8888888  8888888.   88888888888  8888         8888888888888888o  8888              88888888888  88888888888  88888888888o
*           888888               888888             .o888888888888o.    88888888888  8888         888888888888888o   8888              88888888888  88888888888  8888888888o
*
******************************************************************************************************************************************************************************

*******************************************************************************
**	Wolfspeed, Inc
**	DISCLAIMER
*******************************************************************************
**	This model is provided as is, where is, and with no warranty of any kind
**	either expressed or implied, including but not limited to any implied
**	warranties of merchantability and fitness for a particular purpose.
*******************************************************************************
**	To find other WOLFSPEED SiC models, please visit:
**	https://www.wolfspeed.com/power/tools-and-support/all-models
*******************************************************************************
**	This library model file is intended for use in LTspice ONLY
**	Use in any other software will result in syntax or compilation errors!
*******************************************************************************

*********************************************************************
****	
****	Wolfspeed SiC Module Half-bridge SPICE Library
****		Version 1.6f	Date: 2025-03-21
****	
****		Models avilable in this library:
****		CAB003M09DM3,CAB004M12GM4,CAB006A12GM3,CAB006M12GM3,CAB008A12GM3,CAB008M12GM3,CAB011A12GM3,CAB011M12FM3,CAB016M12FM3,CAB320M17XM3,CAB3R5M12DM4,CAB400M12XM3,CAB425M12XM3,CAB450M12XM3,CAB500M17HM3,CAB530M12BM3,CAB650M17HM3,CAB760M12HM3,CAS175M12BM3,CAS310M17BM3,CAS350M12BM3,CAS380M17HM3,CAS480M12HM3,CAS530M12BM3,EAB450M12XM3,WAB300M12BM3,WAB400M12BM3,WAS175M12BM3,WAS310M17BM3,WAS350M12BM3,WAS530M12BM3,CAB7R5A23GM4,CAB6R0A23GM4,CAB5R0A23GM4
****	
*********************************************************************
****	Node Definitions:
****		Electrical
****		V+  = High side Drain
****		Mid = AC terminal
****		V-  = Low side source
****		G1  = HS Gate
****		K1  = HS Kelvin
****		G2  = LS Gate
****		K2  = LS Kelvin
****		Thermal
****		Tc1  = High Side Case Thermal Connection [apply coolant temperature as a voltage]
****		Tc2  = Low  Side Case Thermal Connection [apply coolant temperature as a voltage]
****		TjQ1 = High Side MOSFET Junction Temperature
****		TjQ2 = Low  Side MOSFET Junction Temperature
****		TjD1 = High Side Schottky Junction Temperature
****		TjD2 = Low  Side Schottky Junction Temperature
****		Electrical (EMI)
****		Baseplate = Node for studying current induced 
****					through heatsink into grounding system
*********************************************************************
****	Model Complexity Control:
****		BPC      = enable basepalte capacitance
****					0: no BPC (zero current on Baseplate node)
****					1: Include BPC (slower)
****		Thermals = enable closed loop thermals
****					0: Fixed Tj defined by TEMP
****					1: Include BPC (slower)
****		level    = change the complexity / accuracy of the model
****					1: Body diode at -4V only
****					2: Full third quadrant conduction
****					3: Full third quadrant conduction with reverse recovery
****	Parameter Definitions:
****		Vths = Threshold voltage shift (V)
****		Rdss = Drain Resistance shift (Ω)
****		Rp   = Inductor parallel res (Ω)
****				low pass filter on ringing
****				100 (default) good balance of bandwidth and sim-time
****				1m   removes impact of packaging but greatly improves sim time
*********************************************************************



.SUBCKT Module_HalfBridge V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate

*** Convergence Resistances ***
Rconv1 G1 0 10Meg
Rconv2 G2 0 10Meg

*** SiC MOSFETS ***
XQ1 Vd GHI Vp TjQ1 IQ1 {LmflagQ1} PARAMS: Lcsi={LcsiQ1} Rp={Rp} die={die} AFm={AFm} Vths={Vths} Rdss={Rdss} CgdOffset={CgdOffset} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} agd={agd} ads={ads} ags={ags} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m
XQ2 Vp GLI Vs TjQ2 IQ2 {LmflagQ2} PARAMS: Lcsi={LcsiQ2} Rp={Rp} die={die} AFm={AFm} Vths={Vths} Rdss={Rdss} CgdOffset={CgdOffset} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} agd={agd} ads={ads} ags={ags} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

*** SiC Schottky ***
XD1 Vp Vd TjD1 ID1 {Schottky} PARAMS: AF={AFs} dummy=1m
XD2 Vs Vp TjD2 ID2 {Schottky} PARAMS: AF={AFs} dummy=1m

*** Thermal Networks ***
XQ1_Thermal TjQ1 Tc1 Vd Vp IQ1 {Thermal} PARAMS: Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4}Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Tj={Tj} dummy=1m
XQ2_Thermal TjQ2 Tc2 Vp Vs IQ2 {Thermal} PARAMS: Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4}Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Tj={Tj} dummy=1m
XD1_Thermal TjD1 Tc1 Vd Vp ID1 {SchottkyThermal} PARAMS: Ct1={SchCt1} Ct2={SchCt2} Ct3={SchCt3} Ct4={SchCt4} Rt1={SchRt1} Rt2={SchRt2} Rt3={SchRt3} Rt4={SchRt4} Tj={Tj} dummy=1m
XD2_Thermal TjD2 Tc2 Vp Vs ID2 {SchottkyThermal} PARAMS: Ct1={SchCt1} Ct2={SchCt2} Ct3={SchCt3} Ct4={SchCt4} Rt1={SchRt1} Rt2={SchRt2} Rt3={SchRt3} Rt4={SchRt4} Tj={Tj} dummy=1m

*** Baseplate Capacitance ***
XU3 Vd Vp Vs Baseplate {BPC} PARAMS: Cug={Cug} Cag={Cag} Clg={Clg} dummy=1m

*** Parasitic Parameters ***

Ld V+ Vd {Ld} Rser={Rdesr} Rpar={Rp}
Lp Mid Vp {Lp} Rser={Rpesr} Rpar={Rp}
Ls V- Vs {Ls} Rser={Rsesr} Rpar={Rp}
Lg1 G1 GHI {LgQ1/2} Rser={Rgi/2}
Lk1 K1 Vp {LgQ1/2} Rser={Rgi/2}
Lg2 GLI G2 {LgQ2/2} Rser={Rgi/2}
Lk2 K2 Vs {LgQ2/2} Rser={Rgi/2}

.ENDS Module_HalfBridge

*** SUBCKT 1/2: BPC ***
.SUBCKT 1 VD VP VS BP
R BP 0 1
.ENDS

.SUBCKT 2 VD VP VS BP
C1 VD BP {Cug}
C2 VP BP {Cag}
C3 VS BP {Clg}
.ENDS
 
*** SUBCKT 3/4: THERMALS ***
.SUBCKT 3 Tj Tc Vp Vn Vi
Vt Tj1 0 {Tj}
Rt Tj1 Tj 1m
RTground Tc 0 10k
.ENDS 3

.SUBCKT 4 Tj Tc Vp Vn Vi
Gpwr 0 Tj Value {abs(V(Vp,Vn)*(V(Vi)))}
Ct1 Tj 0 {Ct1}
Ct2 1 0 {Ct2}
Ct3 2 0 {Ct3}
Ct4 3 0 {Ct4}
Rt1 Tj 1 {Rt1}
Rt2 1 2 {Rt2}
Rt3 2 3 {Rt3}
Rt4 3 Tc {Rt4}
RTground Tc 0 10k
.ic V(Tj) = {Tj} V(1) = {Tj} V(2) = {Tj} V(3) = {Tj}
.ENDS 4

*** SUBCKT 5: If Schottky doesn't exist ***
.SUBCKT 5 A K Tj Id
V Id 0 1
.ENDS

** SUBCKT 6/7: Common-source inductance or no? **
.SUBCKT 6 D G S Tj IMos
X1 D G S Tj IMos {die} PARAMS: die={die} AFm={AFm} Vths={Vths} Rdss={Rdss} CgdOffset={CgdOffset} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} agd={agd} ads={ads} ags={ags} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe}  dummy=1m
.ENDS 6
.SUBCKT 7 D G S Tj IMos
Lcsi S s1 {Lcsi} Rser=50u Rpar={Rp}
X1 D G s1 Tj IMos {die} PARAMS: die={die} AFm={AFm} Vths={Vths} Rdss={Rdss} CgdOffset={CgdOffset} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} agd={agd} ads={ads} ags={ags} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe}  dummy=1m
.ENDS 7
.SUBCKT 8 D G S Tj IMos
G1 0 s1 Value = {V(Imos)}
Lcsi1 s1 s2 {-1*Lcsi} Rser=0 Rpar = 1000
Lcsi2 G g1 {-1*Lcsi} Rser=0 Rpar = 1000
R s2 0 1G
K Lcsi1 Lcsi2 -1
X1 D g1 S Tj IMos {die} PARAMS: die={die} AFm={AFm} Vths={Vths} Rdss={Rdss} CgdOffset={CgdOffset} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} agd={agd} ads={ads} ags={ags} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m
.ENDS 8
 
.SUBCKT CAB003M09DM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=10 Ld=6.04n Lp=9.76n Ls=5.46n Rdesr=410.00u Rpesr=250.00u Rsesr=560.00u PackageRgi=0.00 DieRgi=2.50 LgQ1=10.10n LgQ2=9.45n Cug=78.60p Cag=106.55p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-2.14p agd=1.07 ags=950.12m ads=1 Lqe=2.500000e-08 Rqe=3.16 Cqe=1.000000e-07 tau1=1.00 tau2=44.35 tm1=50.00 tm2=13.64 Rgis=1.46 Clg=71.63p Rt1={AFnomM*1.34m/AFm} Rt2={AFnomM*5.91m/AFm} Rt3={AFnomM*35.24m/AFm} Rt4={AFnomM*86.51m/AFm} Ct1={AFm*827.12u/AFnomM} Ct2={AFm*18.77m/AFnomM} Ct3={AFm*108.38m/AFnomM} Ct4={AFm*513.58m/AFnomM} SchRt1={AFnomS*1.34m/AFs} SchRt2={AFnomS*5.91m/AFs} SchRt3={AFnomS*35.24m/AFs} SchRt4={AFnomS*86.51m/AFs} SchCt1={AFs*827.12u/AFnomS} SchCt2={AFs*18.77m/AFnomS} SchCt3={AFs*108.38m/AFnomS} SchCt4={AFs*513.58m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB003M09DM3

 
.SUBCKT CAB004M12GM4 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=8 AFs=1 AFnomM=8 AFnomS=1 die=20 Ld=4.50n Lp=2.82n Ls=1.30n Rdesr=870.00u Rpesr=500.00u Rsesr=570.00u PackageRgi=0.00 DieRgi=3.50 LgQ1=13.20n LgQ2=9.63n Cug=83.00p Cag=107.00p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-1.83p agd=1.89 ags=736.97m ads=1 Lqe=2.500000e-08 Rqe=5.20 Cqe=1.000000e-07 tau1=10.44 tau2=19.38 tm1=13.21 tm2=16.36 Rgis=1.97 Clg=105.00p Rt1={AFnomM*1.95m/AFm} Rt2={AFnomM*11.58m/AFm} Rt3={AFnomM*71.62m/AFm} Rt4={AFnomM*128.85m/AFm} Ct1={AFm*722.20u/AFnomM} Ct2={AFm*22.97m/AFnomM} Ct3={AFm*172.46m/AFnomM} Ct4={AFm*964.75m/AFnomM} SchRt1={AFnomS*1.95m/AFs} SchRt2={AFnomS*11.58m/AFs} SchRt3={AFnomS*71.62m/AFs} SchRt4={AFnomS*128.85m/AFs} SchCt1={AFs*722.20u/AFnomS} SchCt2={AFs*22.97m/AFnomS} SchCt3={AFs*172.46m/AFnomS} SchCt4={AFs*964.75m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB004M12GM4

 
.SUBCKT CAB006A12GM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=6 AFs=1 AFnomM=6 AFnomS=1 die=30 Ld=3.55n Lp=5.00n Ls=3.55n Rdesr=980.00u Rpesr=250.00u Rsesr=900.00u PackageRgi=3.35 DieRgi=1.70 LgQ1=12.50n LgQ2=12.50n Cug=44.50p Cag=123.20p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=3.70p agd=1.53 ags=531.09m ads=1 Lqe=2.500000e-08 Rqe=7.62 Cqe=1.000000e-07 tau1=1.00 tau2=56.96 tm1=50.00 tm2=1.89 Rgis=1.84 Clg=67.60p Rt1={AFnomM*1.74m/AFm} Rt2={AFnomM*8.62m/AFm} Rt3={AFnomM*34.60m/AFm} Rt4={AFnomM*87.04m/AFm} Ct1={AFm*966.67u/AFnomM} Ct2={AFm*11.43m/AFnomM} Ct3={AFm*58.77m/AFnomM} Ct4={AFm*477.12m/AFnomM} SchRt1={AFnomS*1.74m/AFs} SchRt2={AFnomS*8.62m/AFs} SchRt3={AFnomS*34.60m/AFs} SchRt4={AFnomS*87.04m/AFs} SchCt1={AFs*966.67u/AFnomS} SchCt2={AFs*11.43m/AFnomS} SchCt3={AFs*58.77m/AFnomS} SchCt4={AFs*477.12m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB006A12GM3

 
.SUBCKT CAB006M12GM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=6 AFs=1 AFnomM=6 AFnomS=1 die=30 Ld=3.55n Lp=5.00n Ls=3.55n Rdesr=980.00u Rpesr=250.00u Rsesr=900.00u PackageRgi=3.35 DieRgi=1.70 LgQ1=12.50n LgQ2=12.50n Cug=81.30p Cag=221.30p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=3.70p agd=1.53 ags=531.09m ads=1 Lqe=2.500000e-08 Rqe=7.62 Cqe=1.000000e-07 tau1=1.00 tau2=56.96 tm1=50.00 tm2=1.89 Rgis=1.84 Clg=119.40p Rt1={AFnomM*2.07m/AFm} Rt2={AFnomM*11.30m/AFm} Rt3={AFnomM*53.07m/AFm} Rt4={AFnomM*167.57m/AFm} Ct1={AFm*793.41u/AFnomM} Ct2={AFm*13.39m/AFnomM} Ct3={AFm*82.36m/AFnomM} Ct4={AFm*302.95m/AFnomM} SchRt1={AFnomS*2.07m/AFs} SchRt2={AFnomS*11.30m/AFs} SchRt3={AFnomS*53.07m/AFs} SchRt4={AFnomS*167.57m/AFs} SchCt1={AFs*793.41u/AFnomS} SchCt2={AFs*13.39m/AFnomS} SchCt3={AFs*82.36m/AFnomS} SchCt4={AFs*302.95m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB006M12GM3

 
.SUBCKT CAB008A12GM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=30 Ld=3.55n Lp=5.00n Ls=3.55n Rdesr=1.02m Rpesr=250.00u Rsesr=940.00u PackageRgi=5.00 DieRgi=1.70 LgQ1=12.50n LgQ2=12.50n Cug=44.50p Cag=123.20p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-4.10p agd=1.78 ags=907.17m ads=1 Lqe=2.500000e-08 Rqe=2.74 Cqe=1.000000e-07 tau1=1.00 tau2=23.25 tm1=50.00 tm2=20.97 Rgis=1.36 Clg=67.60p Rt1={AFnomM*2.65m/AFm} Rt2={AFnomM*12.57m/AFm} Rt3={AFnomM*50.05m/AFm} Rt4={AFnomM*111.73m/AFm} Ct1={AFm*664.43u/AFnomM} Ct2={AFm*6.50m/AFnomM} Ct3={AFm*31.10m/AFnomM} Ct4={AFm*241.82m/AFnomM} SchRt1={AFnomS*2.65m/AFs} SchRt2={AFnomS*12.57m/AFs} SchRt3={AFnomS*50.05m/AFs} SchRt4={AFnomS*111.73m/AFs} SchCt1={AFs*664.43u/AFnomS} SchCt2={AFs*6.50m/AFnomS} SchCt3={AFs*31.10m/AFnomS} SchCt4={AFs*241.82m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB008A12GM3

 
.SUBCKT CAB008M12GM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=30 Ld=3.55n Lp=5.00n Ls=3.55n Rdesr=1.02m Rpesr=250.00u Rsesr=940.00u PackageRgi=5.00 DieRgi=1.70 LgQ1=12.50n LgQ2=12.50n Cug=81.30p Cag=221.30p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-4.10p agd=1.78 ags=907.17m ads=1 Lqe=2.500000e-08 Rqe=2.74 Cqe=1.000000e-07 tau1=1.00 tau2=23.25 tm1=50.00 tm2=20.97 Rgis=1.36 Clg=119.40p Rt1={AFnomM*2.85m/AFm} Rt2={AFnomM*14.56m/AFm} Rt3={AFnomM*64.16m/AFm} Rt4={AFnomM*222.43m/AFm} Ct1={AFm*587.22u/AFnomM} Ct2={AFm*7.87m/AFnomM} Ct3={AFm*43.00m/AFnomM} Ct4={AFm*163.45m/AFnomM} SchRt1={AFnomS*2.85m/AFs} SchRt2={AFnomS*14.56m/AFs} SchRt3={AFnomS*64.16m/AFs} SchRt4={AFnomS*222.43m/AFs} SchCt1={AFs*587.22u/AFnomS} SchCt2={AFs*7.87m/AFnomS} SchCt3={AFs*43.00m/AFnomS} SchCt4={AFs*163.45m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB008M12GM3

 
.SUBCKT CAB011A12GM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=3 AFs=1 AFnomM=3 AFnomS=1 die=30 Ld=3.55n Lp=5.00n Ls=3.55n Rdesr=980.00u Rpesr=250.00u Rsesr=900.00u PackageRgi=3.00 DieRgi=1.70 LgQ1=12.50n LgQ2=12.50n Cug=44.50p Cag=123.20p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=2.00p agd=820.09m ags=837.66m ads=1 Lqe=2.500000e-08 Rqe=9.99 Cqe=1.000000e-07 tau1=1.00 tau2=39.41 tm1=50.00 tm2=16.56 Rgis=1.99 Clg=67.60p Rt1={AFnomM*3.35m/AFm} Rt2={AFnomM*15.99m/AFm} Rt3={AFnomM*64.75m/AFm} Rt4={AFnomM*128.91m/AFm} Ct1={AFm*547.27u/AFnomM} Ct2={AFm*5.12m/AFnomM} Ct3={AFm*24.43m/AFnomM} Ct4={AFm*190.73m/AFnomM} SchRt1={AFnomS*3.35m/AFs} SchRt2={AFnomS*15.99m/AFs} SchRt3={AFnomS*64.75m/AFs} SchRt4={AFnomS*128.91m/AFs} SchCt1={AFs*547.27u/AFnomS} SchCt2={AFs*5.12m/AFnomS} SchCt3={AFs*24.43m/AFnomS} SchCt4={AFs*190.73m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB011A12GM3

 
.SUBCKT CAB011M12FM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=2 AFs=1 AFnomM=2 AFnomS=1 die=40 Ld=7.50n Lp=4.60n Ls=3.70n Rdesr=1.98m Rpesr=250.00u Rsesr=1.85m PackageRgi=3.10 DieRgi=3.30 LgQ1=12.50n LgQ2=12.50n Cug=61.50p Cag=98.40p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=12.00p agd=1.12 ags=572.01m ads=1 Lqe=2.500000e-08 Rqe=10.00 Cqe=1.000000e-07 tau1=1.00 tau2=37.17 tm1=50.00 tm2=1.79 Rgis=1.17 Clg=55.71p Rt1={AFnomM*4.06m/AFm} Rt2={AFnomM*25.27m/AFm} Rt3={AFnomM*131.29m/AFm} Rt4={AFnomM*267.37m/AFm} Ct1={AFm*544.92u/AFnomM} Ct2={AFm*8.36m/AFnomM} Ct3={AFm*52.78m/AFnomM} Ct4={AFm*201.68m/AFnomM} SchRt1={AFnomS*4.06m/AFs} SchRt2={AFnomS*25.27m/AFs} SchRt3={AFnomS*131.29m/AFs} SchRt4={AFnomS*267.37m/AFs} SchCt1={AFs*544.92u/AFnomS} SchCt2={AFs*8.36m/AFnomS} SchCt3={AFs*52.78m/AFnomS} SchCt4={AFs*201.68m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB011M12FM3

 
.SUBCKT CAB016M12FM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=2 AFs=1 AFnomM=2 AFnomS=1 die=30 Ld=7.54n Lp=4.60n Ls=3.70n Rdesr=1.98m Rpesr=250.00u Rsesr=1.85m PackageRgi=3.20 DieRgi=1.70 LgQ1=12.50n LgQ2=12.50n Cug=61.50p Cag=98.40p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=0.00 agd=1.43 ags=465.81m ads=1 Lqe=2.500000e-08 Rqe=9.05 Cqe=1.000000e-07 tau1=1.00 tau2=32.88 tm1=50.00 tm2=1.10 Rgis=1.84 Clg=55.71p Rt1={AFnomM*6.10m/AFm} Rt2={AFnomM*36.03m/AFm} Rt3={AFnomM*154.47m/AFm} Rt4={AFnomM*346.39m/AFm} Ct1={AFm*382.24u/AFnomM} Ct2={AFm*4.78m/AFnomM} Ct3={AFm*28.05m/AFnomM} Ct4={AFm*146.18m/AFnomM} SchRt1={AFnomS*6.10m/AFs} SchRt2={AFnomS*36.03m/AFs} SchRt3={AFnomS*154.47m/AFs} SchRt4={AFnomS*346.39m/AFs} SchCt1={AFs*382.24u/AFnomS} SchCt2={AFs*4.78m/AFnomS} SchCt3={AFs*28.05m/AFnomS} SchCt4={AFs*146.18m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB016M12FM3

 
.SUBCKT CAB320M17XM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=5 AFs=1 AFnomM=5 AFnomS=1 die=50 Ld=5.90n Lp=4.90n Ls=860.00p Rdesr=720.00u Rpesr=100.00u Rsesr=630.00u PackageRgi=2.30 DieRgi=5.20 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.70p LcsiQ1=300.00p LcsiQ2=0.00 CgdOffset=0.00 agd=1.18 ags=636.46m ads=1 Lqe=2.500000e-08 Rqe=3.81 Cqe=1.000000e-07 tau1=1.00 tau2=79.47 tm1=50.00 tm2=9.36 Rgis=1.82 Clg=4.80p Rt1={AFnomM*1.10m/AFm} Rt2={AFnomM*5.11m/AFm} Rt3={AFnomM*29.10m/AFm} Rt4={AFnomM*61.68m/AFm} Ct1={AFm*1.14m/AFnomM} Ct2={AFm*22.33m/AFnomM} Ct3={AFm*127.25m/AFnomM} Ct4={AFm*510.79m/AFnomM} SchRt1={AFnomS*1.10m/AFs} SchRt2={AFnomS*5.11m/AFs} SchRt3={AFnomS*29.10m/AFs} SchRt4={AFnomS*61.68m/AFs} SchCt1={AFs*1.14m/AFnomS} SchCt2={AFs*22.33m/AFnomS} SchCt3={AFs*127.25m/AFnomS} SchCt4={AFs*510.79m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB320M17XM3

 
.SUBCKT CAB3R5M12DM4 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=60 Ld=6.04n Lp=9.76n Ls=5.46n Rdesr=410.00u Rpesr=250.00u Rsesr=560.00u PackageRgi=0.00 DieRgi=5.70 LgQ1=10.10n LgQ2=9.45n Cug=78.60p Cag=106.55p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-6.44p agd=1.19 ags=1.05 ads=1 Lqe=2.500000e-08 Rqe=2.29 Cqe=1.000000e-07 tau1=29.04 tau2=33.01 tm1=8.73 tm2=18.67 Rgis=1.01 Clg=71.63p Rt1={AFnomM*1.77m/AFm} Rt2={AFnomM*8.34m/AFm} Rt3={AFnomM*42.48m/AFm} Rt4={AFnomM*1.00n/AFm} Ct1={AFm*721.66u/AFnomM} Ct2={AFm*12.52m/AFnomM} Ct3={AFm*69.57m/AFnomM} Ct4={AFm*1.00n/AFnomM} SchRt1={AFnomS*1.77m/AFs} SchRt2={AFnomS*8.34m/AFs} SchRt3={AFnomS*42.48m/AFs} SchRt4={AFnomS*1.00n/AFs} SchCt1={AFs*721.66u/AFnomS} SchCt2={AFs*12.52m/AFnomS} SchCt3={AFs*69.57m/AFnomS} SchCt4={AFs*1.00n/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB3R5M12DM4

 
.SUBCKT CAB400M12XM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=70 Ld=5.90n Lp=4.90n Ls=860.00p Rdesr=720.00u Rpesr=250.00u Rsesr=630.00u PackageRgi=3.00 DieRgi=2.60 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.70p LcsiQ1=300.00p LcsiQ2=0.00 CgdOffset=4.43p agd=1.33 ags=603.31m ads=1 Lqe=2.500000e-08 Rqe=2.61 Cqe=1.000000e-07 tau1=1.00 tau2=40.66 tm1=50.00 tm2=17.83 Rgis=1.46 Clg=4.80p Rt1={AFnomM*1.52m/AFm} Rt2={AFnomM*6.98m/AFm} Rt3={AFnomM*31.97m/AFm} Rt4={AFnomM*80.53m/AFm} Ct1={AFm*947.94u/AFnomM} Ct2={AFm*12.21m/AFnomM} Ct3={AFm*61.25m/AFnomM} Ct4={AFm*257.32m/AFnomM} SchRt1={AFnomS*1.52m/AFs} SchRt2={AFnomS*6.98m/AFs} SchRt3={AFnomS*31.97m/AFs} SchRt4={AFnomS*80.53m/AFs} SchCt1={AFs*947.94u/AFnomS} SchCt2={AFs*12.21m/AFnomS} SchCt3={AFs*61.25m/AFnomS} SchCt4={AFs*257.32m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB400M12XM3

 
.SUBCKT CAB425M12XM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=5 AFs=1 AFnomM=5 AFnomS=1 die=70 Ld=5.90n Lp=4.90n Ls=860.00p Rdesr=720.00u Rpesr=250.00u Rsesr=630.00u PackageRgi=3.40 DieRgi=2.60 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.70p LcsiQ1=300.00p LcsiQ2=0.00 CgdOffset=4.46p agd=1.21 ags=506.89m ads=1 Lqe=2.500000e-08 Rqe=2.13 Cqe=1.000000e-07 tau1=1.00 tau2=38.08 tm1=50.00 tm2=24.33 Rgis=1.81 Clg=4.80p Rt1={AFnomM*1.30m/AFm} Rt2={AFnomM*6.26m/AFm} Rt3={AFnomM*31.94m/AFm} Rt4={AFnomM*70.49m/AFm} Ct1={AFm*1.09m/AFnomM} Ct2={AFm*17.24m/AFnomM} Ct3={AFm*94.35m/AFnomM} Ct4={AFm*421.94m/AFnomM} SchRt1={AFnomS*1.30m/AFs} SchRt2={AFnomS*6.26m/AFs} SchRt3={AFnomS*31.94m/AFs} SchRt4={AFnomS*70.49m/AFs} SchCt1={AFs*1.09m/AFnomS} SchCt2={AFs*17.24m/AFnomS} SchCt3={AFs*94.35m/AFnomS} SchCt4={AFs*421.94m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB425M12XM3

 
.SUBCKT CAB450M12XM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=5 AFs=1 AFnomM=5 AFnomS=1 die=80 Ld=5.90n Lp=4.90n Ls=860.00p Rdesr=720.00u Rpesr=250.00u Rsesr=630.00u PackageRgi=5.80 DieRgi=6.70 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.70p LcsiQ1=300.00p LcsiQ2=0.00 CgdOffset=-11.17p agd=1.60 ags=806.64m ads=1 Lqe=2.500000e-08 Rqe=2.20 Cqe=1.000000e-07 tau1=1.00 tau2=35.00 tm1=50.00 tm2=17.38 Rgis=1.40 Clg=4.80p Rt1={AFnomM*1.10m/AFm} Rt2={AFnomM*5.12m/AFm} Rt3={AFnomM*31.36m/AFm} Rt4={AFnomM*56.42m/AFm} Ct1={AFm*1.12m/AFnomM} Ct2={AFm*24.28m/AFnomM} Ct3={AFm*142.74m/AFnomM} Ct4={AFm*618.68m/AFnomM} SchRt1={AFnomS*1.10m/AFs} SchRt2={AFnomS*5.12m/AFs} SchRt3={AFnomS*31.36m/AFs} SchRt4={AFnomS*56.42m/AFs} SchCt1={AFs*1.12m/AFnomS} SchCt2={AFs*24.28m/AFnomS} SchCt3={AFs*142.74m/AFnomS} SchCt4={AFs*618.68m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB450M12XM3

 
.SUBCKT CAB500M17HM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=8 AFs=1 AFnomM=8 AFnomS=1 die=50 Ld=2.45n Lp=5.00n Ls=2.45n Rdesr=106.50u Rpesr=100.00u Rsesr=126.30u PackageRgi=2.24 DieRgi=5.20 LgQ1=12.50n LgQ2=12.50n Cug=315.50p Cag=400.66p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-4.31p agd=1.48 ags=835.07m ads=1 Lqe=2.500000e-08 Rqe=3.88 Cqe=1.000000e-07 tau1=1.00 tau2=54.24 tm1=50.00 tm2=18.67 Rgis=1.54 Clg=237.10p Rt1={AFnomM*827.00u/AFm} Rt2={AFnomM*4.28m/AFm} Rt3={AFnomM*20.75m/AFm} Rt4={AFnomM*44.14m/AFm} Ct1={AFm*1.87m/AFnomM} Ct2={AFm*29.80m/AFnomM} Ct3={AFm*169.03m/AFnomM} Ct4={AFm*913.44m/AFnomM} SchRt1={AFnomS*827.00u/AFs} SchRt2={AFnomS*4.28m/AFs} SchRt3={AFnomS*20.75m/AFs} SchRt4={AFnomS*44.14m/AFs} SchCt1={AFs*1.87m/AFnomS} SchCt2={AFs*29.80m/AFnomS} SchCt3={AFs*169.03m/AFnomS} SchCt4={AFs*913.44m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB500M17HM3

 
.SUBCKT CAB530M12BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=6 AFs=1 AFnomM=6 AFnomS=1 die=70 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=420.00u Rpesr=250.00u Rsesr=280.00u PackageRgi=15.00 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=176.90p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=3.16p agd=1.09 ags=623.08m ads=1 Lqe=2.500000e-08 Rqe=7.31 Cqe=1.000000e-07 tau1=1.00 tau2=48.23 tm1=50.00 tm2=4.56 Rgis=1.20 Clg=90.50p Rt1={AFnomM*1.91m/AFm} Rt2={AFnomM*11.42m/AFm} Rt3={AFnomM*7.37m/AFm} Rt4={AFnomM*44.30m/AFm} Ct1={AFm*5.81m/AFnomM} Ct2={AFm*80.15m/AFnomM} Ct3={AFm*82.37m/AFnomM} Ct4={AFm*1.15/AFnomM} SchRt1={AFnomS*1.91m/AFs} SchRt2={AFnomS*11.42m/AFs} SchRt3={AFnomS*7.37m/AFs} SchRt4={AFnomS*44.30m/AFs} SchCt1={AFs*5.81m/AFnomS} SchCt2={AFs*80.15m/AFnomS} SchCt3={AFs*82.37m/AFnomS} SchCt4={AFs*1.15/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB530M12BM3

 
.SUBCKT CAB650M17HM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=12 AFs=1 AFnomM=12 AFnomS=1 die=50 Ld=2.45n Lp=5.00n Ls=2.45n Rdesr=106.50u Rpesr=100.00u Rsesr=126.30u PackageRgi=2.24 DieRgi=5.20 LgQ1=12.50n LgQ2=12.50n Cug=315.50p Cag=400.66p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-1.86p agd=1.15 ags=881.54m ads=1 Lqe=2.500000e-08 Rqe=4.15 Cqe=1.000000e-07 tau1=1.00 tau2=48.46 tm1=50.00 tm2=15.76 Rgis=1.54 Clg=237.10p Rt1={AFnomM*591.74u/AFm} Rt2={AFnomM*3.25m/AFm} Rt3={AFnomM*16.88m/AFm} Rt4={AFnomM*33.28m/AFm} Ct1={AFm*2.59m/AFnomM} Ct2={AFm*50.11m/AFnomM} Ct3={AFm*307.56m/AFnomM} Ct4={AFm*2.06/AFnomM} SchRt1={AFnomS*591.74u/AFs} SchRt2={AFnomS*3.25m/AFs} SchRt3={AFnomS*16.88m/AFs} SchRt4={AFnomS*33.28m/AFs} SchCt1={AFs*2.59m/AFnomS} SchCt2={AFs*50.11m/AFnomS} SchCt3={AFs*307.56m/AFnomS} SchCt4={AFs*2.06/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB650M17HM3

 
.SUBCKT CAB760M12HM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=12 AFs=1 AFnomM=12 AFnomS=1 die=70 Ld=2.45n Lp=5.00n Ls=2.45n Rdesr=106.50u Rpesr=250.00u Rsesr=126.30u PackageRgi=3.00 DieRgi=2.60 LgQ1=12.50n LgQ2=12.50n Cug=315.50p Cag=400.66p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-4.07p agd=1.75 ags=642.47m ads=1 Lqe=2.500000e-08 Rqe=8.46 Cqe=1.000000e-07 tau1=8.00 tau2=28.44 tm1=15.00 tm2=4.10 Rgis=1.97 Clg=237.10p Rt1={AFnomM*678.27u/AFm} Rt2={AFnomM*3.51m/AFm} Rt3={AFnomM*19.26m/AFm} Rt4={AFnomM*38.49m/AFm} Ct1={AFm*1.96m/AFnomM} Ct2={AFm*44.04m/AFnomM} Ct3={AFm*274.94m/AFnomM} Ct4={AFm*1.69/AFnomM} SchRt1={AFnomS*678.27u/AFs} SchRt2={AFnomS*3.51m/AFs} SchRt3={AFnomS*19.26m/AFs} SchRt4={AFnomS*38.49m/AFs} SchCt1={AFs*1.96m/AFnomS} SchCt2={AFs*44.04m/AFnomS} SchCt3={AFs*274.94m/AFnomS} SchCt4={AFs*1.69/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB760M12HM3

 
.SUBCKT CAS175M12BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=1 AFm=2 AFs=2 AFnomM=2 AFnomS=2 die=70 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=2.30m Rpesr=250.00u Rsesr=2.12m PackageRgi=7.50 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=176.90p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=3.49p agd=1.61 ags=725.28m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=1.19 Clg=90.50p Rt1={AFnomM*2.97m/AFm} Rt2={AFnomM*13.79m/AFm} Rt3={AFnomM*62.65m/AFm} Rt4={AFnomM*110.59m/AFm} Ct1={AFm*608.69u/AFnomM} Ct2={AFm*5.51m/AFnomM} Ct3={AFm*25.83m/AFnomM} Ct4={AFm*171.87m/AFnomM} SchRt1={AFnomS*2.45m/AFs} SchRt2={AFnomS*11.89m/AFs} SchRt3={AFnomS*77.51m/AFs} SchRt4={AFnomS*124.15m/AFs} SchCt1={AFs*705.34u/AFnomS} SchCt2={AFs*7.88m/AFnomS} SchCt3={AFs*38.81m/AFnomS} SchCt4={AFs*180.94m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAS175M12BM3

 
.SUBCKT CAS310M17BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1002 Schottky=1 AFm=4 AFs=4 AFnomM=4 AFnomS=4 die=50 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=1.31m Rpesr=250.00u Rsesr=1.26m PackageRgi=2.20 DieRgi=5.20 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=176.90p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-0.00 agd=1.58 ags=645.46m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=1.17 Clg=90.50p Rt1={AFnomM*1.28m/AFm} Rt2={AFnomM*6.17m/AFm} Rt3={AFnomM*29.97m/AFm} Rt4={AFnomM*54.58m/AFm} Ct1={AFm*1.33m/AFnomM} Ct2={AFm*14.28m/AFnomM} Ct3={AFm*70.96m/AFnomM} Ct4={AFm*563.10m/AFnomM} SchRt1={AFnomS*1.03m/AFs} SchRt2={AFnomS*5.19m/AFs} SchRt3={AFnomS*27.75m/AFs} SchRt4={AFnomS*52.04m/AFs} SchCt1={AFs*1.53m/AFnomS} SchCt2={AFs*21.77m/AFnomS} SchCt3={AFs*119.84m/AFnomS} SchCt4={AFs*603.02m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAS310M17BM3

 
.SUBCKT CAS350M12BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=1 AFm=4 AFs=4 AFnomM=4 AFnomS=4 die=70 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=1.31m Rpesr=250.00u Rsesr=1.26m PackageRgi=7.50 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=176.90p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-3.99p agd=1.94 ags=574.18m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=1.28 Clg=90.50p Rt1={AFnomM*1.70m/AFm} Rt2={AFnomM*8.52m/AFm} Rt3={AFnomM*39.56m/AFm} Rt4={AFnomM*66.22m/AFm} Ct1={AFm*1.12m/AFnomM} Ct2={AFm*11.80m/AFnomM} Ct3={AFm*58.98m/AFnomM} Ct4={AFm*509.39m/AFnomM} SchRt1={AFnomS*1.42m/AFs} SchRt2={AFnomS*7.20m/AFs} SchRt3={AFnomS*39.07m/AFs} SchRt4={AFnomS*64.30m/AFs} SchCt1={AFs*1.24m/AFnomS} SchCt2={AFs*15.02m/AFnomS} SchCt3={AFs*79.29m/AFnomS} SchCt4={AFs*388.60m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAS350M12BM3

 
.SUBCKT CAS380M17HM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1002 Schottky=1 AFm=6 AFs=5 AFnomM=6 AFnomS=5 die=50 Ld=2.45n Lp=5.00n Ls=2.45n Rdesr=106.50u Rpesr=100.00u Rsesr=126.30u PackageRgi=2.18 DieRgi=5.20 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.70p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=0.00 agd=1.27 ags=746.38m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=1.35 Clg=4.80p Rt1={AFnomM*1.01m/AFm} Rt2={AFnomM*5.06m/AFm} Rt3={AFnomM*22.75m/AFm} Rt4={AFnomM*50.18m/AFm} Ct1={AFm*1.64m/AFnomM} Ct2={AFm*20.84m/AFnomM} Ct3={AFm*109.24m/AFnomM} Ct4={AFm*561.91m/AFnomM} SchRt1={AFnomS*784.85u/AFs} SchRt2={AFnomS*3.84m/AFs} SchRt3={AFnomS*32.27m/AFs} SchRt4={AFnomS*54.11m/AFs} SchCt1={AFs*1.72m/AFnomS} SchCt2={AFs*32.73m/AFnomS} SchCt3={AFs*186.54m/AFnomS} SchCt4={AFs*840.08m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAS380M17HM3

 
.SUBCKT CAS480M12HM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=1 AFm=7 AFs=6 AFnomM=7 AFnomS=6 die=70 Ld=2.45n Lp=5.00n Ls=2.45n Rdesr=106.50u Rpesr=250.00u Rsesr=126.30u PackageRgi=3.00 DieRgi=2.60 LgQ1=12.50n LgQ2=12.50n Cug=315.50p Cag=400.66p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=6.54p agd=1.12 ags=671.94m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=1.84 Clg=237.10p Rt1={AFnomM*851.16u/AFm} Rt2={AFnomM*6.03m/AFm} Rt3={AFnomM*35.01m/AFm} Rt4={AFnomM*58.11m/AFm} Ct1={AFm*3.63m/AFnomM} Ct2={AFm*48.70m/AFnomM} Ct3={AFm*314.26m/AFnomM} Ct4={AFm*5.04/AFnomM} SchRt1={AFnomS*953.13u/AFs} SchRt2={AFnomS*6.86m/AFs} SchRt3={AFnomS*39.67m/AFs} SchRt4={AFnomS*62.51m/AFs} SchCt1={AFs*3.35m/AFnomS} SchCt2={AFs*45.54m/AFnomS} SchCt3={AFs*296.46m/AFnomS} SchCt4={AFs*5.06/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAS480M12HM3

 
.SUBCKT CAS530M12BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=1 AFm=6 AFs=6 AFnomM=6 AFnomS=6 die=70 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=900.00u Rpesr=250.00u Rsesr=970.00u PackageRgi=7.50 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=176.90p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=5.37p agd=1.37 ags=537.81m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=1.24 Clg=90.50p Rt1={AFnomM*1.05m/AFm} Rt2={AFnomM*5.05m/AFm} Rt3={AFnomM*22.82m/AFm} Rt4={AFnomM*46.08m/AFm} Ct1={AFm*1.54m/AFnomM} Ct2={AFm*17.91m/AFnomM} Ct3={AFm*89.22m/AFnomM} Ct4={AFm*697.01m/AFnomM} SchRt1={AFnomS*988.05u/AFs} SchRt2={AFnomS*4.94m/AFs} SchRt3={AFnomS*26.88m/AFs} SchRt4={AFnomS*45.19m/AFs} SchCt1={AFs*1.61m/AFnomS} SchCt2={AFs*22.24m/AFnomS} SchCt3={AFs*119.66m/AFnomS} SchCt4={AFs*636.87m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAS530M12BM3

 
.SUBCKT EAB450M12XM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=5 AFs=1 AFnomM=5 AFnomS=1 die=80 Ld=5.90n Lp=4.90n Ls=860.00p Rdesr=720.00u Rpesr=250.00u Rsesr=630.00u PackageRgi=5.80 DieRgi=6.70 LgQ1=12.50n LgQ2=12.50n Cug=175.00p Cag=255.70p LcsiQ1=300.00p LcsiQ2=0.00 CgdOffset=-11.17p agd=1.60 ags=806.64m ads=1 Lqe=2.500000e-08 Rqe=2.20 Cqe=1.000000e-07 tau1=1.00 tau2=35.00 tm1=50.00 tm2=17.38 Rgis=1.40 Clg=4.80p Rt1={AFnomM*1.10m/AFm} Rt2={AFnomM*5.12m/AFm} Rt3={AFnomM*31.36m/AFm} Rt4={AFnomM*56.42m/AFm} Ct1={AFm*1.12m/AFnomM} Ct2={AFm*24.28m/AFnomM} Ct3={AFm*142.74m/AFnomM} Ct4={AFm*618.68m/AFnomM} SchRt1={AFnomS*1.10m/AFs} SchRt2={AFnomS*5.12m/AFs} SchRt3={AFnomS*31.36m/AFs} SchRt4={AFnomS*56.42m/AFs} SchCt1={AFs*1.12m/AFnomS} SchCt2={AFs*24.28m/AFnomS} SchCt3={AFs*142.74m/AFnomS} SchCt4={AFs*618.68m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS EAB450M12XM3

 
.SUBCKT WAB300M12BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=70 Ld=6.30n Lp=19.00n Ls=2.50n Rdesr=600.00u Rpesr=250.00u Rsesr=510.00u PackageRgi=3.00 DieRgi=2.60 LgQ1=25.00n LgQ2=20.00n Cug=89.50p Cag=151.60p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=6.82p agd=1.43 ags=540.19m ads=1 Lqe=2.500000e-08 Rqe=6.89 Cqe=1.000000e-07 tau1=1.00 tau2=42.10 tm1=50.00 tm2=1.45 Rgis=1.41 Clg=107.00p Rt1={AFnomM*28.23m/AFm} Rt2={AFnomM*55.16m/AFm} Rt3={AFnomM*40.99m/AFm} Rt4={AFnomM*35.62m/AFm} Ct1={AFm*74.25m/AFnomM} Ct2={AFm*249.41m/AFnomM} Ct3={AFm*2.91/AFnomM} Ct4={AFm*5.51/AFnomM} SchRt1={AFnomS*28.23m/AFs} SchRt2={AFnomS*55.16m/AFs} SchRt3={AFnomS*40.99m/AFs} SchRt4={AFnomS*35.62m/AFs} SchCt1={AFs*74.25m/AFnomS} SchCt2={AFs*249.41m/AFnomS} SchCt3={AFs*2.91/AFnomS} SchCt4={AFs*5.51/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS WAB300M12BM3

 
.SUBCKT WAB400M12BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=90 Ld=6.30n Lp=19.00n Ls=2.50n Rdesr=600.00u Rpesr=250.00u Rsesr=510.00u PackageRgi=4.00 DieRgi=6.70 LgQ1=25.00n LgQ2=20.00n Cug=89.50p Cag=151.60p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-0.00 agd=1.50 ags=1.07 ads=1 Lqe=2.500000e-08 Rqe=6.05 Cqe=1.000000e-07 tau1=1.00 tau2=50.65 tm1=50.00 tm2=8.65 Rgis=671.52m Clg=107.00p Rt1={AFnomM*21.93m/AFm} Rt2={AFnomM*14.38m/AFm} Rt3={AFnomM*52.01m/AFm} Rt4={AFnomM*41.69m/AFm} Ct1={AFm*97.22m/AFnomM} Ct2={AFm*19.05m/AFnomM} Ct3={AFm*593.73m/AFnomM} Ct4={AFm*1.73/AFnomM} SchRt1={AFnomS*21.93m/AFs} SchRt2={AFnomS*14.38m/AFs} SchRt3={AFnomS*52.01m/AFs} SchRt4={AFnomS*41.69m/AFs} SchCt1={AFs*97.22m/AFnomS} SchCt2={AFs*19.05m/AFnomS} SchCt3={AFs*593.73m/AFnomS} SchCt4={AFs*1.73/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS WAB400M12BM3

 
.SUBCKT WAS175M12BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=1 AFm=2 AFs=2 AFnomM=2 AFnomS=2 die=70 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=2.30m Rpesr=250.00u Rsesr=2.12m PackageRgi=7.50 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=176.90p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=3.49p agd=1.61 ags=725.28m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=1.19 Clg=90.50p Rt1={AFnomM*2.97m/AFm} Rt2={AFnomM*13.79m/AFm} Rt3={AFnomM*62.65m/AFm} Rt4={AFnomM*110.59m/AFm} Ct1={AFm*608.69u/AFnomM} Ct2={AFm*5.51m/AFnomM} Ct3={AFm*25.83m/AFnomM} Ct4={AFm*171.87m/AFnomM} SchRt1={AFnomS*2.45m/AFs} SchRt2={AFnomS*11.89m/AFs} SchRt3={AFnomS*77.51m/AFs} SchRt4={AFnomS*124.15m/AFs} SchCt1={AFs*705.34u/AFnomS} SchCt2={AFs*7.88m/AFnomS} SchCt3={AFs*38.81m/AFnomS} SchCt4={AFs*180.94m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS WAS175M12BM3

 
.SUBCKT WAS310M17BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1002 Schottky=1 AFm=4 AFs=4 AFnomM=4 AFnomS=4 die=50 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=1.31m Rpesr=250.00u Rsesr=1.26m PackageRgi=2.20 DieRgi=5.20 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=176.90p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-0.00 agd=1.58 ags=645.46m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=1.17 Clg=90.50p Rt1={AFnomM*1.28m/AFm} Rt2={AFnomM*6.17m/AFm} Rt3={AFnomM*29.97m/AFm} Rt4={AFnomM*54.58m/AFm} Ct1={AFm*1.33m/AFnomM} Ct2={AFm*14.28m/AFnomM} Ct3={AFm*70.96m/AFnomM} Ct4={AFm*563.10m/AFnomM} SchRt1={AFnomS*1.03m/AFs} SchRt2={AFnomS*5.19m/AFs} SchRt3={AFnomS*27.75m/AFs} SchRt4={AFnomS*52.04m/AFs} SchCt1={AFs*1.53m/AFnomS} SchCt2={AFs*21.77m/AFnomS} SchCt3={AFs*119.84m/AFnomS} SchCt4={AFs*603.02m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS WAS310M17BM3

 
.SUBCKT WAS350M12BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=1 AFm=4 AFs=4 AFnomM=4 AFnomS=4 die=70 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=1.31m Rpesr=250.00u Rsesr=1.26m PackageRgi=7.50 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=176.90p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-3.99p agd=1.94 ags=574.18m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=1.28 Clg=90.50p Rt1={AFnomM*1.70m/AFm} Rt2={AFnomM*8.52m/AFm} Rt3={AFnomM*39.56m/AFm} Rt4={AFnomM*66.22m/AFm} Ct1={AFm*1.12m/AFnomM} Ct2={AFm*11.80m/AFnomM} Ct3={AFm*58.98m/AFnomM} Ct4={AFm*509.39m/AFnomM} SchRt1={AFnomS*1.42m/AFs} SchRt2={AFnomS*7.20m/AFs} SchRt3={AFnomS*39.07m/AFs} SchRt4={AFnomS*64.30m/AFs} SchCt1={AFs*1.24m/AFnomS} SchCt2={AFs*15.02m/AFnomS} SchCt3={AFs*79.29m/AFnomS} SchCt4={AFs*388.60m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS WAS350M12BM3

 
.SUBCKT WAS530M12BM3 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=1 AFm=6 AFs=6 AFnomM=6 AFnomS=6 die=70 Ld=8.75n Lp=16.10n Ls=2.93n Rdesr=900.00u Rpesr=250.00u Rsesr=970.00u PackageRgi=7.50 DieRgi=2.60 LgQ1=48.00n LgQ2=62.00n Cug=115.10p Cag=176.90p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=5.37p agd=1.37 ags=537.81m ads=1 Lqe=2.500000e-08 Rqe=1.00 Cqe=1.000000e-07 tau1=1.00 tau2=1.00 tm1=1.00 tm2=1.00 Rgis=1.24 Clg=90.50p Rt1={AFnomM*1.05m/AFm} Rt2={AFnomM*5.05m/AFm} Rt3={AFnomM*22.82m/AFm} Rt4={AFnomM*46.08m/AFm} Ct1={AFm*1.54m/AFnomM} Ct2={AFm*17.91m/AFnomM} Ct3={AFm*89.22m/AFnomM} Ct4={AFm*697.01m/AFnomM} SchRt1={AFnomS*988.05u/AFs} SchRt2={AFnomS*4.94m/AFs} SchRt3={AFnomS*26.88m/AFs} SchRt4={AFnomS*45.19m/AFs} SchCt1={AFs*1.61m/AFnomS} SchCt2={AFs*22.24m/AFnomS} SchCt3={AFs*119.66m/AFnomS} SchCt4={AFs*636.87m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS WAS530M12BM3

 
.SUBCKT CAB7R5A23GM4 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=4 AFs=1 AFnomM=4 AFnomS=1 die=100 Ld=7.00n Lp=2.00n Ls=4.00n Rdesr=750.00u Rpesr=750.00u Rsesr=650.00u PackageRgi=0.00 DieRgi=6.60 LgQ1=8.50n LgQ2=8.50n Cug=50.00p Cag=100.00p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-11.09p agd=1.13 ags=821.21m ads=1 Lqe=2.500000e-08 Rqe=3.00 Cqe=1.000000e-07 tau1=19.41 tau2=37.84 tm1=5.95 tm2=22.65 Rgis=1.46 Clg=48.00p Rt1={AFnomM*1.75m/AFm} Rt2={AFnomM*8.61m/AFm} Rt3={AFnomM*34.47m/AFm} Rt4={AFnomM*100.17m/AFm} Ct1={AFm*895.86u/AFnomM} Ct2={AFm*11.13m/AFnomM} Ct3={AFm*58.10m/AFnomM} Ct4={AFm*468.57m/AFnomM} SchRt1={AFnomS*1.75m/AFs} SchRt2={AFnomS*8.61m/AFs} SchRt3={AFnomS*34.47m/AFs} SchRt4={AFnomS*100.17m/AFs} SchCt1={AFs*895.86u/AFnomS} SchCt2={AFs*11.13m/AFnomS} SchCt3={AFs*58.10m/AFnomS} SchCt4={AFs*468.57m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB7R5A23GM4

 
.SUBCKT CAB6R0A23GM4 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=5 AFs=1 AFnomM=5 AFnomS=1 die=100 Ld=7.00n Lp=2.00n Ls=4.00n Rdesr=750.00u Rpesr=750.00u Rsesr=650.00u PackageRgi=0.00 DieRgi=6.60 LgQ1=8.50n LgQ2=8.50n Cug=50.00p Cag=100.00p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-7.96p agd=1.49 ags=930.86m ads=1 Lqe=2.500000e-08 Rqe=932.64m Cqe=1.000000e-07 tau1=25.41 tau2=41.52 tm1=15.23 tm2=21.96 Rgis=970.23m Clg=48.00p Rt1={AFnomM*1.32m/AFm} Rt2={AFnomM*6.62m/AFm} Rt3={AFnomM*28.10m/AFm} Rt4={AFnomM*84.96m/AFm} Ct1={AFm*1.11m/AFnomM} Ct2={AFm*16.39m/AFnomM} Ct3={AFm*90.37m/AFnomM} Ct4={AFm*713.65m/AFnomM} SchRt1={AFnomS*1.32m/AFs} SchRt2={AFnomS*6.62m/AFs} SchRt3={AFnomS*28.10m/AFs} SchRt4={AFnomS*84.96m/AFs} SchCt1={AFs*1.11m/AFnomS} SchCt2={AFs*16.39m/AFnomS} SchCt3={AFs*90.37m/AFnomS} SchCt4={AFs*713.65m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB6R0A23GM4

 
.SUBCKT CAB5R0A23GM4 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate
 
*** Default Parameters *** 
 
.param BPC=0 Thermals=1 level=3 Vths=0 Rdss=0 Rp=100 Tj={TEMP} SchSub=1001 Schottky=0 AFm=6 AFs=1 AFnomM=6 AFnomS=1 die=100 Ld=7.00n Lp=2.00n Ls=4.00n Rdesr=750.00u Rpesr=750.00u Rsesr=650.00u PackageRgi=0.00 DieRgi=6.60 LgQ1=8.50n LgQ2=8.50n Cug=50.00p Cag=100.00p LcsiQ1=0.00 LcsiQ2=0.00 CgdOffset=-5.67p agd=1.24 ags=798.12m ads=1 Lqe=2.500000e-08 Rqe=930.18m Cqe=1.000000e-07 tau1=19.60 tau2=45.83 tm1=8.55 tm2=26.71 Rgis=989.12m Clg=48.00p Rt1={AFnomM*1.11m/AFm} Rt2={AFnomM*5.24m/AFm} Rt3={AFnomM*22.83m/AFm} Rt4={AFnomM*75.83m/AFm} Ct1={AFm*1.16m/AFnomM} Ct2={AFm*19.40m/AFnomM} Ct3={AFm*106.73m/AFnomM} Ct4={AFm*840.20m/AFnomM} SchRt1={AFnomS*1.11m/AFs} SchRt2={AFnomS*5.24m/AFs} SchRt3={AFnomS*22.83m/AFs} SchRt4={AFnomS*75.83m/AFs} SchCt1={AFs*1.16m/AFnomS} SchCt2={AFs*19.40m/AFnomS} SchCt3={AFs*106.73m/AFnomS} SchCt4={AFs*840.20m/AFnomS}
 
*** Behavior Optimization *** 
 
.param lvl = if(Schottky,min(level,2),level)
.param SchT = {if(level-1,1,0)*Thermals*Schottky}
.param LmflagQ11 = {if(LcsiQ1+0.5,7,6)}
.param LmflagQ21 = {if(LcsiQ2+0.5,7,6)}
.param LmflagQ1 = {if(abs(LcsiQ1-0.5),8,LmflagQ11)}
.param LmflagQ2 = {if(abs(LcsiQ2-0.5),8,LmflagQ21)}
.param SchottkyD = {-5*(Schottky-1) + Schottky*SchSub}
.param RgiPerDie = {PackageRgi+DieRgi}
.param Rgi = {Rgis*RgiPerDie/AFm}
 
*** Module Subcircuit Call *** 
 
X1 V+ Mid V- G1 K1 G2 K2 Tc1 Tc2 TjQ1 TjQ2 TjD1 TjD2 Baseplate Module_HalfBridge PARAMS: BPC = {BPC+1} Thermal = {Thermals+3} SchottkyThermal={SchT+3} Schottky={SchottkyD} Rdss={Rdss} Vths={Vths} AFm={AFm} Afs={AFs} Rp={Rp} Tj={Tj} CgdOffset={CgdOffset} die={die+lvl} Ld={Ld} Lp={Lp} Ls={Ls} LcsiQ1={LcsiQ1} LcsiQ2={LcsiQ2} LmflagQ1={LmflagQ1} LmflagQ2={LmflagQ2} Rdesr={Rdesr} Rpesr={Rpesr} Rsesr={Rsesr} Rgi={Rgi} LgQ1={LgQ1} LgQ2={LgQ2} Cug={Cug} Cag={Cag} Clg={Clg} Rt1={Rt1} Rt2={Rt2} Rt3={Rt3} Rt4={Rt4} Ct1={Ct1} Ct2={Ct2} Ct3={Ct3} Ct4={Ct4} SchRt1={SchRt1} SchRt2={SchRt2} SchRt3={SchRt3} SchRt4={SchRt4} SchCt1={SchCt1} SchCt2={SchCt2} SchCt3={SchCt3} SchCt4={SchCt4} agd={agd} ads={ads} ags={ags} tm1={tm1} tm2={tm2} tau1={tau1} tau2={tau2} Lqe={Lqe} Rqe={Rqe} Cqe={Cqe} dummy=1m

.ENDS CAB5R0A23GM4



**********************************************************************
********************* SiC MOSFET Models ******************************
**********************************************************************
.SUBCKT 11 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,1.1111e-15,0.5,6.9025e-13,1,4.288e-10,1.5,2.6638e-07,2,0.00016548,2.5,0.1028,3,0.61161,3.5,1.8645,4,4.6944,4.5,9.6407,5,17,5.5,27.4274,6,41.7934,6.5,58.969,7,77.6614,7.5,101.6296,8,130.0774,8.5,164.2441,9,207.7665,9.5,249.8493,10,283.5178,10.5,302.7264,11,321.8623,11.5,343.7897,12,373.7928,12.5,413.828,13,418.498,13.5,440.8655,14,473.7169,14.5,483.4337,15,617.2347,15.5,723.0496,16,1336.8199,16.5,1390.7418,17,1400.0233,17.5,1411.7822,18,1426.9848,18.5,1446.7792,19,1472.5849,19.5,1506.228,20,1550.1506,20.5,1607.7503,21,1683.9572,21.5,1786.269,22,1926.7379,22.5,2126.1184,23,2423.5233,23.5,2990.0911,24,4282.2316,24.5,7284.3555,25,23201.2263,25.5,5.336278464510927e+16,26,5.336278464510927e+16,26.5,5.336278464510927e+16,27,5.336278464510927e+16,27.5,5.336278464510927e+16,28,5.336278464510927e+16,28.5,5.336278464510927e+16,29,5.336278464510927e+16,29.5,5.336278464510927e+16,30,5.336278464510927e+16)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.69782,4.5,0.52295,5,0.53072,5.5,0.51326,6,0.46577,6.5,0.45221,7,0.4632,7.5,0.44645,8,0.42585,8.5,0.40382,9,0.35677,9.5,0.339,10,0.3479,10.5,0.38269,11,0.4112,11.5,0.43854,12,0.44864,12.5,0.44624,13,0.49087,13.5,0.51685,14,0.52309,14.5,0.55907,15,0.46997,15.5,0.42669,16,0.24419,16.5,0.26861,17,0.29547,17.5,0.32502,18,0.35752,18.5,0.39327,19,0.4326,19.5,0.47586,20,0.52345,20.5,0.57579,21,0.63337,21.5,0.69671,22,0.76638,22.5,0.84302,23,0.92732,23.5,0.99,24,0.99,24.5,0.99,25,0.93741,25.5,0.85929,26,0.85903,26.5,0.85903,27,0.85903,27.5,0.85903,28,0.85899,28.5,0.85899,29,0.85899,29.5,0.85899,30,0.85899)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.0014508,3,0.0046688,3.5,0.011142,4,0.020684,4.5,0.03417,5,0.054369,5.5,0.078862,6,0.10391,6.5,0.14519,7,0.2319,7.5,0.29386,8,0.33308,8.5,0.33308,9,0.33308,9.5,0.33308,10,0.33308,10.5,0.33308,11,0.33308,11.5,0.33308,12,0.33308,12.5,0.33308,13,0.33308,13.5,0.33308,14,0.33308,14.5,0.33308,15,0.33308,15.5,0.33308,16,0.33308,16.5,0.33308,17,0.33308,17.5,0.33308,18,0.33308,18.5,0.33308,19,0.33308,19.5,0.33308,20,0.33308,20.5,0.33308,21,0.33308,21.5,0.33308,22,0.33308,22.5,0.33308,23,0.33308,23.5,0.33308,24,0.33308,24.5,0.33308,25,0.33308,25.5,0.33308,26,0.33308,26.5,0.33308,27,0.33308,27.5,0.33308,28,0.33308,28.5,0.33308,29,0.33308,29.5,0.33308,30,0.33308)}
.func RTJ(Tj) {table(Tj,25,0.0066794,35,0.006878,45,0.0071097,55,0.0073743,65,0.0076719,75,0.0080026,85,0.0083663,95,0.008763,105,0.0091926,115,0.0096553,125,0.010151,135,0.01068,145,0.011241,155,0.011836,165,0.012464,175,0.013125,275,0.019732,375,0.02634,475,0.032947,575,0.039554,675,0.046162,775,0.052769,875,0.059377,975,0.065984,1075,0.072592,1175,0.079199,1275,0.085806,1375,0.092414,1475,0.099021,1575,0.10563,1675,0.11224,1775,0.11884,1875,0.12545,1975,0.13206)}
.func VthFwd(Tj) {table(Tj,25,-0.087925,35,-0.12812,45,-0.1515,55,-0.15809,65,-0.14787,75,-0.12084,85,-0.077008,95,-0.016372,105,0.061069,115,0.15531,125,0.26636,135,0.39422,145,0.53888,155,0.70034,165,0.87861,175,1.0737,275,3.0244,375,4.9752,475,6,575,6,675,6,775,6,875,6,975,6,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.param Is=10.00u

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.009,6.150,0.013,6.149,0.017,6.145,0.023,6.144,0.030,6.137,0.041,6.119,0.054,6.104,0.073,6.087,0.097,6.053,0.130,6.028,0.174,5.980,0.233,5.932,0.311,5.862,0.416,5.775,0.557,5.669,0.744,5.534,0.996,5.375,1.331,5.180,1.781,4.959,2.382,4.704,3.185,4.421,4.260,4.113,5.697,3.792,7.620,3.465,10.191,3.135,13.630,2.662,18.229,2.298,24.380,1.974,32.607,1.638,43.609,1.317,58.324,1.060,78.004,0.884,104.325,0.748,139.528,0.639,186.608,0.550,249.575,0.476,333.789,0.413,446.420,0.361,597.055,0.344,798.518,0.341)}

.func Cdg(V) {table(V,0.009,3.007,0.013,3.002,0.017,3.000,0.023,2.996,0.030,2.982,0.041,2.961,0.054,2.926,0.073,2.902,0.097,2.843,0.130,2.788,0.174,2.698,0.233,2.600,0.311,2.464,0.416,2.289,0.557,2.088,0.744,1.875,0.996,1.686,1.331,1.511,1.781,1.338,2.382,1.163,3.185,0.998,4.260,0.847,5.697,0.705,7.620,0.569,10.191,0.434,13.630,0.190,18.229,0.112,24.380,0.093,32.607,0.079,43.609,0.062,58.324,0.047,78.004,0.039,104.325,0.034,139.528,0.030,186.608,0.026,249.575,0.023,333.789,0.021,446.420,0.018,597.055,0.018,798.518,0.019)}

.func Cgs(V) {table(V,-4.970,4.778,-4.282,3.398,-3.593,3.349,-2.905,3.403,-2.217,3.525,-1.529,3.718,-0.840,4.074,-0.152,4.991,0.536,5.964,1.224,6.696,1.913,7.045,2.601,7.203,3.289,7.286,3.978,7.338,4.666,7.374,5.354,7.400,6.042,7.421,6.731,7.438,7.419,7.451,8.107,7.463,8.796,7.474,9.484,7.483,10.172,7.492,10.860,7.500,11.549,7.507,12.237,7.513,12.925,7.520,13.613,7.526,14.302,7.531,14.990,7.537)}


.param Is_ideal=1.000000e-05
.param n_ideal=4.837933e-01
.param Rs_ideal=6.737811e-03
.ENDS 11

.SUBCKT 12 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*min(Is*(-1+exp(max(V(S,d2),-1n)/(nn(V(G,S))*nscal(V(Tj))))),1e5)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,1.1111e-15,0.5,6.9025e-13,1,4.288e-10,1.5,2.6638e-07,2,0.00016548,2.5,0.1028,3,0.61161,3.5,1.8645,4,4.6944,4.5,9.6407,5,17,5.5,27.4274,6,41.7934,6.5,58.969,7,77.6614,7.5,101.6296,8,130.0774,8.5,164.2441,9,207.7665,9.5,249.8493,10,283.5178,10.5,302.7264,11,321.8623,11.5,343.7897,12,373.7928,12.5,413.828,13,418.498,13.5,440.8655,14,473.7169,14.5,483.4337,15,617.2347,15.5,723.0496,16,1336.8199,16.5,1390.7418,17,1400.0233,17.5,1411.7822,18,1426.9848,18.5,1446.7792,19,1472.5849,19.5,1506.228,20,1550.1506,20.5,1607.7503,21,1683.9572,21.5,1786.269,22,1926.7379,22.5,2126.1184,23,2423.5233,23.5,2990.0911,24,4282.2316,24.5,7284.3555,25,23201.2263,25.5,5.336278464510927e+16,26,5.336278464510927e+16,26.5,5.336278464510927e+16,27,5.336278464510927e+16,27.5,5.336278464510927e+16,28,5.336278464510927e+16,28.5,5.336278464510927e+16,29,5.336278464510927e+16,29.5,5.336278464510927e+16,30,5.336278464510927e+16)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.69782,4.5,0.52295,5,0.53072,5.5,0.51326,6,0.46577,6.5,0.45221,7,0.4632,7.5,0.44645,8,0.42585,8.5,0.40382,9,0.35677,9.5,0.339,10,0.3479,10.5,0.38269,11,0.4112,11.5,0.43854,12,0.44864,12.5,0.44624,13,0.49087,13.5,0.51685,14,0.52309,14.5,0.55907,15,0.46997,15.5,0.42669,16,0.24419,16.5,0.26861,17,0.29547,17.5,0.32502,18,0.35752,18.5,0.39327,19,0.4326,19.5,0.47586,20,0.52345,20.5,0.57579,21,0.63337,21.5,0.69671,22,0.76638,22.5,0.84302,23,0.92732,23.5,0.99,24,0.99,24.5,0.99,25,0.93741,25.5,0.85929,26,0.85903,26.5,0.85903,27,0.85903,27.5,0.85903,28,0.85899,28.5,0.85899,29,0.85899,29.5,0.85899,30,0.85899)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.0014508,3,0.0046688,3.5,0.011142,4,0.020684,4.5,0.03417,5,0.054369,5.5,0.078862,6,0.10391,6.5,0.14519,7,0.2319,7.5,0.29386,8,0.33308,8.5,0.33308,9,0.33308,9.5,0.33308,10,0.33308,10.5,0.33308,11,0.33308,11.5,0.33308,12,0.33308,12.5,0.33308,13,0.33308,13.5,0.33308,14,0.33308,14.5,0.33308,15,0.33308,15.5,0.33308,16,0.33308,16.5,0.33308,17,0.33308,17.5,0.33308,18,0.33308,18.5,0.33308,19,0.33308,19.5,0.33308,20,0.33308,20.5,0.33308,21,0.33308,21.5,0.33308,22,0.33308,22.5,0.33308,23,0.33308,23.5,0.33308,24,0.33308,24.5,0.33308,25,0.33308,25.5,0.33308,26,0.33308,26.5,0.33308,27,0.33308,27.5,0.33308,28,0.33308,28.5,0.33308,29,0.33308,29.5,0.33308,30,0.33308)}
.func RTJ(Tj) {table(Tj,25,0.0066794,35,0.006878,45,0.0071097,55,0.0073743,65,0.0076719,75,0.0080026,85,0.0083663,95,0.008763,105,0.0091926,115,0.0096553,125,0.010151,135,0.01068,145,0.011241,155,0.011836,165,0.012464,175,0.013125,275,0.019732,375,0.02634,475,0.032947,575,0.039554,675,0.046162,775,0.052769,875,0.059377,975,0.065984,1075,0.072592,1175,0.079199,1275,0.085806,1375,0.092414,1475,0.099021,1575,0.10563,1675,0.11224,1775,0.11884,1875,0.12545,1975,0.13206)}
.func VthFwd(Tj) {table(Tj,25,-0.087925,35,-0.12812,45,-0.1515,55,-0.15809,65,-0.14787,75,-0.12084,85,-0.077008,95,-0.016372,105,0.061069,115,0.15531,125,0.26636,135,0.39422,145,0.53888,155,0.70034,165,0.87861,175,1.0737,275,3.0244,375,4.9752,475,6,575,6,675,6,775,6,875,6,975,6,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.48379,-4,0.46025,-3,0.42426,-2,0.37413,-1,0.31383,0,0.25618,1,0.21025,2,0.16742,3,0.1327,4,0.11047,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.0067378,-4,0.0070461,-3,0.0079811,-2,0.0095993,-1,0.01153,0,0.012764,1,0.012839,2,0.012839,3,0.012839,4,0.012839,5,0.012878,6,0.012939,7,0.013866,8,0.014787,9,0.014979,10,0.015695,11,0.017168,12,0.018182,13,0.018982,14,0.019692,15,0.019981,16,0.019981,17,0.021992,18,0.023856)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,25,0.88596,35,0.88986,45,0.89675,55,0.90661,65,0.91944,75,0.93526,85,0.95405,95,0.97581,105,1.0006,115,1.0283,125,1.059,135,1.0926,145,1.1293,155,1.1689,165,1.2115,175,1.2571,275,1.7129,375,2.1686,475,2.6244,575,3.0802,675,3.536,775,3.9917,875,4.4475,975,4.9033,1075,5.3591,1175,5.8148,1275,6.2706,1375,6.7264,1475,7.1822,1575,7.6379,1675,8.0937,1775,8.5495,1875,9.0053,1975,9.461)}
.func nscal(Tj) {table(Tj,25,1.0761,35,1.0672,45,1.0579,55,1.0483,65,1.0383,75,1.0279,85,1.0171,95,1.006,105,0.99449,115,0.98261,125,0.97035,135,0.95771,145,0.9447,155,0.93132,165,0.91755,175,0.90342,275,0.76205,375,0.62069,475,0.47933,575,0.33796,675,0.2,775,0.2,875,0.2,975,0.2,1075,0.2,1175,0.2,1275,0.2,1375,0.2,1475,0.2,1575,0.2,1675,0.2,1775,0.2,1875,0.2,1975,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.009,6.150,0.013,6.149,0.017,6.145,0.023,6.144,0.030,6.137,0.041,6.119,0.054,6.104,0.073,6.087,0.097,6.053,0.130,6.028,0.174,5.980,0.233,5.932,0.311,5.862,0.416,5.775,0.557,5.669,0.744,5.534,0.996,5.375,1.331,5.180,1.781,4.959,2.382,4.704,3.185,4.421,4.260,4.113,5.697,3.792,7.620,3.465,10.191,3.135,13.630,2.662,18.229,2.298,24.380,1.974,32.607,1.638,43.609,1.317,58.324,1.060,78.004,0.884,104.325,0.748,139.528,0.639,186.608,0.550,249.575,0.476,333.789,0.413,446.420,0.361,597.055,0.344,798.518,0.341)}

.func Cdg(V) {table(V,0.009,3.007,0.013,3.002,0.017,3.000,0.023,2.996,0.030,2.982,0.041,2.961,0.054,2.926,0.073,2.902,0.097,2.843,0.130,2.788,0.174,2.698,0.233,2.600,0.311,2.464,0.416,2.289,0.557,2.088,0.744,1.875,0.996,1.686,1.331,1.511,1.781,1.338,2.382,1.163,3.185,0.998,4.260,0.847,5.697,0.705,7.620,0.569,10.191,0.434,13.630,0.190,18.229,0.112,24.380,0.093,32.607,0.079,43.609,0.062,58.324,0.047,78.004,0.039,104.325,0.034,139.528,0.030,186.608,0.026,249.575,0.023,333.789,0.021,446.420,0.018,597.055,0.018,798.518,0.019)}

.func Cgs(V) {table(V,-4.970,4.778,-4.282,3.398,-3.593,3.349,-2.905,3.403,-2.217,3.525,-1.529,3.718,-0.840,4.074,-0.152,4.991,0.536,5.964,1.224,6.696,1.913,7.045,2.601,7.203,3.289,7.286,3.978,7.338,4.666,7.374,5.354,7.400,6.042,7.421,6.731,7.438,7.419,7.451,8.107,7.463,8.796,7.474,9.484,7.483,10.172,7.492,10.860,7.500,11.549,7.507,12.237,7.513,12.925,7.520,13.613,7.526,14.302,7.531,14.990,7.537)}


.ENDS 12

.SUBCKT 13 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {min((1+TM(V(Tj))/tau(V(Tj)))*Is*tau(V(Tj))*(-1+exp(max(V(S,d2),-1n)/(nscal(V(Tj))*nn(V(G,S))))),1e6)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,1.1111e-15,0.5,6.9025e-13,1,4.288e-10,1.5,2.6638e-07,2,0.00016548,2.5,0.1028,3,0.61161,3.5,1.8645,4,4.6944,4.5,9.6407,5,17,5.5,27.4274,6,41.7934,6.5,58.969,7,77.6614,7.5,101.6296,8,130.0774,8.5,164.2441,9,207.7665,9.5,249.8493,10,283.5178,10.5,302.7264,11,321.8623,11.5,343.7897,12,373.7928,12.5,413.828,13,418.498,13.5,440.8655,14,473.7169,14.5,483.4337,15,617.2347,15.5,723.0496,16,1336.8199,16.5,1390.7418,17,1400.0233,17.5,1411.7822,18,1426.9848,18.5,1446.7792,19,1472.5849,19.5,1506.228,20,1550.1506,20.5,1607.7503,21,1683.9572,21.5,1786.269,22,1926.7379,22.5,2126.1184,23,2423.5233,23.5,2990.0911,24,4282.2316,24.5,7284.3555,25,23201.2263,25.5,5.336278464510927e+16,26,5.336278464510927e+16,26.5,5.336278464510927e+16,27,5.336278464510927e+16,27.5,5.336278464510927e+16,28,5.336278464510927e+16,28.5,5.336278464510927e+16,29,5.336278464510927e+16,29.5,5.336278464510927e+16,30,5.336278464510927e+16)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,0.69782,4.5,0.52295,5,0.53072,5.5,0.51326,6,0.46577,6.5,0.45221,7,0.4632,7.5,0.44645,8,0.42585,8.5,0.40382,9,0.35677,9.5,0.339,10,0.3479,10.5,0.38269,11,0.4112,11.5,0.43854,12,0.44864,12.5,0.44624,13,0.49087,13.5,0.51685,14,0.52309,14.5,0.55907,15,0.46997,15.5,0.42669,16,0.24419,16.5,0.26861,17,0.29547,17.5,0.32502,18,0.35752,18.5,0.39327,19,0.4326,19.5,0.47586,20,0.52345,20.5,0.57579,21,0.63337,21.5,0.69671,22,0.76638,22.5,0.84302,23,0.92732,23.5,0.99,24,0.99,24.5,0.99,25,0.93741,25.5,0.85929,26,0.85903,26.5,0.85903,27,0.85903,27.5,0.85903,28,0.85899,28.5,0.85899,29,0.85899,29.5,0.85899,30,0.85899)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0.0014508,3,0.0046688,3.5,0.011142,4,0.020684,4.5,0.03417,5,0.054369,5.5,0.078862,6,0.10391,6.5,0.14519,7,0.2319,7.5,0.29386,8,0.33308,8.5,0.33308,9,0.33308,9.5,0.33308,10,0.33308,10.5,0.33308,11,0.33308,11.5,0.33308,12,0.33308,12.5,0.33308,13,0.33308,13.5,0.33308,14,0.33308,14.5,0.33308,15,0.33308,15.5,0.33308,16,0.33308,16.5,0.33308,17,0.33308,17.5,0.33308,18,0.33308,18.5,0.33308,19,0.33308,19.5,0.33308,20,0.33308,20.5,0.33308,21,0.33308,21.5,0.33308,22,0.33308,22.5,0.33308,23,0.33308,23.5,0.33308,24,0.33308,24.5,0.33308,25,0.33308,25.5,0.33308,26,0.33308,26.5,0.33308,27,0.33308,27.5,0.33308,28,0.33308,28.5,0.33308,29,0.33308,29.5,0.33308,30,0.33308)}
.func RTJ(Tj) {table(Tj,25,0.0066794,35,0.006878,45,0.0071097,55,0.0073743,65,0.0076719,75,0.0080026,85,0.0083663,95,0.008763,105,0.0091926,115,0.0096553,125,0.010151,135,0.01068,145,0.011241,155,0.011836,165,0.012464,175,0.013125,275,0.019732,375,0.02634,475,0.032947,575,0.039554,675,0.046162,775,0.052769,875,0.059377,975,0.065984,1075,0.072592,1175,0.079199,1275,0.085806,1375,0.092414,1475,0.099021,1575,0.10563,1675,0.11224,1775,0.11884,1875,0.12545,1975,0.13206)}
.func VthFwd(Tj) {table(Tj,25,-0.087925,35,-0.12812,45,-0.1515,55,-0.15809,65,-0.14787,75,-0.12084,85,-0.077008,95,-0.016372,105,0.061069,115,0.15531,125,0.26636,135,0.39422,145,0.53888,155,0.70034,165,0.87861,175,1.0737,275,3.0244,375,4.9752,475,6,575,6,675,6,775,6,875,6,975,6,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.48379,-4,0.46025,-3,0.42426,-2,0.37413,-1,0.31383,0,0.25618,1,0.21025,2,0.16742,3,0.1327,4,0.11047,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.0067378,-4,0.0070461,-3,0.0079811,-2,0.0095993,-1,0.01153,0,0.012764,1,0.012839,2,0.012839,3,0.012839,4,0.012839,5,0.012878,6,0.012939,7,0.013866,8,0.014787,9,0.014979,10,0.015695,11,0.017168,12,0.018182,13,0.018982,14,0.019692,15,0.019981,16,0.019981,17,0.021992,18,0.023856)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,25,0.88596,35,0.88986,45,0.89675,55,0.90661,65,0.91944,75,0.93526,85,0.95405,95,0.97581,105,1.0006,115,1.0283,125,1.059,135,1.0926,145,1.1293,155,1.1689,165,1.2115,175,1.2571,275,1.7129,375,2.1686,475,2.6244,575,3.0802,675,3.536,775,3.9917,875,4.4475,975,4.9033,1075,5.3591,1175,5.8148,1275,6.2706,1375,6.7264,1475,7.1822,1575,7.6379,1675,8.0937,1775,8.5495,1875,9.0053,1975,9.461)}
.func nscal(Tj) {table(Tj,25,1.0761,35,1.0672,45,1.0579,55,1.0483,65,1.0383,75,1.0279,85,1.0171,95,1.006,105,0.99449,115,0.98261,125,0.97035,135,0.95771,145,0.9447,155,0.93132,165,0.91755,175,0.90342,275,0.76205,375,0.62069,475,0.47933,575,0.33796,675,0.2,775,0.2,875,0.2,975,0.2,1075,0.2,1175,0.2,1275,0.2,1375,0.2,1475,0.2,1575,0.2,1675,0.2,1775,0.2,1875,0.2,1975,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.009,6.150,0.013,6.149,0.017,6.145,0.023,6.144,0.030,6.137,0.041,6.119,0.054,6.104,0.073,6.087,0.097,6.053,0.130,6.028,0.174,5.980,0.233,5.932,0.311,5.862,0.416,5.775,0.557,5.669,0.744,5.534,0.996,5.375,1.331,5.180,1.781,4.959,2.382,4.704,3.185,4.421,4.260,4.113,5.697,3.792,7.620,3.465,10.191,3.135,13.630,2.662,18.229,2.298,24.380,1.974,32.607,1.638,43.609,1.317,58.324,1.060,78.004,0.884,104.325,0.748,139.528,0.639,186.608,0.550,249.575,0.476,333.789,0.413,446.420,0.361,597.055,0.344,798.518,0.341)}

.func Cdg(V) {table(V,0.009,3.007,0.013,3.002,0.017,3.000,0.023,2.996,0.030,2.982,0.041,2.961,0.054,2.926,0.073,2.902,0.097,2.843,0.130,2.788,0.174,2.698,0.233,2.600,0.311,2.464,0.416,2.289,0.557,2.088,0.744,1.875,0.996,1.686,1.331,1.511,1.781,1.338,2.382,1.163,3.185,0.998,4.260,0.847,5.697,0.705,7.620,0.569,10.191,0.434,13.630,0.190,18.229,0.112,24.380,0.093,32.607,0.079,43.609,0.062,58.324,0.047,78.004,0.039,104.325,0.034,139.528,0.030,186.608,0.026,249.575,0.023,333.789,0.021,446.420,0.018,597.055,0.018,798.518,0.019)}

.func Cgs(V) {table(V,-4.970,4.778,-4.282,3.398,-3.593,3.349,-2.905,3.403,-2.217,3.525,-1.529,3.718,-0.840,4.074,-0.152,4.991,0.536,5.964,1.224,6.696,1.913,7.045,2.601,7.203,3.289,7.286,3.978,7.338,4.666,7.374,5.354,7.400,6.042,7.421,6.731,7.438,7.419,7.451,8.107,7.463,8.796,7.474,9.484,7.483,10.172,7.492,10.860,7.500,11.549,7.507,12.237,7.513,12.925,7.520,13.613,7.526,14.302,7.531,14.990,7.537)}


.ENDS 13

.SUBCKT 21 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,4.8588e-14,1,2.833e-12,1.5,1.6518e-10,2,9.631e-09,2.5,5.6155e-07,3,3.2742e-05,3.5,0.001909,4,0.11131,4.5,0.36105,5,0.88443,5.5,1.8087,6,3.4789,6.5,5.9418,7,9.6552,7.5,14.2355,8,20.4327,8.5,28.369,9,38.6928,9.5,50.4938,10,64.1988,10.5,78.224,11,94.996,11.5,110.1662,12,123.6142,12.5,144.9516,13,163.9077,13.5,186.1668,14,207.5764,14.5,222.4819,15,237.6331,15.5,237.6331,16,241.0492,16.5,246.9107,17,252.2662,17.5,257.0282,18,260.6195,18.5,264.817,19,264.817,19.5,264.817,20,264.817,20.5,273.088,21,278.8618,21.5,284.4649,22,289.9063,22.5,295.1941,23,300.336,23.5,305.3391,24,310.21,24.5,314.9547,25,319.5791,25.5,324.0886,26,328.4882,26.5,332.7825,27,336.9761,27.5,341.0731,28,345.0775,28.5,348.993,29,352.8229,29.5,356.5707,30,360.2395)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,1,5.5,1,6,0.60134,6.5,0.52714,7,0.44689,7.5,0.4176,8,0.37475,8.5,0.33219,9,0.28803,9.5,0.25728,10,0.23089,10.5,0.21757,11,0.19703,11.5,0.18743,12,0.17872,12.5,0.16013,13,0.14663,13.5,0.133,14,0.12273,14.5,0.11952,15,0.11596,15.5,0.12347,16,0.12722,16.5,0.12883,17,0.1297,17.5,0.13088,18,0.13263,18.5,0.13335,19,0.13634,19.5,0.1396,20,0.14324,20.5,0.14925,21,0.14962,21.5,0.14999,22,0.15036,22.5,0.15071,23,0.15106,23.5,0.15141,24,0.15174,24.5,0.15208,25,0.1524,25.5,0.15273,26,0.15304,26.5,0.15335,27,0.15366,27.5,0.15396,28,0.15426,28.5,0.15455,29,0.15484,29.5,0.15512,30,0.1554)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0,3.5,0,4,0.00052206,4.5,0.0015842,5,0.002979,5.5,0.0057873,6,0.0089817,6.5,0.013268,7,0.016926,7.5,0.028284,8,0.040176,8.5,0.052854,9,0.055625,9.5,0.070249,10,0.077333,10.5,0.081262,11,0.081262,11.5,0.11691,12,0.4214,12.5,0.44814,13,0.62905,13.5,0.63171,14,0.64871,14.5,0.6489,15,0.65006,15.5,0.65006,16,0.65006,16.5,0.65006,17,0.65006,17.5,0.65006,18,0.65006,18.5,0.65006,19,0.65006,19.5,0.65006,20,0.65006,20.5,0.65006,21,0.65006,21.5,0.65006,22,0.65006,22.5,0.65006,23,0.65006,23.5,0.65006,24,0.65006,24.5,0.65006,25,0.65006,25.5,0.65006,26,0.65006,26.5,0.65006,27,0.65006,27.5,0.65006,28,0.65006,28.5,0.65006,29,0.65006,29.5,0.65006,30,0.65006)}
.func RTJ(Tj) {table(Tj,25,0.0027475,35,0.0038949,45,0.0051286,55,0.0064483,65,0.0078543,75,0.0093464,85,0.010925,95,0.012589,105,0.01434,115,0.016177,125,0.018099,135,0.020109,145,0.022204,155,0.024385,165,0.026653,175,0.029007,275,0.052544,375,0.076082,475,0.09962,575,0.12316,675,0.1467,775,0.17023,875,0.19377,975,0.21731,1075,0.24085,1175,0.26438,1275,0.28792,1375,0.31146,1475,0.335,1575,0.35853,1675,0.38207,1775,0.40561,1875,0.42915,1975,0.45269)}
.func VthFwd(Tj) {table(Tj,25,3.3307e-16,35,0.34923,45,0.67516,55,0.97778,65,1.2571,75,1.5131,85,1.7458,95,1.9553,105,2.1414,115,2.3042,125,2.4437,135,2.5599,145,2.6528,155,2.7224,165,2.7687,175,2.7917,275,3.0217,375,3.2517,475,3.4817,575,3.7117,675,3.9417,775,4.1717,875,4.4017,975,4.6317,1075,4.8617,1175,5.0917,1275,5.3217,1375,5.5517,1475,5.7817,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.param Is=10.00u

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.012,2.241,0.016,2.240,0.022,2.233,0.029,2.241,0.039,2.238,0.052,2.233,0.071,2.227,0.095,2.218,0.127,2.190,0.171,2.193,0.230,2.158,0.308,2.151,0.414,2.120,0.557,2.074,0.748,2.032,1.004,1.971,1.349,1.897,1.813,1.808,2.435,1.711,3.271,1.602,4.394,1.483,5.903,1.358,7.929,1.224,10.652,1.013,14.309,0.864,19.221,0.746,25.820,0.636,34.685,0.535,46.594,0.455,62.592,0.391,84.081,0.337,112.949,0.292,151.729,0.253,203.822,0.220,273.801,0.192,367.807,0.167,494.087,0.146,663.724,0.128,891.603,0.115,1197.720,0.104)}

.func Cdg(V) {table(V,0.012,1.514,0.016,1.517,0.022,1.512,0.029,1.494,0.039,1.484,0.052,1.470,0.071,1.447,0.095,1.417,0.127,1.387,0.171,1.329,0.230,1.272,0.308,1.182,0.414,1.085,0.557,0.986,0.748,0.889,1.004,0.802,1.349,0.715,1.813,0.626,2.435,0.537,3.271,0.454,4.394,0.377,5.903,0.302,7.929,0.229,10.652,0.100,14.309,0.060,19.221,0.051,25.820,0.043,34.685,0.036,46.594,0.030,62.592,0.026,84.081,0.023,112.949,0.021,151.729,0.019,203.822,0.017,273.801,0.015,367.807,0.014,494.087,0.012,663.724,0.011,891.603,0.010,1197.720,0.010)}

.func Cgs(V) {table(V,-4.960,3.767,-4.271,2.639,-3.581,2.318,-2.892,2.337,-2.203,2.387,-1.513,2.480,-0.824,2.632,-0.135,3.109,0.554,3.662,1.244,4.021,1.933,4.288,2.622,4.432,3.312,4.496,4.001,4.534,4.690,4.559,5.380,4.576,6.069,4.590,6.758,4.601,7.448,4.609,8.137,4.617,8.826,4.624,9.516,4.631,10.205,4.636,10.894,4.641,11.583,4.646,12.273,4.650,12.962,4.655,13.651,4.658,14.341,4.661,15.030,4.666)}


.param Is_ideal=1.000000e-05
.param n_ideal=6.619285e-01
.param Rs_ideal=2.030844e-02
.ENDS 21

.SUBCKT 22 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*min(Is*(-1+exp(max(V(S,d2),-1n)/(nn(V(G,S))*nscal(V(Tj))))),1e5)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,4.8588e-14,1,2.833e-12,1.5,1.6518e-10,2,9.631e-09,2.5,5.6155e-07,3,3.2742e-05,3.5,0.001909,4,0.11131,4.5,0.36105,5,0.88443,5.5,1.8087,6,3.4789,6.5,5.9418,7,9.6552,7.5,14.2355,8,20.4327,8.5,28.369,9,38.6928,9.5,50.4938,10,64.1988,10.5,78.224,11,94.996,11.5,110.1662,12,123.6142,12.5,144.9516,13,163.9077,13.5,186.1668,14,207.5764,14.5,222.4819,15,237.6331,15.5,237.6331,16,241.0492,16.5,246.9107,17,252.2662,17.5,257.0282,18,260.6195,18.5,264.817,19,264.817,19.5,264.817,20,264.817,20.5,273.088,21,278.8618,21.5,284.4649,22,289.9063,22.5,295.1941,23,300.336,23.5,305.3391,24,310.21,24.5,314.9547,25,319.5791,25.5,324.0886,26,328.4882,26.5,332.7825,27,336.9761,27.5,341.0731,28,345.0775,28.5,348.993,29,352.8229,29.5,356.5707,30,360.2395)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,1,5.5,1,6,0.60134,6.5,0.52714,7,0.44689,7.5,0.4176,8,0.37475,8.5,0.33219,9,0.28803,9.5,0.25728,10,0.23089,10.5,0.21757,11,0.19703,11.5,0.18743,12,0.17872,12.5,0.16013,13,0.14663,13.5,0.133,14,0.12273,14.5,0.11952,15,0.11596,15.5,0.12347,16,0.12722,16.5,0.12883,17,0.1297,17.5,0.13088,18,0.13263,18.5,0.13335,19,0.13634,19.5,0.1396,20,0.14324,20.5,0.14925,21,0.14962,21.5,0.14999,22,0.15036,22.5,0.15071,23,0.15106,23.5,0.15141,24,0.15174,24.5,0.15208,25,0.1524,25.5,0.15273,26,0.15304,26.5,0.15335,27,0.15366,27.5,0.15396,28,0.15426,28.5,0.15455,29,0.15484,29.5,0.15512,30,0.1554)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0,3.5,0,4,0.00052206,4.5,0.0015842,5,0.002979,5.5,0.0057873,6,0.0089817,6.5,0.013268,7,0.016926,7.5,0.028284,8,0.040176,8.5,0.052854,9,0.055625,9.5,0.070249,10,0.077333,10.5,0.081262,11,0.081262,11.5,0.11691,12,0.4214,12.5,0.44814,13,0.62905,13.5,0.63171,14,0.64871,14.5,0.6489,15,0.65006,15.5,0.65006,16,0.65006,16.5,0.65006,17,0.65006,17.5,0.65006,18,0.65006,18.5,0.65006,19,0.65006,19.5,0.65006,20,0.65006,20.5,0.65006,21,0.65006,21.5,0.65006,22,0.65006,22.5,0.65006,23,0.65006,23.5,0.65006,24,0.65006,24.5,0.65006,25,0.65006,25.5,0.65006,26,0.65006,26.5,0.65006,27,0.65006,27.5,0.65006,28,0.65006,28.5,0.65006,29,0.65006,29.5,0.65006,30,0.65006)}
.func RTJ(Tj) {table(Tj,25,0.0027475,35,0.0038949,45,0.0051286,55,0.0064483,65,0.0078543,75,0.0093464,85,0.010925,95,0.012589,105,0.01434,115,0.016177,125,0.018099,135,0.020109,145,0.022204,155,0.024385,165,0.026653,175,0.029007,275,0.052544,375,0.076082,475,0.09962,575,0.12316,675,0.1467,775,0.17023,875,0.19377,975,0.21731,1075,0.24085,1175,0.26438,1275,0.28792,1375,0.31146,1475,0.335,1575,0.35853,1675,0.38207,1775,0.40561,1875,0.42915,1975,0.45269)}
.func VthFwd(Tj) {table(Tj,25,3.3307e-16,35,0.34923,45,0.67516,55,0.97778,65,1.2571,75,1.5131,85,1.7458,95,1.9553,105,2.1414,115,2.3042,125,2.4437,135,2.5599,145,2.6528,155,2.7224,165,2.7687,175,2.7917,275,3.0217,375,3.2517,475,3.4817,575,3.7117,675,3.9417,775,4.1717,875,4.4017,975,4.6317,1075,4.8617,1175,5.0917,1275,5.3217,1375,5.5517,1475,5.7817,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.66193,-4,0.6193,-3,0.56753,-2,0.50718,-1,0.43765,0,0.36336,1,0.29473,2,0.23758,3,0.18979,4,0.14776,5,0.11993,6,0.10188,7,0.10088,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1,19,0.1,20,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.020308,-4,0.021663,-3,0.023565,-2,0.025915,-1,0.028646,0,0.031432,1,0.033368,2,0.034094,3,0.034094,4,0.034094,5,0.034094,6,0.034094,7,0.034094,8,0.036088,9,0.038871,10,0.042942,11,0.04906,12,0.056784,13,0.060379,14,0.061426,15,0.066275,16,0.079765,17,0.089328,18,0.099201,19,0.10982,20,0.12748)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,25,1,35,1.0625,45,1.1286,55,1.1983,65,1.2717,75,1.3488,85,1.4294,95,1.5138,105,1.6017,115,1.6933,125,1.7886,135,1.8874,145,1.99,155,2.0961,165,2.2059,175,2.3194,275,3.4539,375,4.5883,475,5.7228,575,6.8573,675,7.9918,775,9.1263,875,10.2608,975,11.3952,1075,12.5297,1175,13.6642,1275,14.7987,1375,15.9332,1475,17.0676,1575,18.2021,1675,19.3366,1775,20.4711,1875,21.6056,1975,22.74)}
.func nscal(Tj) {table(Tj,25,1,35,0.96787,45,0.93536,55,0.90246,65,0.86918,75,0.83552,85,0.80147,95,0.76704,105,0.73222,115,0.69702,125,0.66144,135,0.62547,145,0.58912,155,0.55239,165,0.51527,175,0.47777,275,0.2,375,0.2,475,0.2,575,0.2,675,0.2,775,0.2,875,0.2,975,0.2,1075,0.2,1175,0.2,1275,0.2,1375,0.2,1475,0.2,1575,0.2,1675,0.2,1775,0.2,1875,0.2,1975,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.012,2.241,0.016,2.240,0.022,2.233,0.029,2.241,0.039,2.238,0.052,2.233,0.071,2.227,0.095,2.218,0.127,2.190,0.171,2.193,0.230,2.158,0.308,2.151,0.414,2.120,0.557,2.074,0.748,2.032,1.004,1.971,1.349,1.897,1.813,1.808,2.435,1.711,3.271,1.602,4.394,1.483,5.903,1.358,7.929,1.224,10.652,1.013,14.309,0.864,19.221,0.746,25.820,0.636,34.685,0.535,46.594,0.455,62.592,0.391,84.081,0.337,112.949,0.292,151.729,0.253,203.822,0.220,273.801,0.192,367.807,0.167,494.087,0.146,663.724,0.128,891.603,0.115,1197.720,0.104)}

.func Cdg(V) {table(V,0.012,1.514,0.016,1.517,0.022,1.512,0.029,1.494,0.039,1.484,0.052,1.470,0.071,1.447,0.095,1.417,0.127,1.387,0.171,1.329,0.230,1.272,0.308,1.182,0.414,1.085,0.557,0.986,0.748,0.889,1.004,0.802,1.349,0.715,1.813,0.626,2.435,0.537,3.271,0.454,4.394,0.377,5.903,0.302,7.929,0.229,10.652,0.100,14.309,0.060,19.221,0.051,25.820,0.043,34.685,0.036,46.594,0.030,62.592,0.026,84.081,0.023,112.949,0.021,151.729,0.019,203.822,0.017,273.801,0.015,367.807,0.014,494.087,0.012,663.724,0.011,891.603,0.010,1197.720,0.010)}

.func Cgs(V) {table(V,-4.960,3.767,-4.271,2.639,-3.581,2.318,-2.892,2.337,-2.203,2.387,-1.513,2.480,-0.824,2.632,-0.135,3.109,0.554,3.662,1.244,4.021,1.933,4.288,2.622,4.432,3.312,4.496,4.001,4.534,4.690,4.559,5.380,4.576,6.069,4.590,6.758,4.601,7.448,4.609,8.137,4.617,8.826,4.624,9.516,4.631,10.205,4.636,10.894,4.641,11.583,4.646,12.273,4.650,12.962,4.655,13.651,4.658,14.341,4.661,15.030,4.666)}


.ENDS 22

.SUBCKT 23 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {min((1+TM(V(Tj))/tau(V(Tj)))*Is*tau(V(Tj))*(-1+exp(max(V(S,d2),-1n)/(nscal(V(Tj))*nn(V(G,S))))),1e6)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,4.8588e-14,1,2.833e-12,1.5,1.6518e-10,2,9.631e-09,2.5,5.6155e-07,3,3.2742e-05,3.5,0.001909,4,0.11131,4.5,0.36105,5,0.88443,5.5,1.8087,6,3.4789,6.5,5.9418,7,9.6552,7.5,14.2355,8,20.4327,8.5,28.369,9,38.6928,9.5,50.4938,10,64.1988,10.5,78.224,11,94.996,11.5,110.1662,12,123.6142,12.5,144.9516,13,163.9077,13.5,186.1668,14,207.5764,14.5,222.4819,15,237.6331,15.5,237.6331,16,241.0492,16.5,246.9107,17,252.2662,17.5,257.0282,18,260.6195,18.5,264.817,19,264.817,19.5,264.817,20,264.817,20.5,273.088,21,278.8618,21.5,284.4649,22,289.9063,22.5,295.1941,23,300.336,23.5,305.3391,24,310.21,24.5,314.9547,25,319.5791,25.5,324.0886,26,328.4882,26.5,332.7825,27,336.9761,27.5,341.0731,28,345.0775,28.5,348.993,29,352.8229,29.5,356.5707,30,360.2395)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,1,5.5,1,6,0.60134,6.5,0.52714,7,0.44689,7.5,0.4176,8,0.37475,8.5,0.33219,9,0.28803,9.5,0.25728,10,0.23089,10.5,0.21757,11,0.19703,11.5,0.18743,12,0.17872,12.5,0.16013,13,0.14663,13.5,0.133,14,0.12273,14.5,0.11952,15,0.11596,15.5,0.12347,16,0.12722,16.5,0.12883,17,0.1297,17.5,0.13088,18,0.13263,18.5,0.13335,19,0.13634,19.5,0.1396,20,0.14324,20.5,0.14925,21,0.14962,21.5,0.14999,22,0.15036,22.5,0.15071,23,0.15106,23.5,0.15141,24,0.15174,24.5,0.15208,25,0.1524,25.5,0.15273,26,0.15304,26.5,0.15335,27,0.15366,27.5,0.15396,28,0.15426,28.5,0.15455,29,0.15484,29.5,0.15512,30,0.1554)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0,3.5,0,4,0.00052206,4.5,0.0015842,5,0.002979,5.5,0.0057873,6,0.0089817,6.5,0.013268,7,0.016926,7.5,0.028284,8,0.040176,8.5,0.052854,9,0.055625,9.5,0.070249,10,0.077333,10.5,0.081262,11,0.081262,11.5,0.11691,12,0.4214,12.5,0.44814,13,0.62905,13.5,0.63171,14,0.64871,14.5,0.6489,15,0.65006,15.5,0.65006,16,0.65006,16.5,0.65006,17,0.65006,17.5,0.65006,18,0.65006,18.5,0.65006,19,0.65006,19.5,0.65006,20,0.65006,20.5,0.65006,21,0.65006,21.5,0.65006,22,0.65006,22.5,0.65006,23,0.65006,23.5,0.65006,24,0.65006,24.5,0.65006,25,0.65006,25.5,0.65006,26,0.65006,26.5,0.65006,27,0.65006,27.5,0.65006,28,0.65006,28.5,0.65006,29,0.65006,29.5,0.65006,30,0.65006)}
.func RTJ(Tj) {table(Tj,25,0.0027475,35,0.0038949,45,0.0051286,55,0.0064483,65,0.0078543,75,0.0093464,85,0.010925,95,0.012589,105,0.01434,115,0.016177,125,0.018099,135,0.020109,145,0.022204,155,0.024385,165,0.026653,175,0.029007,275,0.052544,375,0.076082,475,0.09962,575,0.12316,675,0.1467,775,0.17023,875,0.19377,975,0.21731,1075,0.24085,1175,0.26438,1275,0.28792,1375,0.31146,1475,0.335,1575,0.35853,1675,0.38207,1775,0.40561,1875,0.42915,1975,0.45269)}
.func VthFwd(Tj) {table(Tj,25,3.3307e-16,35,0.34923,45,0.67516,55,0.97778,65,1.2571,75,1.5131,85,1.7458,95,1.9553,105,2.1414,115,2.3042,125,2.4437,135,2.5599,145,2.6528,155,2.7224,165,2.7687,175,2.7917,275,3.0217,375,3.2517,475,3.4817,575,3.7117,675,3.9417,775,4.1717,875,4.4017,975,4.6317,1075,4.8617,1175,5.0917,1275,5.3217,1375,5.5517,1475,5.7817,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.66193,-4,0.6193,-3,0.56753,-2,0.50718,-1,0.43765,0,0.36336,1,0.29473,2,0.23758,3,0.18979,4,0.14776,5,0.11993,6,0.10188,7,0.10088,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1,19,0.1,20,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.020308,-4,0.021663,-3,0.023565,-2,0.025915,-1,0.028646,0,0.031432,1,0.033368,2,0.034094,3,0.034094,4,0.034094,5,0.034094,6,0.034094,7,0.034094,8,0.036088,9,0.038871,10,0.042942,11,0.04906,12,0.056784,13,0.060379,14,0.061426,15,0.066275,16,0.079765,17,0.089328,18,0.099201,19,0.10982,20,0.12748)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,25,1,35,1.0625,45,1.1286,55,1.1983,65,1.2717,75,1.3488,85,1.4294,95,1.5138,105,1.6017,115,1.6933,125,1.7886,135,1.8874,145,1.99,155,2.0961,165,2.2059,175,2.3194,275,3.4539,375,4.5883,475,5.7228,575,6.8573,675,7.9918,775,9.1263,875,10.2608,975,11.3952,1075,12.5297,1175,13.6642,1275,14.7987,1375,15.9332,1475,17.0676,1575,18.2021,1675,19.3366,1775,20.4711,1875,21.6056,1975,22.74)}
.func nscal(Tj) {table(Tj,25,1,35,0.96787,45,0.93536,55,0.90246,65,0.86918,75,0.83552,85,0.80147,95,0.76704,105,0.73222,115,0.69702,125,0.66144,135,0.62547,145,0.58912,155,0.55239,165,0.51527,175,0.47777,275,0.2,375,0.2,475,0.2,575,0.2,675,0.2,775,0.2,875,0.2,975,0.2,1075,0.2,1175,0.2,1275,0.2,1375,0.2,1475,0.2,1575,0.2,1675,0.2,1775,0.2,1875,0.2,1975,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.012,2.241,0.016,2.240,0.022,2.233,0.029,2.241,0.039,2.238,0.052,2.233,0.071,2.227,0.095,2.218,0.127,2.190,0.171,2.193,0.230,2.158,0.308,2.151,0.414,2.120,0.557,2.074,0.748,2.032,1.004,1.971,1.349,1.897,1.813,1.808,2.435,1.711,3.271,1.602,4.394,1.483,5.903,1.358,7.929,1.224,10.652,1.013,14.309,0.864,19.221,0.746,25.820,0.636,34.685,0.535,46.594,0.455,62.592,0.391,84.081,0.337,112.949,0.292,151.729,0.253,203.822,0.220,273.801,0.192,367.807,0.167,494.087,0.146,663.724,0.128,891.603,0.115,1197.720,0.104)}

.func Cdg(V) {table(V,0.012,1.514,0.016,1.517,0.022,1.512,0.029,1.494,0.039,1.484,0.052,1.470,0.071,1.447,0.095,1.417,0.127,1.387,0.171,1.329,0.230,1.272,0.308,1.182,0.414,1.085,0.557,0.986,0.748,0.889,1.004,0.802,1.349,0.715,1.813,0.626,2.435,0.537,3.271,0.454,4.394,0.377,5.903,0.302,7.929,0.229,10.652,0.100,14.309,0.060,19.221,0.051,25.820,0.043,34.685,0.036,46.594,0.030,62.592,0.026,84.081,0.023,112.949,0.021,151.729,0.019,203.822,0.017,273.801,0.015,367.807,0.014,494.087,0.012,663.724,0.011,891.603,0.010,1197.720,0.010)}

.func Cgs(V) {table(V,-4.960,3.767,-4.271,2.639,-3.581,2.318,-2.892,2.337,-2.203,2.387,-1.513,2.480,-0.824,2.632,-0.135,3.109,0.554,3.662,1.244,4.021,1.933,4.288,2.622,4.432,3.312,4.496,4.001,4.534,4.690,4.559,5.380,4.576,6.069,4.590,6.758,4.601,7.448,4.609,8.137,4.617,8.826,4.624,9.516,4.631,10.205,4.636,10.894,4.641,11.583,4.646,12.273,4.650,12.962,4.655,13.651,4.658,14.341,4.661,15.030,4.666)}


.ENDS 23

.SUBCKT 31 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,5.0884e-14,1,3.107e-12,1.5,1.8971e-10,2,1.1584e-08,2.5,7.0732e-07,3,4.3189e-05,3.5,0.0026372,4,0.16103,4.5,0.47494,5,1.0994,5.5,2.1125,6,3.6757,6.5,5.9819,7,9.2273,7.5,13.5643,8,18.9174,8.5,25.4717,9,33.7397,9.5,43.4783,10,54.8881,10.5,67.4919,11,83.1251,11.5,95.3723,12,111.4427,12.5,122.0246,13,134.3316,13.5,151.1765,14,164.4688,14.5,175.6146,15,177.5089,15.5,185.6529,16,191.433,16.5,197.1283,17,197.1283,17.5,197.1283,18,197.9091,18.5,197.9091,19,197.9091,19.5,197.9091,20,197.9091,20.5,197.9091,21,197.9091,21.5,197.9091,22,197.9091,22.5,197.9091,23,197.9091,23.5,197.9091,24,197.9091,24.5,197.9091,25,197.9091,25.5,197.9091,26,197.9091,26.5,197.9091,27,197.9091,27.5,197.9091,28,197.9091,28.5,197.9091,29,197.9091,29.5,197.9091,30,197.9091)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,1,5.5,0.99,6,0.98755,6.5,0.88039,7,0.76811,7.5,0.66282,8,0.58363,8.5,0.51412,9,0.44091,9.5,0.38585,10,0.33866,10.5,0.30001,11,0.25488,11.5,0.24508,12,0.22241,12.5,0.21453,13,0.20209,13.5,0.18227,14,0.17355,14.5,0.16895,15,0.17976,15.5,0.17709,16,0.17805,16.5,0.17817,17,0.18418,17.5,0.19213,18,0.19708,18.5,0.098541,19,0.073904,19.5,0.073905,20,0.073905,20.5,0.073905,21,0.073905,21.5,0.073905,22,0.073905,22.5,0.073905,23,0.073905,23.5,0.073905,24,0.073905,24.5,0.073905,25,0.073905,25.5,0.073905,26,0.073905,26.5,0.073905,27,0.073905,27.5,0.073905,28,0.073906,28.5,0.073906,29,0.073906,29.5,0.073906,30,0.073906)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0,3.5,0,4,0.00042769,4.5,0.00078309,5,0.0010761,5.5,0.0020504,6,0.003687,6.5,0.0057208,7,0.0078724,7.5,0.010501,8,0.016707,8.5,0.024908,9,0.03043,9.5,0.035139,10,0.046117,10.5,0.053307,11,0.05879,11.5,0.11444,12,0.11444,12.5,0.38464,13,0.60165,13.5,0.69635,14,0.72254,14.5,0.73013,15,0.73196,15.5,0.73196,16,0.73196,16.5,0.73196,17,0.73196,17.5,0.73196,18,0.73196,18.5,0.73196,19,0.73196,19.5,0.73196,20,0.73196,20.5,0.73196,21,0.73196,21.5,0.73196,22,0.73196,22.5,0.73196,23,0.73196,23.5,0.73196,24,0.73196,24.5,0.73196,25,0.73196,25.5,0.73196,26,0.73196,26.5,0.73196,27,0.73196,27.5,0.73196,28,0.73196,28.5,0.73196,29,0.73196,29.5,0.73196,30,0.73196)}
.func RTJ(Tj) {table(Tj,25,0.001,35,0.001726,45,0.0026067,55,0.0036423,65,0.0048327,75,0.0061779,85,0.0076779,95,0.0093327,105,0.011142,115,0.013107,125,0.015226,135,0.0175,145,0.019929,155,0.022512,165,0.025251,175,0.028144,275,0.057076,375,0.086008,475,0.11494,575,0.14387,675,0.17281,775,0.20174,875,0.23067,975,0.2596,1075,0.28853,1175,0.31747,1275,0.3464,1375,0.37533,1475,0.40426,1575,0.4332,1675,0.46213,1775,0.49106,1875,0.51999,1975,0.54892)}
.func VthFwd(Tj) {table(Tj,25,-0.52125,35,-0.43881,45,-0.36059,55,-0.2866,65,-0.21685,75,-0.15133,85,-0.090034,95,-0.032973,105,0.019856,115,0.068455,125,0.11282,135,0.15296,145,0.18886,155,0.22054,165,0.24798,175,0.27119,275,0.5033,375,0.73542,475,0.96753,575,1.1996,675,1.4318,775,1.6639,875,1.896,975,2.1281,1075,2.3602,1175,2.5923,1275,2.8244,1375,3.0565,1475,3.2887,1575,3.5208,1675,3.7529,1775,3.985,1875,4.2171,1975,4.4492)}


*** Reverse Conduction Parameters ***
.param Is=10.00u

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.013,2.264,0.018,2.261,0.024,2.258,0.032,2.260,0.043,2.251,0.058,2.246,0.078,2.238,0.104,2.234,0.140,2.220,0.187,2.201,0.251,2.173,0.336,2.156,0.450,2.121,0.602,2.075,0.807,2.026,1.080,1.964,1.447,1.890,1.938,1.802,2.595,1.703,3.476,1.594,4.655,1.477,6.235,1.353,8.350,1.205,11.183,0.926,14.978,0.793,20.060,0.672,26.866,0.557,35.982,0.471,48.191,0.403,64.542,0.347,86.441,0.299,115.771,0.258,155.053,0.224,207.663,0.194,278.125,0.169,372.494,0.148,498.883,0.130,668.157,0.122,894.866,0.121,1198.499,0.120)}

.func Cdg(V) {table(V,0.013,1.043,0.018,1.043,0.024,1.038,0.032,1.028,0.043,1.023,0.058,1.011,0.078,0.995,0.104,0.973,0.140,0.947,0.187,0.912,0.251,0.870,0.336,0.814,0.450,0.754,0.602,0.696,0.807,0.639,1.080,0.582,1.447,0.524,1.938,0.464,2.595,0.404,3.476,0.348,4.655,0.294,6.235,0.241,8.350,0.184,11.183,0.044,14.978,0.036,20.060,0.030,26.866,0.023,35.982,0.020,48.191,0.017,64.542,0.015,86.441,0.014,115.771,0.013,155.053,0.011,207.663,0.010,278.125,0.009,372.494,0.009,498.883,0.008,668.157,0.008,894.866,0.008,1198.499,0.008)}

.func Cgs(V) {table(V,-10.070,4.424,-9.209,4.411,-8.349,4.389,-7.488,4.349,-6.627,4.265,-5.767,3.998,-4.906,3.154,-4.045,2.681,-3.184,2.694,-2.324,2.751,-1.463,2.837,-0.602,3.089,0.258,3.620,1.119,3.986,1.980,4.273,2.840,4.418,3.701,4.486,4.562,4.527,5.422,4.555,6.283,4.578,7.144,4.598,8.004,4.614,8.865,4.628,9.726,4.640,10.587,4.651,11.447,4.659,12.308,4.667,13.169,4.674,14.029,4.680,14.890,4.685)}


.param Is_ideal=1.000000e-05
.param n_ideal=6.080385e-01
.param Rs_ideal=1.664368e-02
.ENDS 31

.SUBCKT 32 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*min(Is*(-1+exp(max(V(S,d2),-1n)/(nn(V(G,S))*nscal(V(Tj))))),1e5)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,5.0884e-14,1,3.107e-12,1.5,1.8971e-10,2,1.1584e-08,2.5,7.0732e-07,3,4.3189e-05,3.5,0.0026372,4,0.16103,4.5,0.47494,5,1.0994,5.5,2.1125,6,3.6757,6.5,5.9819,7,9.2273,7.5,13.5643,8,18.9174,8.5,25.4717,9,33.7397,9.5,43.4783,10,54.8881,10.5,67.4919,11,83.1251,11.5,95.3723,12,111.4427,12.5,122.0246,13,134.3316,13.5,151.1765,14,164.4688,14.5,175.6146,15,177.5089,15.5,185.6529,16,191.433,16.5,197.1283,17,197.1283,17.5,197.1283,18,197.9091,18.5,197.9091,19,197.9091,19.5,197.9091,20,197.9091,20.5,197.9091,21,197.9091,21.5,197.9091,22,197.9091,22.5,197.9091,23,197.9091,23.5,197.9091,24,197.9091,24.5,197.9091,25,197.9091,25.5,197.9091,26,197.9091,26.5,197.9091,27,197.9091,27.5,197.9091,28,197.9091,28.5,197.9091,29,197.9091,29.5,197.9091,30,197.9091)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,1,5.5,0.99,6,0.98755,6.5,0.88039,7,0.76811,7.5,0.66282,8,0.58363,8.5,0.51412,9,0.44091,9.5,0.38585,10,0.33866,10.5,0.30001,11,0.25488,11.5,0.24508,12,0.22241,12.5,0.21453,13,0.20209,13.5,0.18227,14,0.17355,14.5,0.16895,15,0.17976,15.5,0.17709,16,0.17805,16.5,0.17817,17,0.18418,17.5,0.19213,18,0.19708,18.5,0.098541,19,0.073904,19.5,0.073905,20,0.073905,20.5,0.073905,21,0.073905,21.5,0.073905,22,0.073905,22.5,0.073905,23,0.073905,23.5,0.073905,24,0.073905,24.5,0.073905,25,0.073905,25.5,0.073905,26,0.073905,26.5,0.073905,27,0.073905,27.5,0.073905,28,0.073906,28.5,0.073906,29,0.073906,29.5,0.073906,30,0.073906)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0,3.5,0,4,0.00042769,4.5,0.00078309,5,0.0010761,5.5,0.0020504,6,0.003687,6.5,0.0057208,7,0.0078724,7.5,0.010501,8,0.016707,8.5,0.024908,9,0.03043,9.5,0.035139,10,0.046117,10.5,0.053307,11,0.05879,11.5,0.11444,12,0.11444,12.5,0.38464,13,0.60165,13.5,0.69635,14,0.72254,14.5,0.73013,15,0.73196,15.5,0.73196,16,0.73196,16.5,0.73196,17,0.73196,17.5,0.73196,18,0.73196,18.5,0.73196,19,0.73196,19.5,0.73196,20,0.73196,20.5,0.73196,21,0.73196,21.5,0.73196,22,0.73196,22.5,0.73196,23,0.73196,23.5,0.73196,24,0.73196,24.5,0.73196,25,0.73196,25.5,0.73196,26,0.73196,26.5,0.73196,27,0.73196,27.5,0.73196,28,0.73196,28.5,0.73196,29,0.73196,29.5,0.73196,30,0.73196)}
.func RTJ(Tj) {table(Tj,25,0.001,35,0.001726,45,0.0026067,55,0.0036423,65,0.0048327,75,0.0061779,85,0.0076779,95,0.0093327,105,0.011142,115,0.013107,125,0.015226,135,0.0175,145,0.019929,155,0.022512,165,0.025251,175,0.028144,275,0.057076,375,0.086008,475,0.11494,575,0.14387,675,0.17281,775,0.20174,875,0.23067,975,0.2596,1075,0.28853,1175,0.31747,1275,0.3464,1375,0.37533,1475,0.40426,1575,0.4332,1675,0.46213,1775,0.49106,1875,0.51999,1975,0.54892)}
.func VthFwd(Tj) {table(Tj,25,-0.52125,35,-0.43881,45,-0.36059,55,-0.2866,65,-0.21685,75,-0.15133,85,-0.090034,95,-0.032973,105,0.019856,115,0.068455,125,0.11282,135,0.15296,145,0.18886,155,0.22054,165,0.24798,175,0.27119,275,0.5033,375,0.73542,475,0.96753,575,1.1996,675,1.4318,775,1.6639,875,1.896,975,2.1281,1075,2.3602,1175,2.5923,1275,2.8244,1375,3.0565,1475,3.2887,1575,3.5208,1675,3.7529,1775,3.985,1875,4.2171,1975,4.4492)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.60804,-4,0.58001,-3,0.54411,-2,0.49998,-1,0.44931,0,0.39161,1,0.32922,2,0.26921,3,0.21452,4,0.16875,5,0.13584,6,0.11826,7,0.1082,8,0.10199,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.016644,-4,0.017769,-3,0.019722,-2,0.022509,-1,0.025888,0,0.029758,1,0.033894,2,0.037431,3,0.040172,4,0.042246,5,0.044905,6,0.050476,7,0.059164,8,0.070847,9,0.086525,10,0.10651,11,0.12144,12,0.1602,13,0.20485,14,0.22057,15,0.3646,16,0.55079,17,1.1675,18,10)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,25,0.64941,35,0.69296,45,0.7339,55,0.77222,65,0.80792,75,0.84101,85,0.87147,95,0.89931,105,0.92454,115,0.94715,125,0.96713,135,0.9845,145,0.99925,155,1.0114,165,1.0209,175,1.0278,275,1.0967,375,1.1657,475,1.2346,575,1.3035,675,1.3725,775,1.4414,875,1.5103,975,1.5793,1075,1.6482,1175,1.7171,1275,1.7861,1375,1.855,1475,1.924,1575,1.9929,1675,2.0618,1775,2.1308,1875,2.1997,1975,2.2686)}
.func nscal(Tj) {table(Tj,25,1.2235,35,1.1924,45,1.163,55,1.1354,65,1.1095,75,1.0853,85,1.0629,95,1.0423,105,1.0233,115,1.0062,125,0.99071,135,0.977,145,0.96504,155,0.95483,165,0.94635,175,0.93961,275,0.87226,375,0.80492,475,0.73757,575,0.67022,675,0.60287,775,0.53552,875,0.46817,975,0.40082,1075,0.33347,1175,0.26612,1275,0.2,1375,0.2,1475,0.2,1575,0.2,1675,0.2,1775,0.2,1875,0.2,1975,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.013,2.264,0.018,2.261,0.024,2.258,0.032,2.260,0.043,2.251,0.058,2.246,0.078,2.238,0.104,2.234,0.140,2.220,0.187,2.201,0.251,2.173,0.336,2.156,0.450,2.121,0.602,2.075,0.807,2.026,1.080,1.964,1.447,1.890,1.938,1.802,2.595,1.703,3.476,1.594,4.655,1.477,6.235,1.353,8.350,1.205,11.183,0.926,14.978,0.793,20.060,0.672,26.866,0.557,35.982,0.471,48.191,0.403,64.542,0.347,86.441,0.299,115.771,0.258,155.053,0.224,207.663,0.194,278.125,0.169,372.494,0.148,498.883,0.130,668.157,0.122,894.866,0.121,1198.499,0.120)}

.func Cdg(V) {table(V,0.013,1.043,0.018,1.043,0.024,1.038,0.032,1.028,0.043,1.023,0.058,1.011,0.078,0.995,0.104,0.973,0.140,0.947,0.187,0.912,0.251,0.870,0.336,0.814,0.450,0.754,0.602,0.696,0.807,0.639,1.080,0.582,1.447,0.524,1.938,0.464,2.595,0.404,3.476,0.348,4.655,0.294,6.235,0.241,8.350,0.184,11.183,0.044,14.978,0.036,20.060,0.030,26.866,0.023,35.982,0.020,48.191,0.017,64.542,0.015,86.441,0.014,115.771,0.013,155.053,0.011,207.663,0.010,278.125,0.009,372.494,0.009,498.883,0.008,668.157,0.008,894.866,0.008,1198.499,0.008)}

.func Cgs(V) {table(V,-10.070,4.424,-9.209,4.411,-8.349,4.389,-7.488,4.349,-6.627,4.265,-5.767,3.998,-4.906,3.154,-4.045,2.681,-3.184,2.694,-2.324,2.751,-1.463,2.837,-0.602,3.089,0.258,3.620,1.119,3.986,1.980,4.273,2.840,4.418,3.701,4.486,4.562,4.527,5.422,4.555,6.283,4.578,7.144,4.598,8.004,4.614,8.865,4.628,9.726,4.640,10.587,4.651,11.447,4.659,12.308,4.667,13.169,4.674,14.029,4.680,14.890,4.685)}


.ENDS 32

.SUBCKT 33 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {min((1+TM(V(Tj))/tau(V(Tj)))*Is*tau(V(Tj))*(-1+exp(max(V(S,d2),-1n)/(nscal(V(Tj))*nn(V(G,S))))),1e6)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,5.0884e-14,1,3.107e-12,1.5,1.8971e-10,2,1.1584e-08,2.5,7.0732e-07,3,4.3189e-05,3.5,0.0026372,4,0.16103,4.5,0.47494,5,1.0994,5.5,2.1125,6,3.6757,6.5,5.9819,7,9.2273,7.5,13.5643,8,18.9174,8.5,25.4717,9,33.7397,9.5,43.4783,10,54.8881,10.5,67.4919,11,83.1251,11.5,95.3723,12,111.4427,12.5,122.0246,13,134.3316,13.5,151.1765,14,164.4688,14.5,175.6146,15,177.5089,15.5,185.6529,16,191.433,16.5,197.1283,17,197.1283,17.5,197.1283,18,197.9091,18.5,197.9091,19,197.9091,19.5,197.9091,20,197.9091,20.5,197.9091,21,197.9091,21.5,197.9091,22,197.9091,22.5,197.9091,23,197.9091,23.5,197.9091,24,197.9091,24.5,197.9091,25,197.9091,25.5,197.9091,26,197.9091,26.5,197.9091,27,197.9091,27.5,197.9091,28,197.9091,28.5,197.9091,29,197.9091,29.5,197.9091,30,197.9091)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,1,5.5,0.99,6,0.98755,6.5,0.88039,7,0.76811,7.5,0.66282,8,0.58363,8.5,0.51412,9,0.44091,9.5,0.38585,10,0.33866,10.5,0.30001,11,0.25488,11.5,0.24508,12,0.22241,12.5,0.21453,13,0.20209,13.5,0.18227,14,0.17355,14.5,0.16895,15,0.17976,15.5,0.17709,16,0.17805,16.5,0.17817,17,0.18418,17.5,0.19213,18,0.19708,18.5,0.098541,19,0.073904,19.5,0.073905,20,0.073905,20.5,0.073905,21,0.073905,21.5,0.073905,22,0.073905,22.5,0.073905,23,0.073905,23.5,0.073905,24,0.073905,24.5,0.073905,25,0.073905,25.5,0.073905,26,0.073905,26.5,0.073905,27,0.073905,27.5,0.073905,28,0.073906,28.5,0.073906,29,0.073906,29.5,0.073906,30,0.073906)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0,3.5,0,4,0.00042769,4.5,0.00078309,5,0.0010761,5.5,0.0020504,6,0.003687,6.5,0.0057208,7,0.0078724,7.5,0.010501,8,0.016707,8.5,0.024908,9,0.03043,9.5,0.035139,10,0.046117,10.5,0.053307,11,0.05879,11.5,0.11444,12,0.11444,12.5,0.38464,13,0.60165,13.5,0.69635,14,0.72254,14.5,0.73013,15,0.73196,15.5,0.73196,16,0.73196,16.5,0.73196,17,0.73196,17.5,0.73196,18,0.73196,18.5,0.73196,19,0.73196,19.5,0.73196,20,0.73196,20.5,0.73196,21,0.73196,21.5,0.73196,22,0.73196,22.5,0.73196,23,0.73196,23.5,0.73196,24,0.73196,24.5,0.73196,25,0.73196,25.5,0.73196,26,0.73196,26.5,0.73196,27,0.73196,27.5,0.73196,28,0.73196,28.5,0.73196,29,0.73196,29.5,0.73196,30,0.73196)}
.func RTJ(Tj) {table(Tj,25,0.001,35,0.001726,45,0.0026067,55,0.0036423,65,0.0048327,75,0.0061779,85,0.0076779,95,0.0093327,105,0.011142,115,0.013107,125,0.015226,135,0.0175,145,0.019929,155,0.022512,165,0.025251,175,0.028144,275,0.057076,375,0.086008,475,0.11494,575,0.14387,675,0.17281,775,0.20174,875,0.23067,975,0.2596,1075,0.28853,1175,0.31747,1275,0.3464,1375,0.37533,1475,0.40426,1575,0.4332,1675,0.46213,1775,0.49106,1875,0.51999,1975,0.54892)}
.func VthFwd(Tj) {table(Tj,25,-0.52125,35,-0.43881,45,-0.36059,55,-0.2866,65,-0.21685,75,-0.15133,85,-0.090034,95,-0.032973,105,0.019856,115,0.068455,125,0.11282,135,0.15296,145,0.18886,155,0.22054,165,0.24798,175,0.27119,275,0.5033,375,0.73542,475,0.96753,575,1.1996,675,1.4318,775,1.6639,875,1.896,975,2.1281,1075,2.3602,1175,2.5923,1275,2.8244,1375,3.0565,1475,3.2887,1575,3.5208,1675,3.7529,1775,3.985,1875,4.2171,1975,4.4492)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.60804,-4,0.58001,-3,0.54411,-2,0.49998,-1,0.44931,0,0.39161,1,0.32922,2,0.26921,3,0.21452,4,0.16875,5,0.13584,6,0.11826,7,0.1082,8,0.10199,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.016644,-4,0.017769,-3,0.019722,-2,0.022509,-1,0.025888,0,0.029758,1,0.033894,2,0.037431,3,0.040172,4,0.042246,5,0.044905,6,0.050476,7,0.059164,8,0.070847,9,0.086525,10,0.10651,11,0.12144,12,0.1602,13,0.20485,14,0.22057,15,0.3646,16,0.55079,17,1.1675,18,10)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,25,0.64941,35,0.69296,45,0.7339,55,0.77222,65,0.80792,75,0.84101,85,0.87147,95,0.89931,105,0.92454,115,0.94715,125,0.96713,135,0.9845,145,0.99925,155,1.0114,165,1.0209,175,1.0278,275,1.0967,375,1.1657,475,1.2346,575,1.3035,675,1.3725,775,1.4414,875,1.5103,975,1.5793,1075,1.6482,1175,1.7171,1275,1.7861,1375,1.855,1475,1.924,1575,1.9929,1675,2.0618,1775,2.1308,1875,2.1997,1975,2.2686)}
.func nscal(Tj) {table(Tj,25,1.2235,35,1.1924,45,1.163,55,1.1354,65,1.1095,75,1.0853,85,1.0629,95,1.0423,105,1.0233,115,1.0062,125,0.99071,135,0.977,145,0.96504,155,0.95483,165,0.94635,175,0.93961,275,0.87226,375,0.80492,475,0.73757,575,0.67022,675,0.60287,775,0.53552,875,0.46817,975,0.40082,1075,0.33347,1175,0.26612,1275,0.2,1375,0.2,1475,0.2,1575,0.2,1675,0.2,1775,0.2,1875,0.2,1975,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.013,2.264,0.018,2.261,0.024,2.258,0.032,2.260,0.043,2.251,0.058,2.246,0.078,2.238,0.104,2.234,0.140,2.220,0.187,2.201,0.251,2.173,0.336,2.156,0.450,2.121,0.602,2.075,0.807,2.026,1.080,1.964,1.447,1.890,1.938,1.802,2.595,1.703,3.476,1.594,4.655,1.477,6.235,1.353,8.350,1.205,11.183,0.926,14.978,0.793,20.060,0.672,26.866,0.557,35.982,0.471,48.191,0.403,64.542,0.347,86.441,0.299,115.771,0.258,155.053,0.224,207.663,0.194,278.125,0.169,372.494,0.148,498.883,0.130,668.157,0.122,894.866,0.121,1198.499,0.120)}

.func Cdg(V) {table(V,0.013,1.043,0.018,1.043,0.024,1.038,0.032,1.028,0.043,1.023,0.058,1.011,0.078,0.995,0.104,0.973,0.140,0.947,0.187,0.912,0.251,0.870,0.336,0.814,0.450,0.754,0.602,0.696,0.807,0.639,1.080,0.582,1.447,0.524,1.938,0.464,2.595,0.404,3.476,0.348,4.655,0.294,6.235,0.241,8.350,0.184,11.183,0.044,14.978,0.036,20.060,0.030,26.866,0.023,35.982,0.020,48.191,0.017,64.542,0.015,86.441,0.014,115.771,0.013,155.053,0.011,207.663,0.010,278.125,0.009,372.494,0.009,498.883,0.008,668.157,0.008,894.866,0.008,1198.499,0.008)}

.func Cgs(V) {table(V,-10.070,4.424,-9.209,4.411,-8.349,4.389,-7.488,4.349,-6.627,4.265,-5.767,3.998,-4.906,3.154,-4.045,2.681,-3.184,2.694,-2.324,2.751,-1.463,2.837,-0.602,3.089,0.258,3.620,1.119,3.986,1.980,4.273,2.840,4.418,3.701,4.486,4.562,4.527,5.422,4.555,6.283,4.578,7.144,4.598,8.004,4.614,8.865,4.628,9.726,4.640,10.587,4.651,11.447,4.659,12.308,4.667,13.169,4.674,14.029,4.680,14.890,4.685)}


.ENDS 33

.SUBCKT 41 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,7.5688e-14,1,6.8745e-12,1.5,6.2438e-10,2,5.671e-08,2.5,5.1508e-06,3,0.00046782,3.5,0.042491,4,0.21414,4.5,0.66244,5,1.577,5.5,3.1539,6,5.5434,6.5,9.212,7,14.3664,7.5,21.0372,8,29.6637,8.5,40.2049,9,52.6348,9.5,68.0295,10,83.7462,10.5,100.7982,11,120.8591,11.5,144.9104,12,167.6518,12.5,195.1528,13,217.3266,13.5,237.4959,14,243.9569,14.5,256.7593,15,270.7084,15.5,270.7084,16,281.9391,16.5,287.2544,17,290.7022,17.5,301.6566,18,308.1727,18.5,321.1134,19,327.938,19.5,334.4847,20,340.7711,20.5,346.8134,21,352.6264,21.5,358.2236,22,363.6174,22.5,368.8194,23,373.8403,23.5,378.6897,24,383.3768,24.5,387.9101,25,392.2974,25.5,396.5459,26,400.6626,26.5,404.6538,27,408.5253,27.5,412.2829,28,415.9316,28.5,419.4763,29,422.9217,29.5,426.2721,30,429.5314)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,1,5.5,0.99,6,0.91843,6.5,0.8136,7,0.69788,7.5,0.62302,8,0.54343,8.5,0.48013,9,0.42748,9.5,0.36901,10,0.34407,10.5,0.31694,11,0.28661,11.5,0.25065,12,0.22765,12.5,0.20305,13,0.19103,13.5,0.18417,14,0.1923,14.5,0.19106,15,0.18762,15.5,0.19721,16,0.19417,16.5,0.19704,17,0.20053,17.5,0.19635,18,0.19567,18.5,0.2009,19,0.2038,19.5,0.20667,20,0.20952,20.5,0.21234,21,0.21515,21.5,0.21793,22,0.22069,22.5,0.22343,23,0.22615,23.5,0.22886,24,0.23154,24.5,0.23421,25,0.23687,25.5,0.2395,26,0.24212,26.5,0.24473,27,0.24732,27.5,0.24989,28,0.25246,28.5,0.25501,29,0.25754,29.5,0.26007,30,0.26258)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0,3.5,0.00039551,4,0.00040128,4.5,0.00093871,5,0.0019723,5.5,0.0038669,6,0.0065581,6.5,0.0098794,7,0.013158,7.5,0.020976,8,0.035685,8.5,0.049887,9,0.072595,9.5,0.081706,10,0.12689,10.5,0.20134,11,0.25612,11.5,0.26821,12,0.38098,12.5,0.38218,13,0.39289,13.5,0.39297,14,0.39371,14.5,0.39371,15,0.39376,15.5,0.39376,16,0.39376,16.5,0.39376,17,0.39376,17.5,0.39376,18,0.39376,18.5,0.39376,19,0.39376,19.5,0.39376,20,0.39376,20.5,0.39376,21,0.39376,21.5,0.39376,22,0.39376,22.5,0.39376,23,0.39376,23.5,0.39376,24,0.39376,24.5,0.39376,25,0.39376,25.5,0.39376,26,0.39376,26.5,0.39376,27,0.39376,27.5,0.39376,28,0.39376,28.5,0.39376,29,0.39376,29.5,0.39376,30,0.39376)}
.func RTJ(Tj) {table(Tj,25,0.001,35,0.0013461,45,0.0018236,55,0.0024324,65,0.0031726,75,0.0040442,85,0.005047,95,0.0061813,105,0.0074469,115,0.0088438,125,0.010372,135,0.012032,145,0.013823,155,0.015745,165,0.017799,175,0.019984,275,0.041834,375,0.063685,475,0.085536,575,0.10739,675,0.12924,775,0.15109,875,0.17294,975,0.19479,1075,0.21664,1175,0.23849,1275,0.26034,1375,0.28219,1475,0.30404,1575,0.32589,1675,0.34774,1775,0.36959,1875,0.39144,1975,0.41329)}
.func VthFwd(Tj) {table(Tj,25,-0.43529,35,-0.3801,45,-0.32412,55,-0.26737,65,-0.20984,75,-0.15152,85,-0.092428,95,-0.032551,105,0.028108,115,0.089547,125,0.15177,135,0.21477,145,0.27855,155,0.34312,165,0.40847,175,0.47459,275,1.1359,375,1.7971,475,2.4584,575,3.1197,675,3.781,775,4.4423,875,5.1035,975,5.7648,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.param Is=10.00u

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.014,3.106,0.019,3.111,0.025,3.107,0.034,3.104,0.045,3.096,0.060,3.088,0.080,3.082,0.108,3.064,0.144,3.052,0.192,3.029,0.258,3.000,0.345,2.961,0.461,2.923,0.617,2.864,0.826,2.797,1.105,2.710,1.478,2.610,1.978,2.491,2.646,2.354,3.541,2.206,4.738,2.043,6.340,1.862,8.483,1.650,11.351,1.332,15.189,1.091,20.323,0.926,27.194,0.767,36.387,0.650,48.687,0.557,65.146,0.480,87.170,0.414,116.638,0.359,156.068,0.311,208.828,0.269,279.424,0.234,373.885,0.203,500.280,0.178,669.403,0.170,895.699,0.168,1198.496,0.166)}

.func Cdg(V) {table(V,0.014,1.564,0.019,1.562,0.025,1.553,0.034,1.540,0.045,1.531,0.060,1.512,0.080,1.489,0.108,1.456,0.144,1.419,0.192,1.365,0.258,1.306,0.345,1.227,0.461,1.148,0.617,1.064,0.826,0.987,1.105,0.906,1.478,0.820,1.978,0.728,2.646,0.639,3.541,0.555,4.738,0.473,6.340,0.393,8.483,0.310,11.351,0.134,15.189,0.064,20.323,0.051,27.194,0.039,36.387,0.032,48.687,0.028,65.146,0.025,87.170,0.022,116.638,0.020,156.068,0.018,208.828,0.016,279.424,0.014,373.885,0.013,500.280,0.012,669.403,0.012,895.699,0.012,1198.496,0.012)}

.func Cgs(V) {table(V,-10.130,6.858,-9.268,6.840,-8.407,6.809,-7.545,6.758,-6.683,6.653,-5.821,6.387,-4.960,5.223,-4.098,4.249,-3.236,4.213,-2.374,4.294,-1.513,4.423,-0.651,4.775,0.211,5.603,1.072,6.157,1.934,6.540,2.796,6.762,3.658,6.858,4.519,6.906,5.381,6.938,6.243,6.960,7.104,6.978,7.966,6.992,8.828,7.005,9.690,7.016,10.551,7.026,11.413,7.036,12.275,7.045,13.137,7.053,13.998,7.060,14.860,7.067)}


.param Is_ideal=1.000000e-05
.param n_ideal=5.792848e-01
.param Rs_ideal=1.127583e-02
.ENDS 41

.SUBCKT 42 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*min(Is*(-1+exp(max(V(S,d2),-1n)/(nn(V(G,S))*nscal(V(Tj))))),1e5)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,7.5688e-14,1,6.8745e-12,1.5,6.2438e-10,2,5.671e-08,2.5,5.1508e-06,3,0.00046782,3.5,0.042491,4,0.21414,4.5,0.66244,5,1.577,5.5,3.1539,6,5.5434,6.5,9.212,7,14.3664,7.5,21.0372,8,29.6637,8.5,40.2049,9,52.6348,9.5,68.0295,10,83.7462,10.5,100.7982,11,120.8591,11.5,144.9104,12,167.6518,12.5,195.1528,13,217.3266,13.5,237.4959,14,243.9569,14.5,256.7593,15,270.7084,15.5,270.7084,16,281.9391,16.5,287.2544,17,290.7022,17.5,301.6566,18,308.1727,18.5,321.1134,19,327.938,19.5,334.4847,20,340.7711,20.5,346.8134,21,352.6264,21.5,358.2236,22,363.6174,22.5,368.8194,23,373.8403,23.5,378.6897,24,383.3768,24.5,387.9101,25,392.2974,25.5,396.5459,26,400.6626,26.5,404.6538,27,408.5253,27.5,412.2829,28,415.9316,28.5,419.4763,29,422.9217,29.5,426.2721,30,429.5314)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,1,5.5,0.99,6,0.91843,6.5,0.8136,7,0.69788,7.5,0.62302,8,0.54343,8.5,0.48013,9,0.42748,9.5,0.36901,10,0.34407,10.5,0.31694,11,0.28661,11.5,0.25065,12,0.22765,12.5,0.20305,13,0.19103,13.5,0.18417,14,0.1923,14.5,0.19106,15,0.18762,15.5,0.19721,16,0.19417,16.5,0.19704,17,0.20053,17.5,0.19635,18,0.19567,18.5,0.2009,19,0.2038,19.5,0.20667,20,0.20952,20.5,0.21234,21,0.21515,21.5,0.21793,22,0.22069,22.5,0.22343,23,0.22615,23.5,0.22886,24,0.23154,24.5,0.23421,25,0.23687,25.5,0.2395,26,0.24212,26.5,0.24473,27,0.24732,27.5,0.24989,28,0.25246,28.5,0.25501,29,0.25754,29.5,0.26007,30,0.26258)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0,3.5,0.00039551,4,0.00040128,4.5,0.00093871,5,0.0019723,5.5,0.0038669,6,0.0065581,6.5,0.0098794,7,0.013158,7.5,0.020976,8,0.035685,8.5,0.049887,9,0.072595,9.5,0.081706,10,0.12689,10.5,0.20134,11,0.25612,11.5,0.26821,12,0.38098,12.5,0.38218,13,0.39289,13.5,0.39297,14,0.39371,14.5,0.39371,15,0.39376,15.5,0.39376,16,0.39376,16.5,0.39376,17,0.39376,17.5,0.39376,18,0.39376,18.5,0.39376,19,0.39376,19.5,0.39376,20,0.39376,20.5,0.39376,21,0.39376,21.5,0.39376,22,0.39376,22.5,0.39376,23,0.39376,23.5,0.39376,24,0.39376,24.5,0.39376,25,0.39376,25.5,0.39376,26,0.39376,26.5,0.39376,27,0.39376,27.5,0.39376,28,0.39376,28.5,0.39376,29,0.39376,29.5,0.39376,30,0.39376)}
.func RTJ(Tj) {table(Tj,25,0.001,35,0.0013461,45,0.0018236,55,0.0024324,65,0.0031726,75,0.0040442,85,0.005047,95,0.0061813,105,0.0074469,115,0.0088438,125,0.010372,135,0.012032,145,0.013823,155,0.015745,165,0.017799,175,0.019984,275,0.041834,375,0.063685,475,0.085536,575,0.10739,675,0.12924,775,0.15109,875,0.17294,975,0.19479,1075,0.21664,1175,0.23849,1275,0.26034,1375,0.28219,1475,0.30404,1575,0.32589,1675,0.34774,1775,0.36959,1875,0.39144,1975,0.41329)}
.func VthFwd(Tj) {table(Tj,25,-0.43529,35,-0.3801,45,-0.32412,55,-0.26737,65,-0.20984,75,-0.15152,85,-0.092428,95,-0.032551,105,0.028108,115,0.089547,125,0.15177,135,0.21477,145,0.27855,155,0.34312,165,0.40847,175,0.47459,275,1.1359,375,1.7971,475,2.4584,575,3.1197,675,3.781,775,4.4423,875,5.1035,975,5.7648,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.57928,-4,0.54871,-3,0.5124,-2,0.46897,-1,0.41936,0,0.3636,1,0.30454,2,0.24685,3,0.19519,4,0.15084,5,0.11839,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.011276,-4,0.012135,-3,0.013471,-2,0.015314,-1,0.017566,0,0.020155,1,0.022789,2,0.02514,3,0.026877,4,0.028255,5,0.030047,6,0.033445,7,0.037657,8,0.045087,9,0.055926,10,0.071751,11,0.094268,12,0.10859,13,0.12545,14,0.19596,15,0.29458,16,0.58079,17,4.6068,18,10)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,25,0.71173,35,0.74289,45,0.77273,55,0.80124,65,0.82843,75,0.8543,85,0.87884,95,0.90207,105,0.92396,115,0.94454,125,0.9638,135,0.98173,145,0.99834,155,1.0136,165,1.0276,175,1.0402,275,1.1666,375,1.293,475,1.4195,575,1.5459,675,1.6723,775,1.7987,875,1.9251,975,2.0515,1075,2.1779,1175,2.3043,1275,2.4307,1375,2.5571,1475,2.6835,1575,2.8099,1675,2.9364,1775,3.0628,1875,3.1892,1975,3.3156)}
.func nscal(Tj) {table(Tj,25,1.1897,35,1.1659,45,1.1432,55,1.1215,65,1.1008,75,1.0811,85,1.0625,95,1.0448,105,1.0282,115,1.0126,125,0.99803,135,0.98446,145,0.97191,155,0.96039,165,0.94987,175,0.94038,275,0.84545,375,0.75052,475,0.65559,575,0.56066,675,0.46574,775,0.37081,875,0.27588,975,0.2,1075,0.2,1175,0.2,1275,0.2,1375,0.2,1475,0.2,1575,0.2,1675,0.2,1775,0.2,1875,0.2,1975,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.014,3.106,0.019,3.111,0.025,3.107,0.034,3.104,0.045,3.096,0.060,3.088,0.080,3.082,0.108,3.064,0.144,3.052,0.192,3.029,0.258,3.000,0.345,2.961,0.461,2.923,0.617,2.864,0.826,2.797,1.105,2.710,1.478,2.610,1.978,2.491,2.646,2.354,3.541,2.206,4.738,2.043,6.340,1.862,8.483,1.650,11.351,1.332,15.189,1.091,20.323,0.926,27.194,0.767,36.387,0.650,48.687,0.557,65.146,0.480,87.170,0.414,116.638,0.359,156.068,0.311,208.828,0.269,279.424,0.234,373.885,0.203,500.280,0.178,669.403,0.170,895.699,0.168,1198.496,0.166)}

.func Cdg(V) {table(V,0.014,1.564,0.019,1.562,0.025,1.553,0.034,1.540,0.045,1.531,0.060,1.512,0.080,1.489,0.108,1.456,0.144,1.419,0.192,1.365,0.258,1.306,0.345,1.227,0.461,1.148,0.617,1.064,0.826,0.987,1.105,0.906,1.478,0.820,1.978,0.728,2.646,0.639,3.541,0.555,4.738,0.473,6.340,0.393,8.483,0.310,11.351,0.134,15.189,0.064,20.323,0.051,27.194,0.039,36.387,0.032,48.687,0.028,65.146,0.025,87.170,0.022,116.638,0.020,156.068,0.018,208.828,0.016,279.424,0.014,373.885,0.013,500.280,0.012,669.403,0.012,895.699,0.012,1198.496,0.012)}

.func Cgs(V) {table(V,-10.130,6.858,-9.268,6.840,-8.407,6.809,-7.545,6.758,-6.683,6.653,-5.821,6.387,-4.960,5.223,-4.098,4.249,-3.236,4.213,-2.374,4.294,-1.513,4.423,-0.651,4.775,0.211,5.603,1.072,6.157,1.934,6.540,2.796,6.762,3.658,6.858,4.519,6.906,5.381,6.938,6.243,6.960,7.104,6.978,7.966,6.992,8.828,7.005,9.690,7.016,10.551,7.026,11.413,7.036,12.275,7.045,13.137,7.053,13.998,7.060,14.860,7.067)}


.ENDS 42

.SUBCKT 43 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {min((1+TM(V(Tj))/tau(V(Tj)))*Is*tau(V(Tj))*(-1+exp(max(V(S,d2),-1n)/(nscal(V(Tj))*nn(V(G,S))))),1e6)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,7.5688e-14,1,6.8745e-12,1.5,6.2438e-10,2,5.671e-08,2.5,5.1508e-06,3,0.00046782,3.5,0.042491,4,0.21414,4.5,0.66244,5,1.577,5.5,3.1539,6,5.5434,6.5,9.212,7,14.3664,7.5,21.0372,8,29.6637,8.5,40.2049,9,52.6348,9.5,68.0295,10,83.7462,10.5,100.7982,11,120.8591,11.5,144.9104,12,167.6518,12.5,195.1528,13,217.3266,13.5,237.4959,14,243.9569,14.5,256.7593,15,270.7084,15.5,270.7084,16,281.9391,16.5,287.2544,17,290.7022,17.5,301.6566,18,308.1727,18.5,321.1134,19,327.938,19.5,334.4847,20,340.7711,20.5,346.8134,21,352.6264,21.5,358.2236,22,363.6174,22.5,368.8194,23,373.8403,23.5,378.6897,24,383.3768,24.5,387.9101,25,392.2974,25.5,396.5459,26,400.6626,26.5,404.6538,27,408.5253,27.5,412.2829,28,415.9316,28.5,419.4763,29,422.9217,29.5,426.2721,30,429.5314)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,1,5.5,0.99,6,0.91843,6.5,0.8136,7,0.69788,7.5,0.62302,8,0.54343,8.5,0.48013,9,0.42748,9.5,0.36901,10,0.34407,10.5,0.31694,11,0.28661,11.5,0.25065,12,0.22765,12.5,0.20305,13,0.19103,13.5,0.18417,14,0.1923,14.5,0.19106,15,0.18762,15.5,0.19721,16,0.19417,16.5,0.19704,17,0.20053,17.5,0.19635,18,0.19567,18.5,0.2009,19,0.2038,19.5,0.20667,20,0.20952,20.5,0.21234,21,0.21515,21.5,0.21793,22,0.22069,22.5,0.22343,23,0.22615,23.5,0.22886,24,0.23154,24.5,0.23421,25,0.23687,25.5,0.2395,26,0.24212,26.5,0.24473,27,0.24732,27.5,0.24989,28,0.25246,28.5,0.25501,29,0.25754,29.5,0.26007,30,0.26258)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0,3.5,0.00039551,4,0.00040128,4.5,0.00093871,5,0.0019723,5.5,0.0038669,6,0.0065581,6.5,0.0098794,7,0.013158,7.5,0.020976,8,0.035685,8.5,0.049887,9,0.072595,9.5,0.081706,10,0.12689,10.5,0.20134,11,0.25612,11.5,0.26821,12,0.38098,12.5,0.38218,13,0.39289,13.5,0.39297,14,0.39371,14.5,0.39371,15,0.39376,15.5,0.39376,16,0.39376,16.5,0.39376,17,0.39376,17.5,0.39376,18,0.39376,18.5,0.39376,19,0.39376,19.5,0.39376,20,0.39376,20.5,0.39376,21,0.39376,21.5,0.39376,22,0.39376,22.5,0.39376,23,0.39376,23.5,0.39376,24,0.39376,24.5,0.39376,25,0.39376,25.5,0.39376,26,0.39376,26.5,0.39376,27,0.39376,27.5,0.39376,28,0.39376,28.5,0.39376,29,0.39376,29.5,0.39376,30,0.39376)}
.func RTJ(Tj) {table(Tj,25,0.001,35,0.0013461,45,0.0018236,55,0.0024324,65,0.0031726,75,0.0040442,85,0.005047,95,0.0061813,105,0.0074469,115,0.0088438,125,0.010372,135,0.012032,145,0.013823,155,0.015745,165,0.017799,175,0.019984,275,0.041834,375,0.063685,475,0.085536,575,0.10739,675,0.12924,775,0.15109,875,0.17294,975,0.19479,1075,0.21664,1175,0.23849,1275,0.26034,1375,0.28219,1475,0.30404,1575,0.32589,1675,0.34774,1775,0.36959,1875,0.39144,1975,0.41329)}
.func VthFwd(Tj) {table(Tj,25,-0.43529,35,-0.3801,45,-0.32412,55,-0.26737,65,-0.20984,75,-0.15152,85,-0.092428,95,-0.032551,105,0.028108,115,0.089547,125,0.15177,135,0.21477,145,0.27855,155,0.34312,165,0.40847,175,0.47459,275,1.1359,375,1.7971,475,2.4584,575,3.1197,675,3.781,775,4.4423,875,5.1035,975,5.7648,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.57928,-4,0.54871,-3,0.5124,-2,0.46897,-1,0.41936,0,0.3636,1,0.30454,2,0.24685,3,0.19519,4,0.15084,5,0.11839,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.011276,-4,0.012135,-3,0.013471,-2,0.015314,-1,0.017566,0,0.020155,1,0.022789,2,0.02514,3,0.026877,4,0.028255,5,0.030047,6,0.033445,7,0.037657,8,0.045087,9,0.055926,10,0.071751,11,0.094268,12,0.10859,13,0.12545,14,0.19596,15,0.29458,16,0.58079,17,4.6068,18,10)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,25,0.71173,35,0.74289,45,0.77273,55,0.80124,65,0.82843,75,0.8543,85,0.87884,95,0.90207,105,0.92396,115,0.94454,125,0.9638,135,0.98173,145,0.99834,155,1.0136,165,1.0276,175,1.0402,275,1.1666,375,1.293,475,1.4195,575,1.5459,675,1.6723,775,1.7987,875,1.9251,975,2.0515,1075,2.1779,1175,2.3043,1275,2.4307,1375,2.5571,1475,2.6835,1575,2.8099,1675,2.9364,1775,3.0628,1875,3.1892,1975,3.3156)}
.func nscal(Tj) {table(Tj,25,1.1897,35,1.1659,45,1.1432,55,1.1215,65,1.1008,75,1.0811,85,1.0625,95,1.0448,105,1.0282,115,1.0126,125,0.99803,135,0.98446,145,0.97191,155,0.96039,165,0.94987,175,0.94038,275,0.84545,375,0.75052,475,0.65559,575,0.56066,675,0.46574,775,0.37081,875,0.27588,975,0.2,1075,0.2,1175,0.2,1275,0.2,1375,0.2,1475,0.2,1575,0.2,1675,0.2,1775,0.2,1875,0.2,1975,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.014,3.106,0.019,3.111,0.025,3.107,0.034,3.104,0.045,3.096,0.060,3.088,0.080,3.082,0.108,3.064,0.144,3.052,0.192,3.029,0.258,3.000,0.345,2.961,0.461,2.923,0.617,2.864,0.826,2.797,1.105,2.710,1.478,2.610,1.978,2.491,2.646,2.354,3.541,2.206,4.738,2.043,6.340,1.862,8.483,1.650,11.351,1.332,15.189,1.091,20.323,0.926,27.194,0.767,36.387,0.650,48.687,0.557,65.146,0.480,87.170,0.414,116.638,0.359,156.068,0.311,208.828,0.269,279.424,0.234,373.885,0.203,500.280,0.178,669.403,0.170,895.699,0.168,1198.496,0.166)}

.func Cdg(V) {table(V,0.014,1.564,0.019,1.562,0.025,1.553,0.034,1.540,0.045,1.531,0.060,1.512,0.080,1.489,0.108,1.456,0.144,1.419,0.192,1.365,0.258,1.306,0.345,1.227,0.461,1.148,0.617,1.064,0.826,0.987,1.105,0.906,1.478,0.820,1.978,0.728,2.646,0.639,3.541,0.555,4.738,0.473,6.340,0.393,8.483,0.310,11.351,0.134,15.189,0.064,20.323,0.051,27.194,0.039,36.387,0.032,48.687,0.028,65.146,0.025,87.170,0.022,116.638,0.020,156.068,0.018,208.828,0.016,279.424,0.014,373.885,0.013,500.280,0.012,669.403,0.012,895.699,0.012,1198.496,0.012)}

.func Cgs(V) {table(V,-10.130,6.858,-9.268,6.840,-8.407,6.809,-7.545,6.758,-6.683,6.653,-5.821,6.387,-4.960,5.223,-4.098,4.249,-3.236,4.213,-2.374,4.294,-1.513,4.423,-0.651,4.775,0.211,5.603,1.072,6.157,1.934,6.540,2.796,6.762,3.658,6.858,4.519,6.906,5.381,6.938,6.243,6.960,7.104,6.978,7.966,6.992,8.828,7.005,9.690,7.016,10.551,7.026,11.413,7.036,12.275,7.045,13.137,7.053,13.998,7.060,14.860,7.067)}


.ENDS 43

.SUBCKT 51 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,5.8824e-16,0.5,1.2489e-13,1,2.6518e-11,1.5,5.6303e-09,2,1.1954e-06,2.5,0.00025382,3,0.05389,3.5,0.336,4,1.0588,4.5,2.5543,5,5.1851,5.5,9.4799,6,15.7724,6.5,24.3769,7,35.4894,7.5,50.0146,8,68.2275,8.5,89.3823,9,113.9537,9.5,142.6033,10,177.894,10.5,208.5998,11,240.4504,11.5,274.8366,12,293.8461,12.5,332.3837,13,346.6941,13.5,369.7084,14,388.4124,14.5,388.4124,15,404.3967,15.5,404.3967,16,404.3967,16.5,404.3967,17,404.3967,17.5,408.6566,18,409.14,18.5,428.1634,19,434.5979,19.5,440.6929,20,446.4746,20.5,451.9668,21,457.1908,21.5,462.1659,22,466.9097,22.5,471.438,23,475.7653,23.5,479.9048,24,483.8685,24.5,487.6676,25,491.3121,25.5,494.8115,26,498.1742,26.5,501.4082,27,504.5209,27.5,507.519,28,510.4087,28.5,513.196,29,515.8862,29.5,518.4843,30,520.9951)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,0.99,5,0.96296,5.5,0.7615,6,0.65745,6.5,0.57106,7,0.49765,7.5,0.42593,8,0.36259,8.5,0.31372,9,0.27167,9.5,0.23545,10,0.19688,10.5,0.18231,11,0.16672,11.5,0.15018,12,0.14252,12.5,0.12781,13,0.12868,13.5,0.12457,14,0.12188,14.5,0.12796,15,0.12514,15.5,0.12922,16,0.13246,16.5,0.13541,17,0.13838,17.5,0.13912,18,0.1412,18.5,0.14418,19,0.14523,19.5,0.14624,20,0.14721,20.5,0.14816,21,0.14907,21.5,0.14996,22,0.15081,22.5,0.15164,23,0.15244,23.5,0.15322,24,0.15398,24.5,0.15471,25,0.15543,25.5,0.15612,26,0.15679,26.5,0.15744,27,0.15808,27.5,0.1587,28,0.1593,28.5,0.15989,29,0.16046,29.5,0.16101,30,0.16156)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0.00038191,3.5,0.00083057,4,0.0020001,4.5,0.0039225,5,0.0079971,5.5,0.013631,6,0.021355,6.5,0.032633,7,0.052205,7.5,0.074716,8,0.097976,8.5,0.12498,9,0.15781,9.5,0.19053,10,0.20605,10.5,0.27361,11,0.44162,11.5,0.70407,12,1.6866,12.5,1.7534,13,1.9165,13.5,1.9216,14,1.9335,14.5,1.9338,15,1.9346,15.5,1.9346,16,1.9346,16.5,1.9346,17,1.9346,17.5,1.9346,18,1.9346,18.5,1.9346,19,1.9346,19.5,1.9346,20,1.9346,20.5,1.9346,21,1.9346,21.5,1.9346,22,1.9346,22.5,1.9346,23,1.9346,23.5,1.9346,24,1.9346,24.5,1.9346,25,1.9346,25.5,1.9346,26,1.9346,26.5,1.9346,27,1.9346,27.5,1.9346,28,1.9346,28.5,1.9346,29,1.9346,29.5,1.9346,30,1.9346)}
.func RTJ(Tj) {table(Tj,25,0.001,35,0.00094727,45,0.0010964,55,0.0014473,65,0.0020001,75,0.0027548,85,0.0037112,95,0.0048695,105,0.0062297,115,0.0077917,125,0.0095555,135,0.011521,145,0.013689,155,0.016058,165,0.018629,175,0.021402,275,0.049132,375,0.076863,475,0.10459,575,0.13232,675,0.16005,775,0.18778,875,0.21551,975,0.24324,1075,0.27097,1175,0.2987,1275,0.32643,1375,0.35417,1475,0.3819,1575,0.40963,1675,0.43736,1775,0.46509,1875,0.49282,1975,0.52055)}
.func VthFwd(Tj) {table(Tj,25,-0.051007,35,-0.063527,45,-0.070117,55,-0.070776,65,-0.065505,75,-0.054304,85,-0.037171,95,-0.014109,105,0.014884,115,0.049808,125,0.090662,135,0.13745,145,0.19016,155,0.24881,165,0.31338,175,0.38389,275,1.089,375,1.794,475,2.4991,575,3.2042,675,3.9092,775,4.6143,875,5.3194,975,6,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.param Is=10.00u

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.100,5.018,0.128,5.004,0.164,4.968,0.209,4.923,0.268,4.895,0.343,4.831,0.439,4.768,0.562,4.692,0.719,4.606,0.919,4.502,1.176,4.366,1.505,4.221,1.926,4.059,2.465,3.874,3.154,3.673,4.035,3.460,5.164,3.234,6.607,2.999,8.454,2.755,10.817,2.339,13.841,2.018,17.711,1.823,22.662,1.648,28.997,1.485,37.104,1.280,47.476,1.032,60.749,0.818,77.731,0.679,99.461,0.575,127.266,0.494,162.844,0.427,208.368,0.372,266.619,0.325,341.154,0.286,436.525,0.251,558.558,0.222,714.706,0.196,914.506,0.178,1170.161,0.177,1497.286,0.176)}

.func Cdg(V) {table(V,0.100,2.330,0.128,2.276,0.164,2.221,0.209,2.152,0.268,2.051,0.343,1.936,0.439,1.815,0.562,1.683,0.719,1.554,0.919,1.441,1.176,1.332,1.505,1.216,1.926,1.092,2.465,0.974,3.154,0.863,4.035,0.755,5.164,0.649,6.607,0.547,8.454,0.441,10.817,0.207,13.841,0.095,17.711,0.081,22.662,0.072,28.997,0.065,37.104,0.058,47.476,0.047,60.749,0.036,77.731,0.031,99.461,0.026,127.266,0.023,162.844,0.021,208.368,0.018,266.619,0.016,341.154,0.015,436.525,0.013,558.558,0.012,714.706,0.011,914.506,0.010,1170.161,0.010,1497.286,0.011)}

.func Cgs(V) {table(V,-4.970,8.152,-4.178,6.398,-3.387,6.211,-2.595,6.284,-1.803,6.438,-1.011,6.690,-0.220,7.591,0.572,8.612,1.364,9.359,2.156,9.841,2.947,10.049,3.739,10.147,4.531,10.208,5.322,10.250,6.114,10.283,6.906,10.309,7.698,10.331,8.489,10.352,9.281,10.370,10.073,10.386,10.864,10.401,11.656,10.414,12.448,10.427,13.240,10.439,14.031,10.450,14.823,10.460,15.615,10.470,16.407,10.479,17.198,10.488,17.990,10.495)}


.param Is_ideal=1.000000e-05
.param n_ideal=5.340678e-01
.param Rs_ideal=1.326996e-02
.ENDS 51

.SUBCKT 52 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*min(Is*(-1+exp(max(V(S,d2),-1n)/(nn(V(G,S))*nscal(V(Tj))))),1e5)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,5.8824e-16,0.5,1.2489e-13,1,2.6518e-11,1.5,5.6303e-09,2,1.1954e-06,2.5,0.00025382,3,0.05389,3.5,0.336,4,1.0588,4.5,2.5543,5,5.1851,5.5,9.4799,6,15.7724,6.5,24.3769,7,35.4894,7.5,50.0146,8,68.2275,8.5,89.3823,9,113.9537,9.5,142.6033,10,177.894,10.5,208.5998,11,240.4504,11.5,274.8366,12,293.8461,12.5,332.3837,13,346.6941,13.5,369.7084,14,388.4124,14.5,388.4124,15,404.3967,15.5,404.3967,16,404.3967,16.5,404.3967,17,404.3967,17.5,408.6566,18,409.14,18.5,428.1634,19,434.5979,19.5,440.6929,20,446.4746,20.5,451.9668,21,457.1908,21.5,462.1659,22,466.9097,22.5,471.438,23,475.7653,23.5,479.9048,24,483.8685,24.5,487.6676,25,491.3121,25.5,494.8115,26,498.1742,26.5,501.4082,27,504.5209,27.5,507.519,28,510.4087,28.5,513.196,29,515.8862,29.5,518.4843,30,520.9951)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,0.99,5,0.96296,5.5,0.7615,6,0.65745,6.5,0.57106,7,0.49765,7.5,0.42593,8,0.36259,8.5,0.31372,9,0.27167,9.5,0.23545,10,0.19688,10.5,0.18231,11,0.16672,11.5,0.15018,12,0.14252,12.5,0.12781,13,0.12868,13.5,0.12457,14,0.12188,14.5,0.12796,15,0.12514,15.5,0.12922,16,0.13246,16.5,0.13541,17,0.13838,17.5,0.13912,18,0.1412,18.5,0.14418,19,0.14523,19.5,0.14624,20,0.14721,20.5,0.14816,21,0.14907,21.5,0.14996,22,0.15081,22.5,0.15164,23,0.15244,23.5,0.15322,24,0.15398,24.5,0.15471,25,0.15543,25.5,0.15612,26,0.15679,26.5,0.15744,27,0.15808,27.5,0.1587,28,0.1593,28.5,0.15989,29,0.16046,29.5,0.16101,30,0.16156)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0.00038191,3.5,0.00083057,4,0.0020001,4.5,0.0039225,5,0.0079971,5.5,0.013631,6,0.021355,6.5,0.032633,7,0.052205,7.5,0.074716,8,0.097976,8.5,0.12498,9,0.15781,9.5,0.19053,10,0.20605,10.5,0.27361,11,0.44162,11.5,0.70407,12,1.6866,12.5,1.7534,13,1.9165,13.5,1.9216,14,1.9335,14.5,1.9338,15,1.9346,15.5,1.9346,16,1.9346,16.5,1.9346,17,1.9346,17.5,1.9346,18,1.9346,18.5,1.9346,19,1.9346,19.5,1.9346,20,1.9346,20.5,1.9346,21,1.9346,21.5,1.9346,22,1.9346,22.5,1.9346,23,1.9346,23.5,1.9346,24,1.9346,24.5,1.9346,25,1.9346,25.5,1.9346,26,1.9346,26.5,1.9346,27,1.9346,27.5,1.9346,28,1.9346,28.5,1.9346,29,1.9346,29.5,1.9346,30,1.9346)}
.func RTJ(Tj) {table(Tj,25,0.001,35,0.00094727,45,0.0010964,55,0.0014473,65,0.0020001,75,0.0027548,85,0.0037112,95,0.0048695,105,0.0062297,115,0.0077917,125,0.0095555,135,0.011521,145,0.013689,155,0.016058,165,0.018629,175,0.021402,275,0.049132,375,0.076863,475,0.10459,575,0.13232,675,0.16005,775,0.18778,875,0.21551,975,0.24324,1075,0.27097,1175,0.2987,1275,0.32643,1375,0.35417,1475,0.3819,1575,0.40963,1675,0.43736,1775,0.46509,1875,0.49282,1975,0.52055)}
.func VthFwd(Tj) {table(Tj,25,-0.051007,35,-0.063527,45,-0.070117,55,-0.070776,65,-0.065505,75,-0.054304,85,-0.037171,95,-0.014109,105,0.014884,115,0.049808,125,0.090662,135,0.13745,145,0.19016,155,0.24881,165,0.31338,175,0.38389,275,1.089,375,1.794,475,2.4991,575,3.2042,675,3.9092,775,4.6143,875,5.3194,975,6,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.53407,-4,0.50251,-3,0.4629,-2,0.41467,-1,0.35856,0,0.29955,1,0.24335,2,0.19411,3,0.15186,4,0.12079,5,0.10418,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.01327,-4,0.014242,-3,0.015781,-2,0.017849,-1,0.020314,0,0.022766,1,0.024725,2,0.026008,3,0.026726,4,0.027653,5,0.030665,6,0.035074,7,0.043984,8,0.057202,9,0.075206,10,0.089037,11,0.12479,12,0.14814,13,0.18258,14,0.23848,15,0.40152,16,1.0031,17,10,18,10)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,25,0.8327,35,0.83701,45,0.84504,55,0.85678,65,0.87224,75,0.89141,85,0.9143,95,0.9409,105,0.97121,115,1.0052,125,1.043,135,1.0844,145,1.1296,155,1.1785,165,1.2311,175,1.2874,275,1.8505,375,2.4137,475,2.9768,575,3.5399,675,4.103,775,4.6662,875,5.2293,975,5.7924,1075,6.3555,1175,6.9187,1275,7.4818,1375,8.0449,1475,8.608,1575,9.1712,1675,9.7343,1775,10.2974,1875,10.8605,1975,11.4237)}
.func nscal(Tj) {table(Tj,25,1.0476,35,1.041,45,1.0339,55,1.0265,65,1.0186,75,1.0103,85,1.0016,95,0.99247,105,0.98294,115,0.973,125,0.96264,135,0.95188,145,0.9407,155,0.92911,165,0.91711,175,0.90469,275,0.78053,375,0.65637,475,0.53222,575,0.40806,675,0.2839,775,0.2,875,0.2,975,0.2,1075,0.2,1175,0.2,1275,0.2,1375,0.2,1475,0.2,1575,0.2,1675,0.2,1775,0.2,1875,0.2,1975,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.100,5.018,0.128,5.004,0.164,4.968,0.209,4.923,0.268,4.895,0.343,4.831,0.439,4.768,0.562,4.692,0.719,4.606,0.919,4.502,1.176,4.366,1.505,4.221,1.926,4.059,2.465,3.874,3.154,3.673,4.035,3.460,5.164,3.234,6.607,2.999,8.454,2.755,10.817,2.339,13.841,2.018,17.711,1.823,22.662,1.648,28.997,1.485,37.104,1.280,47.476,1.032,60.749,0.818,77.731,0.679,99.461,0.575,127.266,0.494,162.844,0.427,208.368,0.372,266.619,0.325,341.154,0.286,436.525,0.251,558.558,0.222,714.706,0.196,914.506,0.178,1170.161,0.177,1497.286,0.176)}

.func Cdg(V) {table(V,0.100,2.330,0.128,2.276,0.164,2.221,0.209,2.152,0.268,2.051,0.343,1.936,0.439,1.815,0.562,1.683,0.719,1.554,0.919,1.441,1.176,1.332,1.505,1.216,1.926,1.092,2.465,0.974,3.154,0.863,4.035,0.755,5.164,0.649,6.607,0.547,8.454,0.441,10.817,0.207,13.841,0.095,17.711,0.081,22.662,0.072,28.997,0.065,37.104,0.058,47.476,0.047,60.749,0.036,77.731,0.031,99.461,0.026,127.266,0.023,162.844,0.021,208.368,0.018,266.619,0.016,341.154,0.015,436.525,0.013,558.558,0.012,714.706,0.011,914.506,0.010,1170.161,0.010,1497.286,0.011)}

.func Cgs(V) {table(V,-4.970,8.152,-4.178,6.398,-3.387,6.211,-2.595,6.284,-1.803,6.438,-1.011,6.690,-0.220,7.591,0.572,8.612,1.364,9.359,2.156,9.841,2.947,10.049,3.739,10.147,4.531,10.208,5.322,10.250,6.114,10.283,6.906,10.309,7.698,10.331,8.489,10.352,9.281,10.370,10.073,10.386,10.864,10.401,11.656,10.414,12.448,10.427,13.240,10.439,14.031,10.450,14.823,10.460,15.615,10.470,16.407,10.479,17.198,10.488,17.990,10.495)}


.ENDS 52

.SUBCKT 53 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {min((1+TM(V(Tj))/tau(V(Tj)))*Is*tau(V(Tj))*(-1+exp(max(V(S,d2),-1n)/(nscal(V(Tj))*nn(V(G,S))))),1e6)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,5.8824e-16,0.5,1.2489e-13,1,2.6518e-11,1.5,5.6303e-09,2,1.1954e-06,2.5,0.00025382,3,0.05389,3.5,0.336,4,1.0588,4.5,2.5543,5,5.1851,5.5,9.4799,6,15.7724,6.5,24.3769,7,35.4894,7.5,50.0146,8,68.2275,8.5,89.3823,9,113.9537,9.5,142.6033,10,177.894,10.5,208.5998,11,240.4504,11.5,274.8366,12,293.8461,12.5,332.3837,13,346.6941,13.5,369.7084,14,388.4124,14.5,388.4124,15,404.3967,15.5,404.3967,16,404.3967,16.5,404.3967,17,404.3967,17.5,408.6566,18,409.14,18.5,428.1634,19,434.5979,19.5,440.6929,20,446.4746,20.5,451.9668,21,457.1908,21.5,462.1659,22,466.9097,22.5,471.438,23,475.7653,23.5,479.9048,24,483.8685,24.5,487.6676,25,491.3121,25.5,494.8115,26,498.1742,26.5,501.4082,27,504.5209,27.5,507.519,28,510.4087,28.5,513.196,29,515.8862,29.5,518.4843,30,520.9951)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,0.99,5,0.96296,5.5,0.7615,6,0.65745,6.5,0.57106,7,0.49765,7.5,0.42593,8,0.36259,8.5,0.31372,9,0.27167,9.5,0.23545,10,0.19688,10.5,0.18231,11,0.16672,11.5,0.15018,12,0.14252,12.5,0.12781,13,0.12868,13.5,0.12457,14,0.12188,14.5,0.12796,15,0.12514,15.5,0.12922,16,0.13246,16.5,0.13541,17,0.13838,17.5,0.13912,18,0.1412,18.5,0.14418,19,0.14523,19.5,0.14624,20,0.14721,20.5,0.14816,21,0.14907,21.5,0.14996,22,0.15081,22.5,0.15164,23,0.15244,23.5,0.15322,24,0.15398,24.5,0.15471,25,0.15543,25.5,0.15612,26,0.15679,26.5,0.15744,27,0.15808,27.5,0.1587,28,0.1593,28.5,0.15989,29,0.16046,29.5,0.16101,30,0.16156)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0.00038191,3.5,0.00083057,4,0.0020001,4.5,0.0039225,5,0.0079971,5.5,0.013631,6,0.021355,6.5,0.032633,7,0.052205,7.5,0.074716,8,0.097976,8.5,0.12498,9,0.15781,9.5,0.19053,10,0.20605,10.5,0.27361,11,0.44162,11.5,0.70407,12,1.6866,12.5,1.7534,13,1.9165,13.5,1.9216,14,1.9335,14.5,1.9338,15,1.9346,15.5,1.9346,16,1.9346,16.5,1.9346,17,1.9346,17.5,1.9346,18,1.9346,18.5,1.9346,19,1.9346,19.5,1.9346,20,1.9346,20.5,1.9346,21,1.9346,21.5,1.9346,22,1.9346,22.5,1.9346,23,1.9346,23.5,1.9346,24,1.9346,24.5,1.9346,25,1.9346,25.5,1.9346,26,1.9346,26.5,1.9346,27,1.9346,27.5,1.9346,28,1.9346,28.5,1.9346,29,1.9346,29.5,1.9346,30,1.9346)}
.func RTJ(Tj) {table(Tj,25,0.001,35,0.00094727,45,0.0010964,55,0.0014473,65,0.0020001,75,0.0027548,85,0.0037112,95,0.0048695,105,0.0062297,115,0.0077917,125,0.0095555,135,0.011521,145,0.013689,155,0.016058,165,0.018629,175,0.021402,275,0.049132,375,0.076863,475,0.10459,575,0.13232,675,0.16005,775,0.18778,875,0.21551,975,0.24324,1075,0.27097,1175,0.2987,1275,0.32643,1375,0.35417,1475,0.3819,1575,0.40963,1675,0.43736,1775,0.46509,1875,0.49282,1975,0.52055)}
.func VthFwd(Tj) {table(Tj,25,-0.051007,35,-0.063527,45,-0.070117,55,-0.070776,65,-0.065505,75,-0.054304,85,-0.037171,95,-0.014109,105,0.014884,115,0.049808,125,0.090662,135,0.13745,145,0.19016,155,0.24881,165,0.31338,175,0.38389,275,1.089,375,1.794,475,2.4991,575,3.2042,675,3.9092,775,4.6143,875,5.3194,975,6,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.53407,-4,0.50251,-3,0.4629,-2,0.41467,-1,0.35856,0,0.29955,1,0.24335,2,0.19411,3,0.15186,4,0.12079,5,0.10418,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.01327,-4,0.014242,-3,0.015781,-2,0.017849,-1,0.020314,0,0.022766,1,0.024725,2,0.026008,3,0.026726,4,0.027653,5,0.030665,6,0.035074,7,0.043984,8,0.057202,9,0.075206,10,0.089037,11,0.12479,12,0.14814,13,0.18258,14,0.23848,15,0.40152,16,1.0031,17,10,18,10)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,25,0.8327,35,0.83701,45,0.84504,55,0.85678,65,0.87224,75,0.89141,85,0.9143,95,0.9409,105,0.97121,115,1.0052,125,1.043,135,1.0844,145,1.1296,155,1.1785,165,1.2311,175,1.2874,275,1.8505,375,2.4137,475,2.9768,575,3.5399,675,4.103,775,4.6662,875,5.2293,975,5.7924,1075,6.3555,1175,6.9187,1275,7.4818,1375,8.0449,1475,8.608,1575,9.1712,1675,9.7343,1775,10.2974,1875,10.8605,1975,11.4237)}
.func nscal(Tj) {table(Tj,25,1.0476,35,1.041,45,1.0339,55,1.0265,65,1.0186,75,1.0103,85,1.0016,95,0.99247,105,0.98294,115,0.973,125,0.96264,135,0.95188,145,0.9407,155,0.92911,165,0.91711,175,0.90469,275,0.78053,375,0.65637,475,0.53222,575,0.40806,675,0.2839,775,0.2,875,0.2,975,0.2,1075,0.2,1175,0.2,1275,0.2,1375,0.2,1475,0.2,1575,0.2,1675,0.2,1775,0.2,1875,0.2,1975,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.100,5.018,0.128,5.004,0.164,4.968,0.209,4.923,0.268,4.895,0.343,4.831,0.439,4.768,0.562,4.692,0.719,4.606,0.919,4.502,1.176,4.366,1.505,4.221,1.926,4.059,2.465,3.874,3.154,3.673,4.035,3.460,5.164,3.234,6.607,2.999,8.454,2.755,10.817,2.339,13.841,2.018,17.711,1.823,22.662,1.648,28.997,1.485,37.104,1.280,47.476,1.032,60.749,0.818,77.731,0.679,99.461,0.575,127.266,0.494,162.844,0.427,208.368,0.372,266.619,0.325,341.154,0.286,436.525,0.251,558.558,0.222,714.706,0.196,914.506,0.178,1170.161,0.177,1497.286,0.176)}

.func Cdg(V) {table(V,0.100,2.330,0.128,2.276,0.164,2.221,0.209,2.152,0.268,2.051,0.343,1.936,0.439,1.815,0.562,1.683,0.719,1.554,0.919,1.441,1.176,1.332,1.505,1.216,1.926,1.092,2.465,0.974,3.154,0.863,4.035,0.755,5.164,0.649,6.607,0.547,8.454,0.441,10.817,0.207,13.841,0.095,17.711,0.081,22.662,0.072,28.997,0.065,37.104,0.058,47.476,0.047,60.749,0.036,77.731,0.031,99.461,0.026,127.266,0.023,162.844,0.021,208.368,0.018,266.619,0.016,341.154,0.015,436.525,0.013,558.558,0.012,714.706,0.011,914.506,0.010,1170.161,0.010,1497.286,0.011)}

.func Cgs(V) {table(V,-4.970,8.152,-4.178,6.398,-3.387,6.211,-2.595,6.284,-1.803,6.438,-1.011,6.690,-0.220,7.591,0.572,8.612,1.364,9.359,2.156,9.841,2.947,10.049,3.739,10.147,4.531,10.208,5.322,10.250,6.114,10.283,6.906,10.309,7.698,10.331,8.489,10.352,9.281,10.370,10.073,10.386,10.864,10.401,11.656,10.414,12.448,10.427,13.240,10.439,14.031,10.450,14.823,10.460,15.615,10.470,16.407,10.479,17.198,10.488,17.990,10.495)}


.ENDS 53

.SUBCKT 61 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,5.0723e-14,1,3.0874e-12,1.5,1.8792e-10,2,1.1438e-08,2.5,6.9621e-07,3,4.2376e-05,3.5,0.0025793,4,0.157,4.5,0.56864,5,1.4207,5.5,3.009,6,5.6453,6.5,9.954,7,16.34,7.5,25.5389,8,36.7817,8.5,51.0216,9,68.3653,9.5,89.9517,10,115.3018,10.5,146.0897,11,181.1529,11.5,220.5921,12,259.2449,12.5,327.7433,13,361.0327,13.5,399.2784,14,412.1565,14.5,440.6149,15,463.9778,15.5,486.3374,16,505.7269,16.5,524.2362,17,538.9287,17.5,557.0943,18,557.0943,18.5,557.0943,19,566.4842,19.5,573.8058,20,577.1521,20.5,598.6693,21,610.5238,21.5,622.0107,22,633.1495,22.5,643.9585,23,654.4543,23.5,664.6528,24,674.5684,24.5,684.2147,25,693.6042,25.5,702.7488,26,711.6596,26.5,720.3468,27,728.8202,27.5,737.0889,28,745.1614,28.5,753.0458,29,760.7497,29.5,768.2802,30,775.6441)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,1,5.5,0.99,6,0.9335,6.5,0.78607,7,0.66366,7.5,0.55986,8,0.50316,8.5,0.45211,9,0.40997,9.5,0.36336,10,0.32519,10.5,0.28563,11,0.25204,11.5,0.22421,12,0.20558,12.5,0.16524,13,0.16251,13.5,0.15587,14,0.16202,14.5,0.15882,15,0.15756,15.5,0.15645,16,0.15545,16.5,0.15508,17,0.15508,17.5,0.1537,18,0.15757,18.5,0.16192,19,0.16211,19.5,0.1633,20,0.16498,20.5,0.16574,21,0.16616,21.5,0.16657,22,0.16697,22.5,0.16737,23,0.16775,23.5,0.16812,24,0.16849,24.5,0.16885,25,0.1692,25.5,0.16954,26,0.16988,26.5,0.17021,27,0.17053,27.5,0.17085,28,0.17116,28.5,0.17146,29,0.17176,29.5,0.17205,30,0.17234)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0,3.5,0,4,0.00049807,4.5,0.0013459,5,0.003558,5.5,0.0075722,6,0.015363,6.5,0.02467,7,0.037362,7.5,0.047829,8,0.079345,8.5,0.12088,9,0.17204,9.5,0.21702,10,0.28603,10.5,0.28603,11,0.28603,11.5,0.28603,12,0.28603,12.5,0.28603,13,0.28603,13.5,0.28603,14,0.28603,14.5,0.28603,15,0.28603,15.5,0.28603,16,0.28603,16.5,0.28603,17,0.28603,17.5,0.28603,18,0.28603,18.5,0.28603,19,0.28603,19.5,0.28603,20,0.28603,20.5,0.28603,21,0.28603,21.5,0.28603,22,0.28603,22.5,0.28603,23,0.28603,23.5,0.28603,24,0.28603,24.5,0.28603,25,0.28603,25.5,0.28603,26,0.28603,26.5,0.28603,27,0.28603,27.5,0.28603,28,0.28603,28.5,0.28603,29,0.28603,29.5,0.28603,30,0.28603)}
.func RTJ(Tj) {table(Tj,25,0.00093355,35,0.0015069,45,0.0021248,55,0.0027873,65,0.0034943,75,0.004246,85,0.0050422,95,0.005883,105,0.0067684,115,0.0076983,125,0.0086729,135,0.009692,145,0.010756,155,0.011864,165,0.013017,175,0.014214,275,0.026189,375,0.038163,475,0.050137,575,0.062112,675,0.074086,775,0.08606,875,0.098035,975,0.11001,1075,0.12198,1175,0.13396,1275,0.14593,1375,0.15791,1475,0.16988,1575,0.18185,1675,0.19383,1775,0.2058,1875,0.21778,1975,0.22975)}
.func VthFwd(Tj) {table(Tj,25,1.1102e-16,35,0.30043,45,0.58212,55,0.84506,65,1.0893,75,1.3147,85,1.5214,95,1.7093,105,1.8786,115,2.029,125,2.1607,135,2.2737,145,2.3679,155,2.4434,165,2.5001,175,2.5381,275,2.9178,375,3.2976,475,3.6773,575,4.0571,675,4.4368,775,4.8166,875,5.1964,975,5.5761,1075,5.9559,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.param Is=10.00u

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.012,4.122,0.016,4.129,0.022,4.112,0.029,4.130,0.039,4.128,0.052,4.108,0.071,4.106,0.095,4.081,0.127,4.026,0.171,4.034,0.230,3.960,0.308,3.948,0.414,3.879,0.557,3.790,0.748,3.712,1.004,3.595,1.349,3.451,1.813,3.283,2.435,3.100,3.271,2.895,4.394,2.674,5.903,2.438,7.929,2.181,10.652,1.716,14.309,1.463,19.222,1.253,25.821,1.063,34.686,0.885,46.595,0.748,62.593,0.646,84.084,0.552,112.953,0.475,151.733,0.413,203.829,0.357,273.810,0.309,367.819,0.269,494.105,0.235,663.748,0.204,891.636,0.183,1197.766,0.164)}

.func Cdg(V) {table(V,0.012,3.439,0.016,3.447,0.022,3.431,0.029,3.394,0.039,3.368,0.052,3.340,0.071,3.287,0.095,3.222,0.127,3.155,0.171,3.024,0.230,2.894,0.308,2.688,0.414,2.456,0.557,2.208,0.748,1.967,1.004,1.770,1.349,1.581,1.813,1.387,2.435,1.194,3.271,1.014,4.394,0.845,5.903,0.682,7.929,0.515,10.652,0.188,14.309,0.129,19.222,0.106,25.821,0.088,34.686,0.071,46.595,0.059,62.593,0.052,84.084,0.045,112.953,0.039,151.733,0.035,203.829,0.031,273.810,0.027,367.819,0.024,494.105,0.021,663.748,0.019,891.636,0.017,1197.766,0.016)}

.func Cgs(V) {table(V,-4.940,7.520,-4.251,5.013,-3.562,4.246,-2.873,4.293,-2.184,4.409,-1.495,4.611,-0.806,4.974,-0.117,6.109,0.572,7.338,1.261,8.089,1.950,8.672,2.639,9.022,3.328,9.182,4.017,9.273,4.706,9.328,5.394,9.370,6.083,9.400,6.772,9.424,7.461,9.447,8.150,9.467,8.839,9.479,9.528,9.494,10.217,9.506,10.906,9.513,11.595,9.526,12.284,9.535,12.973,9.543,13.662,9.557,14.351,9.559,15.040,9.566)}


.param Is_ideal=1.000000e-05
.param n_ideal=5.858428e-01
.param Rs_ideal=1.249623e-02
.ENDS 61

.SUBCKT 62 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*min(Is*(-1+exp(max(V(S,d2),-1n)/(nn(V(G,S))*nscal(V(Tj))))),1e5)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,5.0723e-14,1,3.0874e-12,1.5,1.8792e-10,2,1.1438e-08,2.5,6.9621e-07,3,4.2376e-05,3.5,0.0025793,4,0.157,4.5,0.56864,5,1.4207,5.5,3.009,6,5.6453,6.5,9.954,7,16.34,7.5,25.5389,8,36.7817,8.5,51.0216,9,68.3653,9.5,89.9517,10,115.3018,10.5,146.0897,11,181.1529,11.5,220.5921,12,259.2449,12.5,327.7433,13,361.0327,13.5,399.2784,14,412.1565,14.5,440.6149,15,463.9778,15.5,486.3374,16,505.7269,16.5,524.2362,17,538.9287,17.5,557.0943,18,557.0943,18.5,557.0943,19,566.4842,19.5,573.8058,20,577.1521,20.5,598.6693,21,610.5238,21.5,622.0107,22,633.1495,22.5,643.9585,23,654.4543,23.5,664.6528,24,674.5684,24.5,684.2147,25,693.6042,25.5,702.7488,26,711.6596,26.5,720.3468,27,728.8202,27.5,737.0889,28,745.1614,28.5,753.0458,29,760.7497,29.5,768.2802,30,775.6441)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,1,5.5,0.99,6,0.9335,6.5,0.78607,7,0.66366,7.5,0.55986,8,0.50316,8.5,0.45211,9,0.40997,9.5,0.36336,10,0.32519,10.5,0.28563,11,0.25204,11.5,0.22421,12,0.20558,12.5,0.16524,13,0.16251,13.5,0.15587,14,0.16202,14.5,0.15882,15,0.15756,15.5,0.15645,16,0.15545,16.5,0.15508,17,0.15508,17.5,0.1537,18,0.15757,18.5,0.16192,19,0.16211,19.5,0.1633,20,0.16498,20.5,0.16574,21,0.16616,21.5,0.16657,22,0.16697,22.5,0.16737,23,0.16775,23.5,0.16812,24,0.16849,24.5,0.16885,25,0.1692,25.5,0.16954,26,0.16988,26.5,0.17021,27,0.17053,27.5,0.17085,28,0.17116,28.5,0.17146,29,0.17176,29.5,0.17205,30,0.17234)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0,3.5,0,4,0.00049807,4.5,0.0013459,5,0.003558,5.5,0.0075722,6,0.015363,6.5,0.02467,7,0.037362,7.5,0.047829,8,0.079345,8.5,0.12088,9,0.17204,9.5,0.21702,10,0.28603,10.5,0.28603,11,0.28603,11.5,0.28603,12,0.28603,12.5,0.28603,13,0.28603,13.5,0.28603,14,0.28603,14.5,0.28603,15,0.28603,15.5,0.28603,16,0.28603,16.5,0.28603,17,0.28603,17.5,0.28603,18,0.28603,18.5,0.28603,19,0.28603,19.5,0.28603,20,0.28603,20.5,0.28603,21,0.28603,21.5,0.28603,22,0.28603,22.5,0.28603,23,0.28603,23.5,0.28603,24,0.28603,24.5,0.28603,25,0.28603,25.5,0.28603,26,0.28603,26.5,0.28603,27,0.28603,27.5,0.28603,28,0.28603,28.5,0.28603,29,0.28603,29.5,0.28603,30,0.28603)}
.func RTJ(Tj) {table(Tj,25,0.00093355,35,0.0015069,45,0.0021248,55,0.0027873,65,0.0034943,75,0.004246,85,0.0050422,95,0.005883,105,0.0067684,115,0.0076983,125,0.0086729,135,0.009692,145,0.010756,155,0.011864,165,0.013017,175,0.014214,275,0.026189,375,0.038163,475,0.050137,575,0.062112,675,0.074086,775,0.08606,875,0.098035,975,0.11001,1075,0.12198,1175,0.13396,1275,0.14593,1375,0.15791,1475,0.16988,1575,0.18185,1675,0.19383,1775,0.2058,1875,0.21778,1975,0.22975)}
.func VthFwd(Tj) {table(Tj,25,1.1102e-16,35,0.30043,45,0.58212,55,0.84506,65,1.0893,75,1.3147,85,1.5214,95,1.7093,105,1.8786,115,2.029,125,2.1607,135,2.2737,145,2.3679,155,2.4434,165,2.5001,175,2.5381,275,2.9178,375,3.2976,475,3.6773,575,4.0571,675,4.4368,775,4.8166,875,5.1964,975,5.5761,1075,5.9559,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.58584,-4,0.54608,-3,0.49424,-2,0.42994,-1,0.35993,0,0.29579,1,0.24218,2,0.19275,3,0.14993,4,0.11595,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1,19,0.1,20,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.012496,-4,0.013117,-3,0.014344,-2,0.016118,-1,0.017921,0,0.018875,1,0.018875,2,0.018875,3,0.018875,4,0.018875,5,0.018875,6,0.018875,7,0.018875,8,0.019074,9,0.022271,10,0.026908,11,0.031998,12,0.039047,13,0.043069,14,0.063542,15,0.09665,16,0.16126,17,0.36375,18,10,19,10,20,10)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,25,1,35,1.0292,45,1.0665,55,1.1121,65,1.1658,75,1.2277,85,1.2979,95,1.3762,105,1.4627,115,1.5574,125,1.6602,135,1.7713,145,1.8906,155,2.018,165,2.1537,175,2.2975,275,3.7358,375,5.1741,475,6.6124,575,8.0508,675,9.4891,775,10.9274,875,12.3657,975,13.804,1075,15.2423,1175,16.6807,1275,18.119,1375,19.5573,1475,20.9956,1575,22.4339,1675,23.8722,1775,25.3105,1875,26.7489,1975,28.1872)}
.func nscal(Tj) {table(Tj,25,1,35,0.98419,45,0.96686,55,0.94801,65,0.92764,75,0.90576,85,0.88235,95,0.85742,105,0.83098,115,0.80301,125,0.77353,135,0.74252,145,0.71,155,0.67595,165,0.64039,175,0.60331,275,0.23248,375,0.2,475,0.2,575,0.2,675,0.2,775,0.2,875,0.2,975,0.2,1075,0.2,1175,0.2,1275,0.2,1375,0.2,1475,0.2,1575,0.2,1675,0.2,1775,0.2,1875,0.2,1975,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.012,4.122,0.016,4.129,0.022,4.112,0.029,4.130,0.039,4.128,0.052,4.108,0.071,4.106,0.095,4.081,0.127,4.026,0.171,4.034,0.230,3.960,0.308,3.948,0.414,3.879,0.557,3.790,0.748,3.712,1.004,3.595,1.349,3.451,1.813,3.283,2.435,3.100,3.271,2.895,4.394,2.674,5.903,2.438,7.929,2.181,10.652,1.716,14.309,1.463,19.222,1.253,25.821,1.063,34.686,0.885,46.595,0.748,62.593,0.646,84.084,0.552,112.953,0.475,151.733,0.413,203.829,0.357,273.810,0.309,367.819,0.269,494.105,0.235,663.748,0.204,891.636,0.183,1197.766,0.164)}

.func Cdg(V) {table(V,0.012,3.439,0.016,3.447,0.022,3.431,0.029,3.394,0.039,3.368,0.052,3.340,0.071,3.287,0.095,3.222,0.127,3.155,0.171,3.024,0.230,2.894,0.308,2.688,0.414,2.456,0.557,2.208,0.748,1.967,1.004,1.770,1.349,1.581,1.813,1.387,2.435,1.194,3.271,1.014,4.394,0.845,5.903,0.682,7.929,0.515,10.652,0.188,14.309,0.129,19.222,0.106,25.821,0.088,34.686,0.071,46.595,0.059,62.593,0.052,84.084,0.045,112.953,0.039,151.733,0.035,203.829,0.031,273.810,0.027,367.819,0.024,494.105,0.021,663.748,0.019,891.636,0.017,1197.766,0.016)}

.func Cgs(V) {table(V,-4.940,7.520,-4.251,5.013,-3.562,4.246,-2.873,4.293,-2.184,4.409,-1.495,4.611,-0.806,4.974,-0.117,6.109,0.572,7.338,1.261,8.089,1.950,8.672,2.639,9.022,3.328,9.182,4.017,9.273,4.706,9.328,5.394,9.370,6.083,9.400,6.772,9.424,7.461,9.447,8.150,9.467,8.839,9.479,9.528,9.494,10.217,9.506,10.906,9.513,11.595,9.526,12.284,9.535,12.973,9.543,13.662,9.557,14.351,9.559,15.040,9.566)}


.ENDS 62

.SUBCKT 63 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {min((1+TM(V(Tj))/tau(V(Tj)))*Is*tau(V(Tj))*(-1+exp(max(V(S,d2),-1n)/(nscal(V(Tj))*nn(V(G,S))))),1e6)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,5.0723e-14,1,3.0874e-12,1.5,1.8792e-10,2,1.1438e-08,2.5,6.9621e-07,3,4.2376e-05,3.5,0.0025793,4,0.157,4.5,0.56864,5,1.4207,5.5,3.009,6,5.6453,6.5,9.954,7,16.34,7.5,25.5389,8,36.7817,8.5,51.0216,9,68.3653,9.5,89.9517,10,115.3018,10.5,146.0897,11,181.1529,11.5,220.5921,12,259.2449,12.5,327.7433,13,361.0327,13.5,399.2784,14,412.1565,14.5,440.6149,15,463.9778,15.5,486.3374,16,505.7269,16.5,524.2362,17,538.9287,17.5,557.0943,18,557.0943,18.5,557.0943,19,566.4842,19.5,573.8058,20,577.1521,20.5,598.6693,21,610.5238,21.5,622.0107,22,633.1495,22.5,643.9585,23,654.4543,23.5,664.6528,24,674.5684,24.5,684.2147,25,693.6042,25.5,702.7488,26,711.6596,26.5,720.3468,27,728.8202,27.5,737.0889,28,745.1614,28.5,753.0458,29,760.7497,29.5,768.2802,30,775.6441)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,1,5.5,0.99,6,0.9335,6.5,0.78607,7,0.66366,7.5,0.55986,8,0.50316,8.5,0.45211,9,0.40997,9.5,0.36336,10,0.32519,10.5,0.28563,11,0.25204,11.5,0.22421,12,0.20558,12.5,0.16524,13,0.16251,13.5,0.15587,14,0.16202,14.5,0.15882,15,0.15756,15.5,0.15645,16,0.15545,16.5,0.15508,17,0.15508,17.5,0.1537,18,0.15757,18.5,0.16192,19,0.16211,19.5,0.1633,20,0.16498,20.5,0.16574,21,0.16616,21.5,0.16657,22,0.16697,22.5,0.16737,23,0.16775,23.5,0.16812,24,0.16849,24.5,0.16885,25,0.1692,25.5,0.16954,26,0.16988,26.5,0.17021,27,0.17053,27.5,0.17085,28,0.17116,28.5,0.17146,29,0.17176,29.5,0.17205,30,0.17234)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0,3.5,0,4,0.00049807,4.5,0.0013459,5,0.003558,5.5,0.0075722,6,0.015363,6.5,0.02467,7,0.037362,7.5,0.047829,8,0.079345,8.5,0.12088,9,0.17204,9.5,0.21702,10,0.28603,10.5,0.28603,11,0.28603,11.5,0.28603,12,0.28603,12.5,0.28603,13,0.28603,13.5,0.28603,14,0.28603,14.5,0.28603,15,0.28603,15.5,0.28603,16,0.28603,16.5,0.28603,17,0.28603,17.5,0.28603,18,0.28603,18.5,0.28603,19,0.28603,19.5,0.28603,20,0.28603,20.5,0.28603,21,0.28603,21.5,0.28603,22,0.28603,22.5,0.28603,23,0.28603,23.5,0.28603,24,0.28603,24.5,0.28603,25,0.28603,25.5,0.28603,26,0.28603,26.5,0.28603,27,0.28603,27.5,0.28603,28,0.28603,28.5,0.28603,29,0.28603,29.5,0.28603,30,0.28603)}
.func RTJ(Tj) {table(Tj,25,0.00093355,35,0.0015069,45,0.0021248,55,0.0027873,65,0.0034943,75,0.004246,85,0.0050422,95,0.005883,105,0.0067684,115,0.0076983,125,0.0086729,135,0.009692,145,0.010756,155,0.011864,165,0.013017,175,0.014214,275,0.026189,375,0.038163,475,0.050137,575,0.062112,675,0.074086,775,0.08606,875,0.098035,975,0.11001,1075,0.12198,1175,0.13396,1275,0.14593,1375,0.15791,1475,0.16988,1575,0.18185,1675,0.19383,1775,0.2058,1875,0.21778,1975,0.22975)}
.func VthFwd(Tj) {table(Tj,25,1.1102e-16,35,0.30043,45,0.58212,55,0.84506,65,1.0893,75,1.3147,85,1.5214,95,1.7093,105,1.8786,115,2.029,125,2.1607,135,2.2737,145,2.3679,155,2.4434,165,2.5001,175,2.5381,275,2.9178,375,3.2976,475,3.6773,575,4.0571,675,4.4368,775,4.8166,875,5.1964,975,5.5761,1075,5.9559,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.58584,-4,0.54608,-3,0.49424,-2,0.42994,-1,0.35993,0,0.29579,1,0.24218,2,0.19275,3,0.14993,4,0.11595,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1,19,0.1,20,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.012496,-4,0.013117,-3,0.014344,-2,0.016118,-1,0.017921,0,0.018875,1,0.018875,2,0.018875,3,0.018875,4,0.018875,5,0.018875,6,0.018875,7,0.018875,8,0.019074,9,0.022271,10,0.026908,11,0.031998,12,0.039047,13,0.043069,14,0.063542,15,0.09665,16,0.16126,17,0.36375,18,10,19,10,20,10)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,25,1,35,1.0292,45,1.0665,55,1.1121,65,1.1658,75,1.2277,85,1.2979,95,1.3762,105,1.4627,115,1.5574,125,1.6602,135,1.7713,145,1.8906,155,2.018,165,2.1537,175,2.2975,275,3.7358,375,5.1741,475,6.6124,575,8.0508,675,9.4891,775,10.9274,875,12.3657,975,13.804,1075,15.2423,1175,16.6807,1275,18.119,1375,19.5573,1475,20.9956,1575,22.4339,1675,23.8722,1775,25.3105,1875,26.7489,1975,28.1872)}
.func nscal(Tj) {table(Tj,25,1,35,0.98419,45,0.96686,55,0.94801,65,0.92764,75,0.90576,85,0.88235,95,0.85742,105,0.83098,115,0.80301,125,0.77353,135,0.74252,145,0.71,155,0.67595,165,0.64039,175,0.60331,275,0.23248,375,0.2,475,0.2,575,0.2,675,0.2,775,0.2,875,0.2,975,0.2,1075,0.2,1175,0.2,1275,0.2,1375,0.2,1475,0.2,1575,0.2,1675,0.2,1775,0.2,1875,0.2,1975,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.012,4.122,0.016,4.129,0.022,4.112,0.029,4.130,0.039,4.128,0.052,4.108,0.071,4.106,0.095,4.081,0.127,4.026,0.171,4.034,0.230,3.960,0.308,3.948,0.414,3.879,0.557,3.790,0.748,3.712,1.004,3.595,1.349,3.451,1.813,3.283,2.435,3.100,3.271,2.895,4.394,2.674,5.903,2.438,7.929,2.181,10.652,1.716,14.309,1.463,19.222,1.253,25.821,1.063,34.686,0.885,46.595,0.748,62.593,0.646,84.084,0.552,112.953,0.475,151.733,0.413,203.829,0.357,273.810,0.309,367.819,0.269,494.105,0.235,663.748,0.204,891.636,0.183,1197.766,0.164)}

.func Cdg(V) {table(V,0.012,3.439,0.016,3.447,0.022,3.431,0.029,3.394,0.039,3.368,0.052,3.340,0.071,3.287,0.095,3.222,0.127,3.155,0.171,3.024,0.230,2.894,0.308,2.688,0.414,2.456,0.557,2.208,0.748,1.967,1.004,1.770,1.349,1.581,1.813,1.387,2.435,1.194,3.271,1.014,4.394,0.845,5.903,0.682,7.929,0.515,10.652,0.188,14.309,0.129,19.222,0.106,25.821,0.088,34.686,0.071,46.595,0.059,62.593,0.052,84.084,0.045,112.953,0.039,151.733,0.035,203.829,0.031,273.810,0.027,367.819,0.024,494.105,0.021,663.748,0.019,891.636,0.017,1197.766,0.016)}

.func Cgs(V) {table(V,-4.940,7.520,-4.251,5.013,-3.562,4.246,-2.873,4.293,-2.184,4.409,-1.495,4.611,-0.806,4.974,-0.117,6.109,0.572,7.338,1.261,8.089,1.950,8.672,2.639,9.022,3.328,9.182,4.017,9.273,4.706,9.328,5.394,9.370,6.083,9.400,6.772,9.424,7.461,9.447,8.150,9.467,8.839,9.479,9.528,9.494,10.217,9.506,10.906,9.513,11.595,9.526,12.284,9.535,12.973,9.543,13.662,9.557,14.351,9.559,15.040,9.566)}


.ENDS 63

.SUBCKT 71 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,4.1266e-13,1,2.0435e-10,1.5,1.0119e-07,2,5.0109e-05,2.5,0.024814,3,0.066963,3.5,0.29023,4,0.92883,4.5,2.2664,5,4.7153,5.5,8.6615,6,14.233,6.5,22.2456,7,32.6798,7.5,46.0181,8,61.0019,8.5,79.8241,9,100.6055,9.5,125.342,10,150.9301,10.5,178.7481,11,208.5572,11.5,229.4883,12,229.4883,12.5,229.4883,13,245.8667,13.5,262.8484,14,274.6488,14.5,287.5704,15,298.1309,15.5,298.1309,16,303.049,16.5,320.7284,17,331.5976,17.5,342.0276,18,352.0477,18.5,361.6846,19,370.9625,19.5,379.9037,20,388.5285,20.5,396.8556,21,404.9019,21.5,412.6835,22,420.2147,22.5,427.5091,23,434.5791,23.5,441.4364,24,448.0915,24.5,454.5546,25,460.8349,25.5,466.9411,26,472.8813,26.5,478.6632,27,484.2937,27.5,489.7797,28,495.1273,28.5,500.3424,29,505.4306,29.5,510.3971,30,515.2468)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.9535,5.5,0.85631,6,0.76249,6.5,0.65306,7,0.56792,7.5,0.49043,8,0.44254,8.5,0.38306,9,0.34325,9.5,0.29788,10,0.25194,10.5,0.23368,11,0.20519,11.5,0.19683,12,0.20421,12.5,0.21441,13,0.20402,13.5,0.19459,14,0.19321,14.5,0.18931,15,0.18762,15.5,0.19631,16,0.19931,16.5,0.20139,17,0.20279,17.5,0.20422,18,0.20567,18.5,0.20713,19,0.2086,19.5,0.21008,20,0.21155,20.5,0.21303,21,0.2145,21.5,0.21597,22,0.21743,22.5,0.21889,23,0.22033,23.5,0.22177,24,0.2232,24.5,0.22462,25,0.22603,25.5,0.22743,26,0.22881,26.5,0.23019,27,0.23156,27.5,0.23291,28,0.23426,28.5,0.23559,29,0.23691,29.5,0.23823,30,0.23953)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,6.466e-05,3,0.0001908,3.5,0.00073286,4,0.0019294,4.5,0.0041294,5,0.0078049,5.5,0.012897,6,0.020462,6.5,0.028818,7,0.041702,7.5,0.05965,8,0.07403,8.5,0.090792,9,0.11401,9.5,0.14597,10,0.17666,10.5,0.22141,11,0.33449,11.5,0.68708,12,2.0295,12.5,3.1918,13,3.6075,13.5,3.7452,14,3.7777,14.5,3.7874,15,3.7896,15.5,3.7896,16,3.7896,16.5,3.7896,17,3.7896,17.5,3.7896,18,3.7896,18.5,3.7896,19,3.7896,19.5,3.7896,20,3.7896,20.5,3.7896,21,3.7896,21.5,3.7896,22,3.7896,22.5,3.7896,23,3.7896,23.5,3.7896,24,3.7896,24.5,3.7896,25,3.7896,25.5,3.7896,26,3.7896,26.5,3.7896,27,3.7896,27.5,3.7896,28,3.7896,28.5,3.7896,29,3.7896,29.5,3.7896,30,3.7896)}
.func RTJ(Tj) {table(Tj,25,0.001,35,0.0011649,45,0.0014246,55,0.0017791,65,0.0022284,75,0.0027726,85,0.0034117,95,0.0041456,105,0.0049743,115,0.0058978,125,0.0069162,135,0.0080294,145,0.0092374,155,0.01054,165,0.011938,175,0.013431,275,0.028356,375,0.043282,475,0.058207,575,0.073133,675,0.088058,775,0.10298,875,0.11791,975,0.13284,1075,0.14776,1175,0.16269,1275,0.17761,1375,0.19254,1475,0.20746,1575,0.22239,1675,0.23731,1775,0.25224,1875,0.26717,1975,0.28209)}
.func VthFwd(Tj) {table(Tj,25,-0.35962,35,-0.31671,45,-0.2721,55,-0.2258,65,-0.17782,75,-0.12815,85,-0.076783,95,-0.02373,105,0.031012,115,0.087443,125,0.14556,135,0.20537,145,0.26687,155,0.33006,165,0.39494,175,0.46151,275,1.1272,375,1.7929,475,2.4585,575,3.1242,675,3.7899,775,4.4556,875,5.1212,975,5.7869,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.param Is=10.00u

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.100,4.395,0.127,4.373,0.160,4.344,0.203,4.309,0.257,4.273,0.326,4.221,0.412,4.166,0.522,4.097,0.661,4.022,0.837,3.926,1.060,3.821,1.343,3.700,1.700,3.562,2.153,3.411,2.727,3.247,3.453,3.070,4.372,2.885,5.537,2.688,7.011,2.457,8.878,1.965,11.243,1.721,14.237,1.523,18.029,1.339,22.830,1.159,28.911,0.998,36.610,0.870,46.360,0.766,58.707,0.676,74.342,0.598,94.141,0.531,119.212,0.471,150.961,0.418,191.165,0.372,242.077,0.331,306.547,0.295,388.187,0.263,491.569,0.235,622.485,0.219,788.266,0.217,998.198,0.215)}

.func Cdg(V) {table(V,0.100,2.051,0.127,2.009,0.160,1.956,0.203,1.888,0.257,1.806,0.326,1.709,0.412,1.599,0.522,1.485,0.661,1.372,0.837,1.269,1.060,1.170,1.343,1.068,1.700,0.964,2.153,0.859,2.727,0.759,3.453,0.665,4.372,0.573,5.537,0.485,7.011,0.387,8.878,0.110,11.243,0.070,14.237,0.061,18.029,0.054,22.830,0.045,28.911,0.038,36.610,0.033,46.360,0.030,58.707,0.027,74.342,0.025,94.141,0.023,119.212,0.021,150.961,0.019,191.165,0.018,242.077,0.016,306.547,0.015,388.187,0.014,491.569,0.013,622.485,0.013,788.266,0.013,998.198,0.013)}

.func Cgs(V) {table(V,-5.170,7.093,-4.480,5.478,-3.789,5.247,-3.099,5.276,-2.409,5.358,-1.718,5.501,-1.028,5.756,-0.338,6.529,0.353,7.349,1.043,7.954,1.733,8.377,2.424,8.586,3.114,8.686,3.804,8.751,4.495,8.797,5.185,8.835,5.876,8.866,6.566,8.892,7.256,8.915,7.947,8.936,8.637,8.955,9.327,8.971,10.018,8.986,10.708,8.999,11.398,9.012,12.089,9.023,12.779,9.033,13.469,9.043,14.160,9.052,14.850,9.060)}


.param Is_ideal=1.000000e-05
.param n_ideal=5.290260e-01
.param Rs_ideal=9.014041e-03
.ENDS 71

.SUBCKT 72 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*min(Is*(-1+exp(max(V(S,d2),-1n)/(nn(V(G,S))*nscal(V(Tj))))),1e5)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,4.1266e-13,1,2.0435e-10,1.5,1.0119e-07,2,5.0109e-05,2.5,0.024814,3,0.066963,3.5,0.29023,4,0.92883,4.5,2.2664,5,4.7153,5.5,8.6615,6,14.233,6.5,22.2456,7,32.6798,7.5,46.0181,8,61.0019,8.5,79.8241,9,100.6055,9.5,125.342,10,150.9301,10.5,178.7481,11,208.5572,11.5,229.4883,12,229.4883,12.5,229.4883,13,245.8667,13.5,262.8484,14,274.6488,14.5,287.5704,15,298.1309,15.5,298.1309,16,303.049,16.5,320.7284,17,331.5976,17.5,342.0276,18,352.0477,18.5,361.6846,19,370.9625,19.5,379.9037,20,388.5285,20.5,396.8556,21,404.9019,21.5,412.6835,22,420.2147,22.5,427.5091,23,434.5791,23.5,441.4364,24,448.0915,24.5,454.5546,25,460.8349,25.5,466.9411,26,472.8813,26.5,478.6632,27,484.2937,27.5,489.7797,28,495.1273,28.5,500.3424,29,505.4306,29.5,510.3971,30,515.2468)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.9535,5.5,0.85631,6,0.76249,6.5,0.65306,7,0.56792,7.5,0.49043,8,0.44254,8.5,0.38306,9,0.34325,9.5,0.29788,10,0.25194,10.5,0.23368,11,0.20519,11.5,0.19683,12,0.20421,12.5,0.21441,13,0.20402,13.5,0.19459,14,0.19321,14.5,0.18931,15,0.18762,15.5,0.19631,16,0.19931,16.5,0.20139,17,0.20279,17.5,0.20422,18,0.20567,18.5,0.20713,19,0.2086,19.5,0.21008,20,0.21155,20.5,0.21303,21,0.2145,21.5,0.21597,22,0.21743,22.5,0.21889,23,0.22033,23.5,0.22177,24,0.2232,24.5,0.22462,25,0.22603,25.5,0.22743,26,0.22881,26.5,0.23019,27,0.23156,27.5,0.23291,28,0.23426,28.5,0.23559,29,0.23691,29.5,0.23823,30,0.23953)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,6.466e-05,3,0.0001908,3.5,0.00073286,4,0.0019294,4.5,0.0041294,5,0.0078049,5.5,0.012897,6,0.020462,6.5,0.028818,7,0.041702,7.5,0.05965,8,0.07403,8.5,0.090792,9,0.11401,9.5,0.14597,10,0.17666,10.5,0.22141,11,0.33449,11.5,0.68708,12,2.0295,12.5,3.1918,13,3.6075,13.5,3.7452,14,3.7777,14.5,3.7874,15,3.7896,15.5,3.7896,16,3.7896,16.5,3.7896,17,3.7896,17.5,3.7896,18,3.7896,18.5,3.7896,19,3.7896,19.5,3.7896,20,3.7896,20.5,3.7896,21,3.7896,21.5,3.7896,22,3.7896,22.5,3.7896,23,3.7896,23.5,3.7896,24,3.7896,24.5,3.7896,25,3.7896,25.5,3.7896,26,3.7896,26.5,3.7896,27,3.7896,27.5,3.7896,28,3.7896,28.5,3.7896,29,3.7896,29.5,3.7896,30,3.7896)}
.func RTJ(Tj) {table(Tj,25,0.001,35,0.0011649,45,0.0014246,55,0.0017791,65,0.0022284,75,0.0027726,85,0.0034117,95,0.0041456,105,0.0049743,115,0.0058978,125,0.0069162,135,0.0080294,145,0.0092374,155,0.01054,165,0.011938,175,0.013431,275,0.028356,375,0.043282,475,0.058207,575,0.073133,675,0.088058,775,0.10298,875,0.11791,975,0.13284,1075,0.14776,1175,0.16269,1275,0.17761,1375,0.19254,1475,0.20746,1575,0.22239,1675,0.23731,1775,0.25224,1875,0.26717,1975,0.28209)}
.func VthFwd(Tj) {table(Tj,25,-0.35962,35,-0.31671,45,-0.2721,55,-0.2258,65,-0.17782,75,-0.12815,85,-0.076783,95,-0.02373,105,0.031012,115,0.087443,125,0.14556,135,0.20537,145,0.26687,155,0.33006,165,0.39494,175,0.46151,275,1.1272,375,1.7929,475,2.4585,575,3.1242,675,3.7899,775,4.4556,875,5.1212,975,5.7869,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.52903,-4,0.50611,-3,0.4737,-2,0.43173,-1,0.38119,0,0.32452,1,0.26741,2,0.21408,3,0.16722,4,0.13035,5,0.10828,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.009014,-4,0.0093494,-3,0.010249,-2,0.011803,-1,0.014,0,0.016531,1,0.01887,2,0.020701,3,0.021976,4,0.023121,5,0.025364,6,0.029331,7,0.035193,8,0.045138,9,0.058611,10,0.06249,11,0.075101,12,0.10246,13,0.14238,14,0.17663,15,0.22904,16,0.54827)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,25,0.67562,35,0.71027,45,0.7442,55,0.7774,65,0.80989,75,0.84165,85,0.8727,95,0.90302,105,0.93262,115,0.9615,125,0.98965,135,1.0171,145,1.0438,155,1.0698,165,1.0951,175,1.1196,275,1.3651,375,1.6106,475,1.8561,575,2.1015,675,2.347,775,2.5925,875,2.838,975,3.0835,1075,3.329,1175,3.5744,1275,3.8199,1375,4.0654,1475,4.3109,1575,4.5564,1675,4.8019,1775,5.0473,1875,5.2928,1975,5.5383)}
.func nscal(Tj) {table(Tj,25,1.186,35,1.1624,45,1.1396,55,1.1176,65,1.0965,75,1.0762,85,1.0567,95,1.0381,105,1.0204,115,1.0034,125,0.98736,135,0.97212,145,0.95773,155,0.94417,165,0.93146,175,0.91959,275,0.80089,375,0.68219,475,0.56349,575,0.44479,675,0.32609,775,0.20739,875,0.2,975,0.2,1075,0.2,1175,0.2,1275,0.2,1375,0.2,1475,0.2,1575,0.2,1675,0.2,1775,0.2,1875,0.2,1975,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.100,4.395,0.127,4.373,0.160,4.344,0.203,4.309,0.257,4.273,0.326,4.221,0.412,4.166,0.522,4.097,0.661,4.022,0.837,3.926,1.060,3.821,1.343,3.700,1.700,3.562,2.153,3.411,2.727,3.247,3.453,3.070,4.372,2.885,5.537,2.688,7.011,2.457,8.878,1.965,11.243,1.721,14.237,1.523,18.029,1.339,22.830,1.159,28.911,0.998,36.610,0.870,46.360,0.766,58.707,0.676,74.342,0.598,94.141,0.531,119.212,0.471,150.961,0.418,191.165,0.372,242.077,0.331,306.547,0.295,388.187,0.263,491.569,0.235,622.485,0.219,788.266,0.217,998.198,0.215)}

.func Cdg(V) {table(V,0.100,2.051,0.127,2.009,0.160,1.956,0.203,1.888,0.257,1.806,0.326,1.709,0.412,1.599,0.522,1.485,0.661,1.372,0.837,1.269,1.060,1.170,1.343,1.068,1.700,0.964,2.153,0.859,2.727,0.759,3.453,0.665,4.372,0.573,5.537,0.485,7.011,0.387,8.878,0.110,11.243,0.070,14.237,0.061,18.029,0.054,22.830,0.045,28.911,0.038,36.610,0.033,46.360,0.030,58.707,0.027,74.342,0.025,94.141,0.023,119.212,0.021,150.961,0.019,191.165,0.018,242.077,0.016,306.547,0.015,388.187,0.014,491.569,0.013,622.485,0.013,788.266,0.013,998.198,0.013)}

.func Cgs(V) {table(V,-5.170,7.093,-4.480,5.478,-3.789,5.247,-3.099,5.276,-2.409,5.358,-1.718,5.501,-1.028,5.756,-0.338,6.529,0.353,7.349,1.043,7.954,1.733,8.377,2.424,8.586,3.114,8.686,3.804,8.751,4.495,8.797,5.185,8.835,5.876,8.866,6.566,8.892,7.256,8.915,7.947,8.936,8.637,8.955,9.327,8.971,10.018,8.986,10.708,8.999,11.398,9.012,12.089,9.023,12.779,9.033,13.469,9.043,14.160,9.052,14.850,9.060)}


.ENDS 72

.SUBCKT 73 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {min((1+TM(V(Tj))/tau(V(Tj)))*Is*tau(V(Tj))*(-1+exp(max(V(S,d2),-1n)/(nscal(V(Tj))*nn(V(G,S))))),1e6)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,4.1266e-13,1,2.0435e-10,1.5,1.0119e-07,2,5.0109e-05,2.5,0.024814,3,0.066963,3.5,0.29023,4,0.92883,4.5,2.2664,5,4.7153,5.5,8.6615,6,14.233,6.5,22.2456,7,32.6798,7.5,46.0181,8,61.0019,8.5,79.8241,9,100.6055,9.5,125.342,10,150.9301,10.5,178.7481,11,208.5572,11.5,229.4883,12,229.4883,12.5,229.4883,13,245.8667,13.5,262.8484,14,274.6488,14.5,287.5704,15,298.1309,15.5,298.1309,16,303.049,16.5,320.7284,17,331.5976,17.5,342.0276,18,352.0477,18.5,361.6846,19,370.9625,19.5,379.9037,20,388.5285,20.5,396.8556,21,404.9019,21.5,412.6835,22,420.2147,22.5,427.5091,23,434.5791,23.5,441.4364,24,448.0915,24.5,454.5546,25,460.8349,25.5,466.9411,26,472.8813,26.5,478.6632,27,484.2937,27.5,489.7797,28,495.1273,28.5,500.3424,29,505.4306,29.5,510.3971,30,515.2468)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.9535,5.5,0.85631,6,0.76249,6.5,0.65306,7,0.56792,7.5,0.49043,8,0.44254,8.5,0.38306,9,0.34325,9.5,0.29788,10,0.25194,10.5,0.23368,11,0.20519,11.5,0.19683,12,0.20421,12.5,0.21441,13,0.20402,13.5,0.19459,14,0.19321,14.5,0.18931,15,0.18762,15.5,0.19631,16,0.19931,16.5,0.20139,17,0.20279,17.5,0.20422,18,0.20567,18.5,0.20713,19,0.2086,19.5,0.21008,20,0.21155,20.5,0.21303,21,0.2145,21.5,0.21597,22,0.21743,22.5,0.21889,23,0.22033,23.5,0.22177,24,0.2232,24.5,0.22462,25,0.22603,25.5,0.22743,26,0.22881,26.5,0.23019,27,0.23156,27.5,0.23291,28,0.23426,28.5,0.23559,29,0.23691,29.5,0.23823,30,0.23953)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,6.466e-05,3,0.0001908,3.5,0.00073286,4,0.0019294,4.5,0.0041294,5,0.0078049,5.5,0.012897,6,0.020462,6.5,0.028818,7,0.041702,7.5,0.05965,8,0.07403,8.5,0.090792,9,0.11401,9.5,0.14597,10,0.17666,10.5,0.22141,11,0.33449,11.5,0.68708,12,2.0295,12.5,3.1918,13,3.6075,13.5,3.7452,14,3.7777,14.5,3.7874,15,3.7896,15.5,3.7896,16,3.7896,16.5,3.7896,17,3.7896,17.5,3.7896,18,3.7896,18.5,3.7896,19,3.7896,19.5,3.7896,20,3.7896,20.5,3.7896,21,3.7896,21.5,3.7896,22,3.7896,22.5,3.7896,23,3.7896,23.5,3.7896,24,3.7896,24.5,3.7896,25,3.7896,25.5,3.7896,26,3.7896,26.5,3.7896,27,3.7896,27.5,3.7896,28,3.7896,28.5,3.7896,29,3.7896,29.5,3.7896,30,3.7896)}
.func RTJ(Tj) {table(Tj,25,0.001,35,0.0011649,45,0.0014246,55,0.0017791,65,0.0022284,75,0.0027726,85,0.0034117,95,0.0041456,105,0.0049743,115,0.0058978,125,0.0069162,135,0.0080294,145,0.0092374,155,0.01054,165,0.011938,175,0.013431,275,0.028356,375,0.043282,475,0.058207,575,0.073133,675,0.088058,775,0.10298,875,0.11791,975,0.13284,1075,0.14776,1175,0.16269,1275,0.17761,1375,0.19254,1475,0.20746,1575,0.22239,1675,0.23731,1775,0.25224,1875,0.26717,1975,0.28209)}
.func VthFwd(Tj) {table(Tj,25,-0.35962,35,-0.31671,45,-0.2721,55,-0.2258,65,-0.17782,75,-0.12815,85,-0.076783,95,-0.02373,105,0.031012,115,0.087443,125,0.14556,135,0.20537,145,0.26687,155,0.33006,165,0.39494,175,0.46151,275,1.1272,375,1.7929,475,2.4585,575,3.1242,675,3.7899,775,4.4556,875,5.1212,975,5.7869,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.52903,-4,0.50611,-3,0.4737,-2,0.43173,-1,0.38119,0,0.32452,1,0.26741,2,0.21408,3,0.16722,4,0.13035,5,0.10828,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.009014,-4,0.0093494,-3,0.010249,-2,0.011803,-1,0.014,0,0.016531,1,0.01887,2,0.020701,3,0.021976,4,0.023121,5,0.025364,6,0.029331,7,0.035193,8,0.045138,9,0.058611,10,0.06249,11,0.075101,12,0.10246,13,0.14238,14,0.17663,15,0.22904,16,0.54827)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,25,0.67562,35,0.71027,45,0.7442,55,0.7774,65,0.80989,75,0.84165,85,0.8727,95,0.90302,105,0.93262,115,0.9615,125,0.98965,135,1.0171,145,1.0438,155,1.0698,165,1.0951,175,1.1196,275,1.3651,375,1.6106,475,1.8561,575,2.1015,675,2.347,775,2.5925,875,2.838,975,3.0835,1075,3.329,1175,3.5744,1275,3.8199,1375,4.0654,1475,4.3109,1575,4.5564,1675,4.8019,1775,5.0473,1875,5.2928,1975,5.5383)}
.func nscal(Tj) {table(Tj,25,1.186,35,1.1624,45,1.1396,55,1.1176,65,1.0965,75,1.0762,85,1.0567,95,1.0381,105,1.0204,115,1.0034,125,0.98736,135,0.97212,145,0.95773,155,0.94417,165,0.93146,175,0.91959,275,0.80089,375,0.68219,475,0.56349,575,0.44479,675,0.32609,775,0.20739,875,0.2,975,0.2,1075,0.2,1175,0.2,1275,0.2,1375,0.2,1475,0.2,1575,0.2,1675,0.2,1775,0.2,1875,0.2,1975,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.100,4.395,0.127,4.373,0.160,4.344,0.203,4.309,0.257,4.273,0.326,4.221,0.412,4.166,0.522,4.097,0.661,4.022,0.837,3.926,1.060,3.821,1.343,3.700,1.700,3.562,2.153,3.411,2.727,3.247,3.453,3.070,4.372,2.885,5.537,2.688,7.011,2.457,8.878,1.965,11.243,1.721,14.237,1.523,18.029,1.339,22.830,1.159,28.911,0.998,36.610,0.870,46.360,0.766,58.707,0.676,74.342,0.598,94.141,0.531,119.212,0.471,150.961,0.418,191.165,0.372,242.077,0.331,306.547,0.295,388.187,0.263,491.569,0.235,622.485,0.219,788.266,0.217,998.198,0.215)}

.func Cdg(V) {table(V,0.100,2.051,0.127,2.009,0.160,1.956,0.203,1.888,0.257,1.806,0.326,1.709,0.412,1.599,0.522,1.485,0.661,1.372,0.837,1.269,1.060,1.170,1.343,1.068,1.700,0.964,2.153,0.859,2.727,0.759,3.453,0.665,4.372,0.573,5.537,0.485,7.011,0.387,8.878,0.110,11.243,0.070,14.237,0.061,18.029,0.054,22.830,0.045,28.911,0.038,36.610,0.033,46.360,0.030,58.707,0.027,74.342,0.025,94.141,0.023,119.212,0.021,150.961,0.019,191.165,0.018,242.077,0.016,306.547,0.015,388.187,0.014,491.569,0.013,622.485,0.013,788.266,0.013,998.198,0.013)}

.func Cgs(V) {table(V,-5.170,7.093,-4.480,5.478,-3.789,5.247,-3.099,5.276,-2.409,5.358,-1.718,5.501,-1.028,5.756,-0.338,6.529,0.353,7.349,1.043,7.954,1.733,8.377,2.424,8.586,3.114,8.686,3.804,8.751,4.495,8.797,5.185,8.835,5.876,8.866,6.566,8.892,7.256,8.915,7.947,8.936,8.637,8.955,9.327,8.971,10.018,8.986,10.708,8.999,11.398,9.012,12.089,9.023,12.779,9.033,13.469,9.043,14.160,9.052,14.850,9.060)}


.ENDS 73

.SUBCKT 81 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,9.7397e-14,1,1.1383e-11,1.5,1.3304e-09,2,1.555e-07,2.5,1.8174e-05,3,0.0021241,3.5,0.24826,4,0.87341,4.5,2.3019,5,4.9361,5.5,9.1203,6,14.9024,6.5,23.4127,7,34.6679,7.5,49.2982,8,67.4505,8.5,89.1954,9,112.8625,9.5,140.517,10,171.118,10.5,206.4074,11,241.9426,11.5,273.954,12,297.9976,12.5,337.5679,13,355.7006,13.5,379.4069,14,379.407,14.5,379.407,15,405.08,15.5,414.9786,16,425.3446,16.5,433.3956,17,441.4135,17.5,449.6386,18,454.2963,18.5,467.1974,19,476.0083,19.5,484.4177,20,492.4537,20.5,500.142,21,507.5057,21.5,514.5662,22,521.3426,22.5,527.8528,23,534.1129,23.5,540.1379,24,545.9414,24.5,551.5361,25,556.9337,25.5,562.145,26,567.18,26.5,572.048,27,576.7577,27.5,581.317,28,585.7335,28.5,590.0141,29,594.1655,29.5,598.1936,30,602.1042)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.7693,5.5,0.84623,6,0.8995,6.5,0.77846,7,0.68589,7.5,0.59204,8,0.5109,8.5,0.44514,9,0.40329,9.5,0.35574,10,0.31528,10.5,0.2772,11,0.24876,11.5,0.23064,12,0.22028,12.5,0.19908,13,0.2018,13.5,0.19666,14,0.21179,14.5,0.22698,15,0.21417,15.5,0.21581,16,0.21676,16.5,0.21755,17,0.21818,17.5,0.21845,18,0.22039,18.5,0.22354,19,0.22576,19.5,0.22793,20,0.23005,20.5,0.23213,21,0.23416,21.5,0.23615,22,0.2381,22.5,0.24001,23,0.24188,23.5,0.24371,24,0.24551,24.5,0.24727,25,0.249,25.5,0.25069,26,0.25235,26.5,0.25399,27,0.25559,27.5,0.25716,28,0.25871,28.5,0.26023,29,0.26172,29.5,0.26318,30,0.26463)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0,3.5,0.00062423,4,0.0019461,4.5,0.0026566,5,0.005798,5.5,0.011774,6,0.028753,6.5,0.047579,7,0.071038,7.5,0.10186,8,0.14292,8.5,0.17902,9,0.25644,9.5,0.34194,10,0.48048,10.5,0.58475,11,0.7624,11.5,1.1472,12,1.9637,12.5,2.0298,13,2.1261,13.5,2.1308,14,2.1376,14.5,2.1379,15,2.1383,15.5,2.1383,16,2.1383,16.5,2.1383,17,2.1383,17.5,2.1383,18,2.1383,18.5,2.1383,19,2.1383,19.5,2.1383,20,2.1383,20.5,2.1383,21,2.1383,21.5,2.1383,22,2.1383,22.5,2.1383,23,2.1383,23.5,2.1383,24,2.1383,24.5,2.1383,25,2.1383,25.5,2.1383,26,2.1383,26.5,2.1383,27,2.1383,27.5,2.1383,28,2.1383,28.5,2.1383,29,2.1383,29.5,2.1383,30,2.1383)}
.func RTJ(Tj) {table(Tj,25,0.001,35,0.0012135,45,0.0014983,55,0.0018544,65,0.0022818,75,0.0027805,85,0.0033505,95,0.0039919,105,0.0047045,115,0.0054885,125,0.0063437,135,0.0072703,145,0.0082682,155,0.0093373,165,0.010478,175,0.01169,275,0.023808,375,0.035926,475,0.048044,575,0.060162,675,0.07228,775,0.084398,875,0.096516,975,0.10863,1075,0.12075,1175,0.13287,1275,0.14499,1375,0.15711,1475,0.16922,1575,0.18134,1675,0.19346,1775,0.20558,1875,0.2177,1975,0.22981)}
.func VthFwd(Tj) {table(Tj,25,-0.50924,35,-0.44132,45,-0.37343,55,-0.30556,65,-0.23773,75,-0.16992,85,-0.10215,95,-0.034399,105,0.033321,115,0.10101,125,0.16867,135,0.23631,145,0.30391,155,0.37149,165,0.43904,175,0.50656,275,1.1818,375,1.857,475,2.5322,575,3.2074,675,3.8826,775,4.5578,875,5.233,975,5.9082,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.param Is=10.00u

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.002,5.470,0.003,5.472,0.005,5.467,0.007,5.469,0.009,5.472,0.013,5.461,0.018,5.455,0.025,5.447,0.035,5.447,0.049,5.424,0.068,5.409,0.095,5.390,0.132,5.337,0.184,5.318,0.256,5.238,0.357,5.171,0.496,5.066,0.691,4.937,0.962,4.782,1.339,4.584,1.864,4.352,2.594,4.087,3.611,3.785,5.026,3.465,6.996,3.119,9.739,2.499,13.556,2.009,18.869,1.683,26.265,1.373,36.559,1.124,50.888,0.939,70.833,0.790,98.596,0.667,137.241,0.565,191.032,0.481,265.906,0.409,370.127,0.349,515.196,0.299,717.126,0.269,998.200,0.266)}

.func Cdg(V) {table(V,0.002,2.434,0.003,2.433,0.005,2.433,0.007,2.434,0.009,2.425,0.013,2.425,0.018,2.410,0.025,2.389,0.035,2.373,0.049,2.340,0.068,2.312,0.095,2.262,0.132,2.197,0.184,2.099,0.256,1.988,0.357,1.836,0.496,1.687,0.691,1.531,0.962,1.392,1.339,1.238,1.864,1.080,2.594,0.921,3.611,0.774,5.026,0.632,6.996,0.488,9.739,0.200,13.556,0.088,18.869,0.073,26.265,0.058,36.559,0.046,50.888,0.040,70.833,0.035,98.596,0.031,137.241,0.028,191.032,0.025,265.906,0.022,370.127,0.020,515.196,0.018,717.126,0.017,998.200,0.018)}

.func Cgs(V) {table(V,-5.160,9.375,-4.470,7.476,-3.781,6.990,-3.091,7.025,-2.401,7.122,-1.712,7.293,-1.022,7.560,-0.332,8.403,0.357,9.419,1.047,10.118,1.737,10.667,2.426,10.977,3.116,11.117,3.806,11.201,4.495,11.256,5.185,11.297,5.874,11.330,6.564,11.359,7.254,11.383,7.943,11.406,8.633,11.425,9.323,11.443,10.012,11.459,10.702,11.475,11.392,11.490,12.081,11.503,12.771,11.516,13.461,11.528,14.150,11.539,14.840,11.550)}


.param Is_ideal=1.000000e-05
.param n_ideal=5.046898e-01
.param Rs_ideal=7.026284e-03
.ENDS 81

.SUBCKT 82 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*min(Is*(-1+exp(max(V(S,d2),-1n)/(nn(V(G,S))*nscal(V(Tj))))),1e5)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,9.7397e-14,1,1.1383e-11,1.5,1.3304e-09,2,1.555e-07,2.5,1.8174e-05,3,0.0021241,3.5,0.24826,4,0.87341,4.5,2.3019,5,4.9361,5.5,9.1203,6,14.9024,6.5,23.4127,7,34.6679,7.5,49.2982,8,67.4505,8.5,89.1954,9,112.8625,9.5,140.517,10,171.118,10.5,206.4074,11,241.9426,11.5,273.954,12,297.9976,12.5,337.5679,13,355.7006,13.5,379.4069,14,379.407,14.5,379.407,15,405.08,15.5,414.9786,16,425.3446,16.5,433.3956,17,441.4135,17.5,449.6386,18,454.2963,18.5,467.1974,19,476.0083,19.5,484.4177,20,492.4537,20.5,500.142,21,507.5057,21.5,514.5662,22,521.3426,22.5,527.8528,23,534.1129,23.5,540.1379,24,545.9414,24.5,551.5361,25,556.9337,25.5,562.145,26,567.18,26.5,572.048,27,576.7577,27.5,581.317,28,585.7335,28.5,590.0141,29,594.1655,29.5,598.1936,30,602.1042)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.7693,5.5,0.84623,6,0.8995,6.5,0.77846,7,0.68589,7.5,0.59204,8,0.5109,8.5,0.44514,9,0.40329,9.5,0.35574,10,0.31528,10.5,0.2772,11,0.24876,11.5,0.23064,12,0.22028,12.5,0.19908,13,0.2018,13.5,0.19666,14,0.21179,14.5,0.22698,15,0.21417,15.5,0.21581,16,0.21676,16.5,0.21755,17,0.21818,17.5,0.21845,18,0.22039,18.5,0.22354,19,0.22576,19.5,0.22793,20,0.23005,20.5,0.23213,21,0.23416,21.5,0.23615,22,0.2381,22.5,0.24001,23,0.24188,23.5,0.24371,24,0.24551,24.5,0.24727,25,0.249,25.5,0.25069,26,0.25235,26.5,0.25399,27,0.25559,27.5,0.25716,28,0.25871,28.5,0.26023,29,0.26172,29.5,0.26318,30,0.26463)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0,3.5,0.00062423,4,0.0019461,4.5,0.0026566,5,0.005798,5.5,0.011774,6,0.028753,6.5,0.047579,7,0.071038,7.5,0.10186,8,0.14292,8.5,0.17902,9,0.25644,9.5,0.34194,10,0.48048,10.5,0.58475,11,0.7624,11.5,1.1472,12,1.9637,12.5,2.0298,13,2.1261,13.5,2.1308,14,2.1376,14.5,2.1379,15,2.1383,15.5,2.1383,16,2.1383,16.5,2.1383,17,2.1383,17.5,2.1383,18,2.1383,18.5,2.1383,19,2.1383,19.5,2.1383,20,2.1383,20.5,2.1383,21,2.1383,21.5,2.1383,22,2.1383,22.5,2.1383,23,2.1383,23.5,2.1383,24,2.1383,24.5,2.1383,25,2.1383,25.5,2.1383,26,2.1383,26.5,2.1383,27,2.1383,27.5,2.1383,28,2.1383,28.5,2.1383,29,2.1383,29.5,2.1383,30,2.1383)}
.func RTJ(Tj) {table(Tj,25,0.001,35,0.0012135,45,0.0014983,55,0.0018544,65,0.0022818,75,0.0027805,85,0.0033505,95,0.0039919,105,0.0047045,115,0.0054885,125,0.0063437,135,0.0072703,145,0.0082682,155,0.0093373,165,0.010478,175,0.01169,275,0.023808,375,0.035926,475,0.048044,575,0.060162,675,0.07228,775,0.084398,875,0.096516,975,0.10863,1075,0.12075,1175,0.13287,1275,0.14499,1375,0.15711,1475,0.16922,1575,0.18134,1675,0.19346,1775,0.20558,1875,0.2177,1975,0.22981)}
.func VthFwd(Tj) {table(Tj,25,-0.50924,35,-0.44132,45,-0.37343,55,-0.30556,65,-0.23773,75,-0.16992,85,-0.10215,95,-0.034399,105,0.033321,115,0.10101,125,0.16867,135,0.23631,145,0.30391,155,0.37149,165,0.43904,175,0.50656,275,1.1818,375,1.857,475,2.5322,575,3.2074,675,3.8826,775,4.5578,875,5.233,975,5.9082,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.50469,-4,0.48266,-3,0.45202,-2,0.41121,-1,0.35998,0,0.30242,1,0.24717,2,0.19834,3,0.15688,4,0.12643,5,0.105,6,0.10057,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.0070263,-4,0.0072801,-3,0.0079638,-2,0.0092221,-1,0.011144,0,0.013396,1,0.015232,2,0.016371,3,0.016877,4,0.016877,5,0.017438,6,0.019955,7,0.023206,8,0.02756,9,0.034017,10,0.039153,11,0.042077,12,0.046402,13,0.051427,14,0.066668,15,0.081057,16,0.095952,17,0.1068,18,0.12167)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,25,0.9776,35,0.96763,45,0.96149,55,0.95917,65,0.96069,75,0.96604,85,0.97522,95,0.98822,105,1.0051,115,1.0257,125,1.0502,135,1.0785,145,1.1107,155,1.1467,165,1.1865,175,1.2302,275,1.6666,375,2.1031,475,2.5395,575,2.976,675,3.4124,775,3.8489,875,4.2853,975,4.7218,1075,5.1583,1175,5.5947,1275,6.0312,1375,6.4676,1475,6.9041,1575,7.3405,1675,7.777,1775,8.2134,1875,8.6499,1975,9.0863)}
.func nscal(Tj) {table(Tj,25,1.0551,35,1.0464,45,1.0377,55,1.0289,65,1.0201,75,1.0113,85,1.0024,95,0.99351,105,0.9846,115,0.97565,125,0.96668,135,0.95768,145,0.94864,155,0.93958,165,0.93049,175,0.92137,275,0.83015,375,0.73894,475,0.64772,575,0.55651,675,0.46529,775,0.37408,875,0.28286,975,0.2,1075,0.2,1175,0.2,1275,0.2,1375,0.2,1475,0.2,1575,0.2,1675,0.2,1775,0.2,1875,0.2,1975,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.002,5.470,0.003,5.472,0.005,5.467,0.007,5.469,0.009,5.472,0.013,5.461,0.018,5.455,0.025,5.447,0.035,5.447,0.049,5.424,0.068,5.409,0.095,5.390,0.132,5.337,0.184,5.318,0.256,5.238,0.357,5.171,0.496,5.066,0.691,4.937,0.962,4.782,1.339,4.584,1.864,4.352,2.594,4.087,3.611,3.785,5.026,3.465,6.996,3.119,9.739,2.499,13.556,2.009,18.869,1.683,26.265,1.373,36.559,1.124,50.888,0.939,70.833,0.790,98.596,0.667,137.241,0.565,191.032,0.481,265.906,0.409,370.127,0.349,515.196,0.299,717.126,0.269,998.200,0.266)}

.func Cdg(V) {table(V,0.002,2.434,0.003,2.433,0.005,2.433,0.007,2.434,0.009,2.425,0.013,2.425,0.018,2.410,0.025,2.389,0.035,2.373,0.049,2.340,0.068,2.312,0.095,2.262,0.132,2.197,0.184,2.099,0.256,1.988,0.357,1.836,0.496,1.687,0.691,1.531,0.962,1.392,1.339,1.238,1.864,1.080,2.594,0.921,3.611,0.774,5.026,0.632,6.996,0.488,9.739,0.200,13.556,0.088,18.869,0.073,26.265,0.058,36.559,0.046,50.888,0.040,70.833,0.035,98.596,0.031,137.241,0.028,191.032,0.025,265.906,0.022,370.127,0.020,515.196,0.018,717.126,0.017,998.200,0.018)}

.func Cgs(V) {table(V,-5.160,9.375,-4.470,7.476,-3.781,6.990,-3.091,7.025,-2.401,7.122,-1.712,7.293,-1.022,7.560,-0.332,8.403,0.357,9.419,1.047,10.118,1.737,10.667,2.426,10.977,3.116,11.117,3.806,11.201,4.495,11.256,5.185,11.297,5.874,11.330,6.564,11.359,7.254,11.383,7.943,11.406,8.633,11.425,9.323,11.443,10.012,11.459,10.702,11.475,11.392,11.490,12.081,11.503,12.771,11.516,13.461,11.528,14.150,11.539,14.840,11.550)}


.ENDS 82

.SUBCKT 83 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {min((1+TM(V(Tj))/tau(V(Tj)))*Is*tau(V(Tj))*(-1+exp(max(V(S,d2),-1n)/(nscal(V(Tj))*nn(V(G,S))))),1e6)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,9.7397e-14,1,1.1383e-11,1.5,1.3304e-09,2,1.555e-07,2.5,1.8174e-05,3,0.0021241,3.5,0.24826,4,0.87341,4.5,2.3019,5,4.9361,5.5,9.1203,6,14.9024,6.5,23.4127,7,34.6679,7.5,49.2982,8,67.4505,8.5,89.1954,9,112.8625,9.5,140.517,10,171.118,10.5,206.4074,11,241.9426,11.5,273.954,12,297.9976,12.5,337.5679,13,355.7006,13.5,379.4069,14,379.407,14.5,379.407,15,405.08,15.5,414.9786,16,425.3446,16.5,433.3956,17,441.4135,17.5,449.6386,18,454.2963,18.5,467.1974,19,476.0083,19.5,484.4177,20,492.4537,20.5,500.142,21,507.5057,21.5,514.5662,22,521.3426,22.5,527.8528,23,534.1129,23.5,540.1379,24,545.9414,24.5,551.5361,25,556.9337,25.5,562.145,26,567.18,26.5,572.048,27,576.7577,27.5,581.317,28,585.7335,28.5,590.0141,29,594.1655,29.5,598.1936,30,602.1042)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.7693,5.5,0.84623,6,0.8995,6.5,0.77846,7,0.68589,7.5,0.59204,8,0.5109,8.5,0.44514,9,0.40329,9.5,0.35574,10,0.31528,10.5,0.2772,11,0.24876,11.5,0.23064,12,0.22028,12.5,0.19908,13,0.2018,13.5,0.19666,14,0.21179,14.5,0.22698,15,0.21417,15.5,0.21581,16,0.21676,16.5,0.21755,17,0.21818,17.5,0.21845,18,0.22039,18.5,0.22354,19,0.22576,19.5,0.22793,20,0.23005,20.5,0.23213,21,0.23416,21.5,0.23615,22,0.2381,22.5,0.24001,23,0.24188,23.5,0.24371,24,0.24551,24.5,0.24727,25,0.249,25.5,0.25069,26,0.25235,26.5,0.25399,27,0.25559,27.5,0.25716,28,0.25871,28.5,0.26023,29,0.26172,29.5,0.26318,30,0.26463)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0,3.5,0.00062423,4,0.0019461,4.5,0.0026566,5,0.005798,5.5,0.011774,6,0.028753,6.5,0.047579,7,0.071038,7.5,0.10186,8,0.14292,8.5,0.17902,9,0.25644,9.5,0.34194,10,0.48048,10.5,0.58475,11,0.7624,11.5,1.1472,12,1.9637,12.5,2.0298,13,2.1261,13.5,2.1308,14,2.1376,14.5,2.1379,15,2.1383,15.5,2.1383,16,2.1383,16.5,2.1383,17,2.1383,17.5,2.1383,18,2.1383,18.5,2.1383,19,2.1383,19.5,2.1383,20,2.1383,20.5,2.1383,21,2.1383,21.5,2.1383,22,2.1383,22.5,2.1383,23,2.1383,23.5,2.1383,24,2.1383,24.5,2.1383,25,2.1383,25.5,2.1383,26,2.1383,26.5,2.1383,27,2.1383,27.5,2.1383,28,2.1383,28.5,2.1383,29,2.1383,29.5,2.1383,30,2.1383)}
.func RTJ(Tj) {table(Tj,25,0.001,35,0.0012135,45,0.0014983,55,0.0018544,65,0.0022818,75,0.0027805,85,0.0033505,95,0.0039919,105,0.0047045,115,0.0054885,125,0.0063437,135,0.0072703,145,0.0082682,155,0.0093373,165,0.010478,175,0.01169,275,0.023808,375,0.035926,475,0.048044,575,0.060162,675,0.07228,775,0.084398,875,0.096516,975,0.10863,1075,0.12075,1175,0.13287,1275,0.14499,1375,0.15711,1475,0.16922,1575,0.18134,1675,0.19346,1775,0.20558,1875,0.2177,1975,0.22981)}
.func VthFwd(Tj) {table(Tj,25,-0.50924,35,-0.44132,45,-0.37343,55,-0.30556,65,-0.23773,75,-0.16992,85,-0.10215,95,-0.034399,105,0.033321,115,0.10101,125,0.16867,135,0.23631,145,0.30391,155,0.37149,165,0.43904,175,0.50656,275,1.1818,375,1.857,475,2.5322,575,3.2074,675,3.8826,775,4.5578,875,5.233,975,5.9082,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.50469,-4,0.48266,-3,0.45202,-2,0.41121,-1,0.35998,0,0.30242,1,0.24717,2,0.19834,3,0.15688,4,0.12643,5,0.105,6,0.10057,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.0070263,-4,0.0072801,-3,0.0079638,-2,0.0092221,-1,0.011144,0,0.013396,1,0.015232,2,0.016371,3,0.016877,4,0.016877,5,0.017438,6,0.019955,7,0.023206,8,0.02756,9,0.034017,10,0.039153,11,0.042077,12,0.046402,13,0.051427,14,0.066668,15,0.081057,16,0.095952,17,0.1068,18,0.12167)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,25,0.9776,35,0.96763,45,0.96149,55,0.95917,65,0.96069,75,0.96604,85,0.97522,95,0.98822,105,1.0051,115,1.0257,125,1.0502,135,1.0785,145,1.1107,155,1.1467,165,1.1865,175,1.2302,275,1.6666,375,2.1031,475,2.5395,575,2.976,675,3.4124,775,3.8489,875,4.2853,975,4.7218,1075,5.1583,1175,5.5947,1275,6.0312,1375,6.4676,1475,6.9041,1575,7.3405,1675,7.777,1775,8.2134,1875,8.6499,1975,9.0863)}
.func nscal(Tj) {table(Tj,25,1.0551,35,1.0464,45,1.0377,55,1.0289,65,1.0201,75,1.0113,85,1.0024,95,0.99351,105,0.9846,115,0.97565,125,0.96668,135,0.95768,145,0.94864,155,0.93958,165,0.93049,175,0.92137,275,0.83015,375,0.73894,475,0.64772,575,0.55651,675,0.46529,775,0.37408,875,0.28286,975,0.2,1075,0.2,1175,0.2,1275,0.2,1375,0.2,1475,0.2,1575,0.2,1675,0.2,1775,0.2,1875,0.2,1975,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.002,5.470,0.003,5.472,0.005,5.467,0.007,5.469,0.009,5.472,0.013,5.461,0.018,5.455,0.025,5.447,0.035,5.447,0.049,5.424,0.068,5.409,0.095,5.390,0.132,5.337,0.184,5.318,0.256,5.238,0.357,5.171,0.496,5.066,0.691,4.937,0.962,4.782,1.339,4.584,1.864,4.352,2.594,4.087,3.611,3.785,5.026,3.465,6.996,3.119,9.739,2.499,13.556,2.009,18.869,1.683,26.265,1.373,36.559,1.124,50.888,0.939,70.833,0.790,98.596,0.667,137.241,0.565,191.032,0.481,265.906,0.409,370.127,0.349,515.196,0.299,717.126,0.269,998.200,0.266)}

.func Cdg(V) {table(V,0.002,2.434,0.003,2.433,0.005,2.433,0.007,2.434,0.009,2.425,0.013,2.425,0.018,2.410,0.025,2.389,0.035,2.373,0.049,2.340,0.068,2.312,0.095,2.262,0.132,2.197,0.184,2.099,0.256,1.988,0.357,1.836,0.496,1.687,0.691,1.531,0.962,1.392,1.339,1.238,1.864,1.080,2.594,0.921,3.611,0.774,5.026,0.632,6.996,0.488,9.739,0.200,13.556,0.088,18.869,0.073,26.265,0.058,36.559,0.046,50.888,0.040,70.833,0.035,98.596,0.031,137.241,0.028,191.032,0.025,265.906,0.022,370.127,0.020,515.196,0.018,717.126,0.017,998.200,0.018)}

.func Cgs(V) {table(V,-5.160,9.375,-4.470,7.476,-3.781,6.990,-3.091,7.025,-2.401,7.122,-1.712,7.293,-1.022,7.560,-0.332,8.403,0.357,9.419,1.047,10.118,1.737,10.667,2.426,10.977,3.116,11.117,3.806,11.201,4.495,11.256,5.185,11.297,5.874,11.330,6.564,11.359,7.254,11.383,7.943,11.406,8.633,11.425,9.323,11.443,10.012,11.459,10.702,11.475,11.392,11.490,12.081,11.503,12.771,11.516,13.461,11.528,14.150,11.539,14.840,11.550)}


.ENDS 83

.SUBCKT 91 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,1.4864e-13,1,2.6513e-11,1.5,4.7292e-09,2,8.4355e-07,2.5,0.00015047,3,0.026839,3.5,0.25883,4,0.91062,4.5,2.4,5,5.146,5.5,9.5088,6,15.5346,6.5,24.4045,7,36.1338,7.5,51.3787,8,70.2906,8.5,92.9415,9,117.5907,9.5,146.3873,10,178.2485,10.5,214.982,11,251.9658,11.5,285.1637,12,310.0667,12.5,351.2174,13,369.9801,13.5,394.5846,14,394.5846,14.5,394.5847,15,420.8848,15.5,431.1059,16,441.8095,16.5,450.1238,17,458.3882,17.5,466.8726,18,471.6701,18.5,499.9755,19,510.793,19.5,521.1876,20,531.1861,20.5,540.8128,21,550.09,21.5,559.0382,22,567.6765,22.5,576.022,23,584.0909,23.5,591.8981,24,599.4574,24.5,606.7814,25,613.8821,25.5,620.7706,26,627.4571,26.5,633.9513,27,640.2622,27.5,646.3982,28,652.3672,28.5,658.1766,29,663.8333,29.5,669.3439,30,674.7145)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.7698,5.5,0.84678,6,0.90145,6.5,0.78076,7,0.68853,7.5,0.59486,8,0.5138,8.5,0.44808,9,0.40637,9.5,0.35877,10,0.31821,10.5,0.27998,11,0.25142,11.5,0.23342,12,0.22323,12.5,0.20181,13,0.20482,13.5,0.19974,14,0.21528,14.5,0.23092,15,0.21828,15.5,0.2201,16,0.22121,16.5,0.22212,17,0.22289,17.5,0.22328,18,0.22535,18.5,0.23278,19,0.23578,19.5,0.23875,20,0.2417,20.5,0.24463,21,0.24752,21.5,0.25039,22,0.25324,22.5,0.25606,23,0.25886,23.5,0.26164,24,0.26439,24.5,0.26712,25,0.26983,25.5,0.27251,26,0.27518,26.5,0.27783,27,0.28046,27.5,0.28306,28,0.28565,28.5,0.28822,29,0.29078,29.5,0.29331,30,0.29583)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0.00029809,3.5,0.0006508,4,0.0020287,4.5,0.002768,5,0.0060486,5.5,0.012271,6,0.030013,6.5,0.049682,7,0.074215,7.5,0.10647,8,0.14947,8.5,0.18738,9,0.26847,9.5,0.35812,10,0.50321,10.5,0.61277,11,0.79901,11.5,1.2056,12,2.0642,12.5,2.1343,13,2.2356,13.5,2.2406,14,2.2477,14.5,2.2481,15,2.2485,15.5,2.2485,16,2.2485,16.5,2.2485,17,2.2485,17.5,2.2485,18,2.2485,18.5,2.2485,19,2.2485,19.5,2.2485,20,2.2485,20.5,2.2485,21,2.2485,21.5,2.2485,22,2.2485,22.5,2.2485,23,2.2485,23.5,2.2485,24,2.2485,24.5,2.2485,25,2.2485,25.5,2.2485,26,2.2485,26.5,2.2485,27,2.2485,27.5,2.2485,28,2.2485,28.5,2.2485,29,2.2485,29.5,2.2485,30,2.2485)}
.func RTJ(Tj) {table(Tj,25,0.001,35,0.001298,45,0.0016428,55,0.0020345,65,0.002473,75,0.0029584,85,0.0034907,95,0.0040698,105,0.0046957,115,0.0053686,125,0.0060883,135,0.0068548,145,0.0076682,155,0.0085285,165,0.0094356,175,0.01039,275,0.019929,375,0.029469,475,0.039009,575,0.048549,675,0.058089,775,0.067629,875,0.077169,975,0.086708,1075,0.096248,1175,0.10579,1275,0.11533,1375,0.12487,1475,0.13441,1575,0.14395,1675,0.15349,1775,0.16303,1875,0.17257,1975,0.18211)}
.func VthFwd(Tj) {table(Tj,25,-0.72654,35,-0.62171,45,-0.51928,55,-0.41925,65,-0.32163,75,-0.22642,85,-0.13361,95,-0.0432,105,0.044801,115,0.1304,125,0.21359,135,0.29437,145,0.37276,155,0.44873,165,0.5223,175,0.59347,275,1.3051,375,2.0168,475,2.7285,575,3.4401,675,4.1518,775,4.8635,875,5.5751,975,6,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.param Is=10.00u

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.002,5.470,0.003,5.472,0.005,5.467,0.007,5.469,0.009,5.472,0.013,5.461,0.018,5.455,0.025,5.447,0.035,5.447,0.049,5.424,0.068,5.409,0.095,5.390,0.132,5.337,0.184,5.318,0.256,5.238,0.357,5.171,0.496,5.066,0.691,4.937,0.962,4.782,1.339,4.584,1.864,4.352,2.594,4.087,3.611,3.785,5.026,3.465,6.996,3.119,9.739,2.499,13.556,2.009,18.869,1.683,26.265,1.373,36.559,1.124,50.888,0.939,70.833,0.790,98.596,0.667,137.241,0.565,191.032,0.481,265.906,0.409,370.127,0.349,515.196,0.299,717.126,0.269,998.200,0.266)}

.func Cdg(V) {table(V,0.002,2.434,0.003,2.433,0.005,2.433,0.007,2.434,0.009,2.425,0.013,2.425,0.018,2.410,0.025,2.389,0.035,2.373,0.049,2.340,0.068,2.312,0.095,2.262,0.132,2.197,0.184,2.099,0.256,1.988,0.357,1.836,0.496,1.687,0.691,1.531,0.962,1.392,1.339,1.238,1.864,1.080,2.594,0.921,3.611,0.774,5.026,0.632,6.996,0.488,9.739,0.200,13.556,0.088,18.869,0.073,26.265,0.058,36.559,0.046,50.888,0.040,70.833,0.035,98.596,0.031,137.241,0.028,191.032,0.025,265.906,0.022,370.127,0.020,515.196,0.018,717.126,0.017,998.200,0.018)}

.func Cgs(V) {table(V,-5.160,9.375,-4.470,7.476,-3.781,6.990,-3.091,7.025,-2.401,7.122,-1.712,7.293,-1.022,7.560,-0.332,8.403,0.357,9.419,1.047,10.118,1.737,10.667,2.426,10.977,3.116,11.117,3.806,11.201,4.495,11.256,5.185,11.297,5.874,11.330,6.564,11.359,7.254,11.383,7.943,11.406,8.633,11.425,9.323,11.443,10.012,11.459,10.702,11.475,11.392,11.490,12.081,11.503,12.771,11.516,13.461,11.528,14.150,11.539,14.840,11.550)}


.param Is_ideal=1.000000e-05
.param n_ideal=5.046079e-01
.param Rs_ideal=7.018141e-03
.ENDS 91

.SUBCKT 92 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*min(Is*(-1+exp(max(V(S,d2),-1n)/(nn(V(G,S))*nscal(V(Tj))))),1e5)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,1.4864e-13,1,2.6513e-11,1.5,4.7292e-09,2,8.4355e-07,2.5,0.00015047,3,0.026839,3.5,0.25883,4,0.91062,4.5,2.4,5,5.146,5.5,9.5088,6,15.5346,6.5,24.4045,7,36.1338,7.5,51.3787,8,70.2906,8.5,92.9415,9,117.5907,9.5,146.3873,10,178.2485,10.5,214.982,11,251.9658,11.5,285.1637,12,310.0667,12.5,351.2174,13,369.9801,13.5,394.5846,14,394.5846,14.5,394.5847,15,420.8848,15.5,431.1059,16,441.8095,16.5,450.1238,17,458.3882,17.5,466.8726,18,471.6701,18.5,499.9755,19,510.793,19.5,521.1876,20,531.1861,20.5,540.8128,21,550.09,21.5,559.0382,22,567.6765,22.5,576.022,23,584.0909,23.5,591.8981,24,599.4574,24.5,606.7814,25,613.8821,25.5,620.7706,26,627.4571,26.5,633.9513,27,640.2622,27.5,646.3982,28,652.3672,28.5,658.1766,29,663.8333,29.5,669.3439,30,674.7145)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.7698,5.5,0.84678,6,0.90145,6.5,0.78076,7,0.68853,7.5,0.59486,8,0.5138,8.5,0.44808,9,0.40637,9.5,0.35877,10,0.31821,10.5,0.27998,11,0.25142,11.5,0.23342,12,0.22323,12.5,0.20181,13,0.20482,13.5,0.19974,14,0.21528,14.5,0.23092,15,0.21828,15.5,0.2201,16,0.22121,16.5,0.22212,17,0.22289,17.5,0.22328,18,0.22535,18.5,0.23278,19,0.23578,19.5,0.23875,20,0.2417,20.5,0.24463,21,0.24752,21.5,0.25039,22,0.25324,22.5,0.25606,23,0.25886,23.5,0.26164,24,0.26439,24.5,0.26712,25,0.26983,25.5,0.27251,26,0.27518,26.5,0.27783,27,0.28046,27.5,0.28306,28,0.28565,28.5,0.28822,29,0.29078,29.5,0.29331,30,0.29583)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0.00029809,3.5,0.0006508,4,0.0020287,4.5,0.002768,5,0.0060486,5.5,0.012271,6,0.030013,6.5,0.049682,7,0.074215,7.5,0.10647,8,0.14947,8.5,0.18738,9,0.26847,9.5,0.35812,10,0.50321,10.5,0.61277,11,0.79901,11.5,1.2056,12,2.0642,12.5,2.1343,13,2.2356,13.5,2.2406,14,2.2477,14.5,2.2481,15,2.2485,15.5,2.2485,16,2.2485,16.5,2.2485,17,2.2485,17.5,2.2485,18,2.2485,18.5,2.2485,19,2.2485,19.5,2.2485,20,2.2485,20.5,2.2485,21,2.2485,21.5,2.2485,22,2.2485,22.5,2.2485,23,2.2485,23.5,2.2485,24,2.2485,24.5,2.2485,25,2.2485,25.5,2.2485,26,2.2485,26.5,2.2485,27,2.2485,27.5,2.2485,28,2.2485,28.5,2.2485,29,2.2485,29.5,2.2485,30,2.2485)}
.func RTJ(Tj) {table(Tj,25,0.001,35,0.001298,45,0.0016428,55,0.0020345,65,0.002473,75,0.0029584,85,0.0034907,95,0.0040698,105,0.0046957,115,0.0053686,125,0.0060883,135,0.0068548,145,0.0076682,155,0.0085285,165,0.0094356,175,0.01039,275,0.019929,375,0.029469,475,0.039009,575,0.048549,675,0.058089,775,0.067629,875,0.077169,975,0.086708,1075,0.096248,1175,0.10579,1275,0.11533,1375,0.12487,1475,0.13441,1575,0.14395,1675,0.15349,1775,0.16303,1875,0.17257,1975,0.18211)}
.func VthFwd(Tj) {table(Tj,25,-0.72654,35,-0.62171,45,-0.51928,55,-0.41925,65,-0.32163,75,-0.22642,85,-0.13361,95,-0.0432,105,0.044801,115,0.1304,125,0.21359,135,0.29437,145,0.37276,155,0.44873,165,0.5223,175,0.59347,275,1.3051,375,2.0168,475,2.7285,575,3.4401,675,4.1518,775,4.8635,875,5.5751,975,6,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.50461,-4,0.48258,-3,0.45195,-2,0.41115,-1,0.35992,0,0.30237,1,0.24712,2,0.1983,3,0.15696,4,0.12658,5,0.10544,6,0.10227,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.0070181,-4,0.0072717,-3,0.0079545,-2,0.0092111,-1,0.01113,0,0.013379,1,0.015213,2,0.016351,3,0.016862,4,0.016862,5,0.017456,6,0.020099,7,0.023926,8,0.029018,9,0.036924,10,0.043727,11,0.048032,12,0.054642,13,0.062686,14,0.088844,15,0.11919,16,0.15795,17,0.19366,18,0.25387)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,25,0.95089,35,0.9429,45,0.93937,55,0.94029,65,0.94566,75,0.95548,85,0.96976,95,0.98849,105,1.0117,115,1.0393,125,1.0714,135,1.1079,145,1.1489,155,1.1944,165,1.2443,175,1.2986,275,1.8421,375,2.3856,475,2.9291,575,3.4726,675,4.0162,775,4.5597,875,5.1032,975,5.6467,1075,6.1902,1175,6.7337,1275,7.2772,1375,7.8207,1475,8.3642,1575,8.9077,1675,9.4512,1775,9.9947,1875,10.5382,1975,11.0817)}
.func nscal(Tj) {table(Tj,25,1.0582,35,1.0492,45,1.0402,55,1.0311,65,1.0219,75,1.0127,85,1.0034,95,0.99399,105,0.98453,115,0.975,125,0.9654,135,0.95572,145,0.94598,155,0.93615,165,0.92626,175,0.91629,275,0.81663,375,0.71697,475,0.61731,575,0.51765,675,0.41799,775,0.31832,875,0.21866,975,0.2,1075,0.2,1175,0.2,1275,0.2,1375,0.2,1475,0.2,1575,0.2,1675,0.2,1775,0.2,1875,0.2,1975,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.002,5.470,0.003,5.472,0.005,5.467,0.007,5.469,0.009,5.472,0.013,5.461,0.018,5.455,0.025,5.447,0.035,5.447,0.049,5.424,0.068,5.409,0.095,5.390,0.132,5.337,0.184,5.318,0.256,5.238,0.357,5.171,0.496,5.066,0.691,4.937,0.962,4.782,1.339,4.584,1.864,4.352,2.594,4.087,3.611,3.785,5.026,3.465,6.996,3.119,9.739,2.499,13.556,2.009,18.869,1.683,26.265,1.373,36.559,1.124,50.888,0.939,70.833,0.790,98.596,0.667,137.241,0.565,191.032,0.481,265.906,0.409,370.127,0.349,515.196,0.299,717.126,0.269,998.200,0.266)}

.func Cdg(V) {table(V,0.002,2.434,0.003,2.433,0.005,2.433,0.007,2.434,0.009,2.425,0.013,2.425,0.018,2.410,0.025,2.389,0.035,2.373,0.049,2.340,0.068,2.312,0.095,2.262,0.132,2.197,0.184,2.099,0.256,1.988,0.357,1.836,0.496,1.687,0.691,1.531,0.962,1.392,1.339,1.238,1.864,1.080,2.594,0.921,3.611,0.774,5.026,0.632,6.996,0.488,9.739,0.200,13.556,0.088,18.869,0.073,26.265,0.058,36.559,0.046,50.888,0.040,70.833,0.035,98.596,0.031,137.241,0.028,191.032,0.025,265.906,0.022,370.127,0.020,515.196,0.018,717.126,0.017,998.200,0.018)}

.func Cgs(V) {table(V,-5.160,9.375,-4.470,7.476,-3.781,6.990,-3.091,7.025,-2.401,7.122,-1.712,7.293,-1.022,7.560,-0.332,8.403,0.357,9.419,1.047,10.118,1.737,10.667,2.426,10.977,3.116,11.117,3.806,11.201,4.495,11.256,5.185,11.297,5.874,11.330,6.564,11.359,7.254,11.383,7.943,11.406,8.633,11.425,9.323,11.443,10.012,11.459,10.702,11.475,11.392,11.490,12.081,11.503,12.771,11.516,13.461,11.528,14.150,11.539,14.840,11.550)}


.ENDS 92

.SUBCKT 93 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {min((1+TM(V(Tj))/tau(V(Tj)))*Is*tau(V(Tj))*(-1+exp(max(V(S,d2),-1n)/(nscal(V(Tj))*nn(V(G,S))))),1e6)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,8.3333e-16,0.5,1.4864e-13,1,2.6513e-11,1.5,4.7292e-09,2,8.4355e-07,2.5,0.00015047,3,0.026839,3.5,0.25883,4,0.91062,4.5,2.4,5,5.146,5.5,9.5088,6,15.5346,6.5,24.4045,7,36.1338,7.5,51.3787,8,70.2906,8.5,92.9415,9,117.5907,9.5,146.3873,10,178.2485,10.5,214.982,11,251.9658,11.5,285.1637,12,310.0667,12.5,351.2174,13,369.9801,13.5,394.5846,14,394.5846,14.5,394.5847,15,420.8848,15.5,431.1059,16,441.8095,16.5,450.1238,17,458.3882,17.5,466.8726,18,471.6701,18.5,499.9755,19,510.793,19.5,521.1876,20,531.1861,20.5,540.8128,21,550.09,21.5,559.0382,22,567.6765,22.5,576.022,23,584.0909,23.5,591.8981,24,599.4574,24.5,606.7814,25,613.8821,25.5,620.7706,26,627.4571,26.5,633.9513,27,640.2622,27.5,646.3982,28,652.3672,28.5,658.1766,29,663.8333,29.5,669.3439,30,674.7145)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,1,5,0.7698,5.5,0.84678,6,0.90145,6.5,0.78076,7,0.68853,7.5,0.59486,8,0.5138,8.5,0.44808,9,0.40637,9.5,0.35877,10,0.31821,10.5,0.27998,11,0.25142,11.5,0.23342,12,0.22323,12.5,0.20181,13,0.20482,13.5,0.19974,14,0.21528,14.5,0.23092,15,0.21828,15.5,0.2201,16,0.22121,16.5,0.22212,17,0.22289,17.5,0.22328,18,0.22535,18.5,0.23278,19,0.23578,19.5,0.23875,20,0.2417,20.5,0.24463,21,0.24752,21.5,0.25039,22,0.25324,22.5,0.25606,23,0.25886,23.5,0.26164,24,0.26439,24.5,0.26712,25,0.26983,25.5,0.27251,26,0.27518,26.5,0.27783,27,0.28046,27.5,0.28306,28,0.28565,28.5,0.28822,29,0.29078,29.5,0.29331,30,0.29583)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0.00029809,3.5,0.0006508,4,0.0020287,4.5,0.002768,5,0.0060486,5.5,0.012271,6,0.030013,6.5,0.049682,7,0.074215,7.5,0.10647,8,0.14947,8.5,0.18738,9,0.26847,9.5,0.35812,10,0.50321,10.5,0.61277,11,0.79901,11.5,1.2056,12,2.0642,12.5,2.1343,13,2.2356,13.5,2.2406,14,2.2477,14.5,2.2481,15,2.2485,15.5,2.2485,16,2.2485,16.5,2.2485,17,2.2485,17.5,2.2485,18,2.2485,18.5,2.2485,19,2.2485,19.5,2.2485,20,2.2485,20.5,2.2485,21,2.2485,21.5,2.2485,22,2.2485,22.5,2.2485,23,2.2485,23.5,2.2485,24,2.2485,24.5,2.2485,25,2.2485,25.5,2.2485,26,2.2485,26.5,2.2485,27,2.2485,27.5,2.2485,28,2.2485,28.5,2.2485,29,2.2485,29.5,2.2485,30,2.2485)}
.func RTJ(Tj) {table(Tj,25,0.001,35,0.001298,45,0.0016428,55,0.0020345,65,0.002473,75,0.0029584,85,0.0034907,95,0.0040698,105,0.0046957,115,0.0053686,125,0.0060883,135,0.0068548,145,0.0076682,155,0.0085285,165,0.0094356,175,0.01039,275,0.019929,375,0.029469,475,0.039009,575,0.048549,675,0.058089,775,0.067629,875,0.077169,975,0.086708,1075,0.096248,1175,0.10579,1275,0.11533,1375,0.12487,1475,0.13441,1575,0.14395,1675,0.15349,1775,0.16303,1875,0.17257,1975,0.18211)}
.func VthFwd(Tj) {table(Tj,25,-0.72654,35,-0.62171,45,-0.51928,55,-0.41925,65,-0.32163,75,-0.22642,85,-0.13361,95,-0.0432,105,0.044801,115,0.1304,125,0.21359,135,0.29437,145,0.37276,155,0.44873,165,0.5223,175,0.59347,275,1.3051,375,2.0168,475,2.7285,575,3.4401,675,4.1518,775,4.8635,875,5.5751,975,6,1075,6,1175,6,1275,6,1375,6,1475,6,1575,6,1675,6,1775,6,1875,6,1975,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-5,0.50461,-4,0.48258,-3,0.45195,-2,0.41115,-1,0.35992,0,0.30237,1,0.24712,2,0.1983,3,0.15696,4,0.12658,5,0.10544,6,0.10227,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-5,0.0070181,-4,0.0072717,-3,0.0079545,-2,0.0092111,-1,0.01113,0,0.013379,1,0.015213,2,0.016351,3,0.016862,4,0.016862,5,0.017456,6,0.020099,7,0.023926,8,0.029018,9,0.036924,10,0.043727,11,0.048032,12,0.054642,13,0.062686,14,0.088844,15,0.11919,16,0.15795,17,0.19366,18,0.25387)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,25,0.95089,35,0.9429,45,0.93937,55,0.94029,65,0.94566,75,0.95548,85,0.96976,95,0.98849,105,1.0117,115,1.0393,125,1.0714,135,1.1079,145,1.1489,155,1.1944,165,1.2443,175,1.2986,275,1.8421,375,2.3856,475,2.9291,575,3.4726,675,4.0162,775,4.5597,875,5.1032,975,5.6467,1075,6.1902,1175,6.7337,1275,7.2772,1375,7.8207,1475,8.3642,1575,8.9077,1675,9.4512,1775,9.9947,1875,10.5382,1975,11.0817)}
.func nscal(Tj) {table(Tj,25,1.0582,35,1.0492,45,1.0402,55,1.0311,65,1.0219,75,1.0127,85,1.0034,95,0.99399,105,0.98453,115,0.975,125,0.9654,135,0.95572,145,0.94598,155,0.93615,165,0.92626,175,0.91629,275,0.81663,375,0.71697,475,0.61731,575,0.51765,675,0.41799,775,0.31832,875,0.21866,975,0.2,1075,0.2,1175,0.2,1275,0.2,1375,0.2,1475,0.2,1575,0.2,1675,0.2,1775,0.2,1875,0.2,1975,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.002,5.470,0.003,5.472,0.005,5.467,0.007,5.469,0.009,5.472,0.013,5.461,0.018,5.455,0.025,5.447,0.035,5.447,0.049,5.424,0.068,5.409,0.095,5.390,0.132,5.337,0.184,5.318,0.256,5.238,0.357,5.171,0.496,5.066,0.691,4.937,0.962,4.782,1.339,4.584,1.864,4.352,2.594,4.087,3.611,3.785,5.026,3.465,6.996,3.119,9.739,2.499,13.556,2.009,18.869,1.683,26.265,1.373,36.559,1.124,50.888,0.939,70.833,0.790,98.596,0.667,137.241,0.565,191.032,0.481,265.906,0.409,370.127,0.349,515.196,0.299,717.126,0.269,998.200,0.266)}

.func Cdg(V) {table(V,0.002,2.434,0.003,2.433,0.005,2.433,0.007,2.434,0.009,2.425,0.013,2.425,0.018,2.410,0.025,2.389,0.035,2.373,0.049,2.340,0.068,2.312,0.095,2.262,0.132,2.197,0.184,2.099,0.256,1.988,0.357,1.836,0.496,1.687,0.691,1.531,0.962,1.392,1.339,1.238,1.864,1.080,2.594,0.921,3.611,0.774,5.026,0.632,6.996,0.488,9.739,0.200,13.556,0.088,18.869,0.073,26.265,0.058,36.559,0.046,50.888,0.040,70.833,0.035,98.596,0.031,137.241,0.028,191.032,0.025,265.906,0.022,370.127,0.020,515.196,0.018,717.126,0.017,998.200,0.018)}

.func Cgs(V) {table(V,-5.160,9.375,-4.470,7.476,-3.781,6.990,-3.091,7.025,-2.401,7.122,-1.712,7.293,-1.022,7.560,-0.332,8.403,0.357,9.419,1.047,10.118,1.737,10.667,2.426,10.977,3.116,11.117,3.806,11.201,4.495,11.256,5.185,11.297,5.874,11.330,6.564,11.359,7.254,11.383,7.943,11.406,8.633,11.425,9.323,11.443,10.012,11.459,10.702,11.475,11.392,11.490,12.081,11.503,12.771,11.516,13.461,11.528,14.150,11.539,14.840,11.550)}


.ENDS 93

.SUBCKT 101 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(I(Rbd)) + abs(V(Fwd))}
DBD S d2 IdealDiode
Rbd d2 D {Rs_ideal/(2*AFm)}
.model IdealDiode D(level=1 Is={AFm*Is_ideal} N={n_ideal/((TEMP+273.15)*(0.026/(27+273.15)))} Rs={Rs_ideal/(2*AFm)} Tnom={TEMP})
*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,4.3478e-16,0.5,5.8663e-14,1,7.915e-12,1.5,1.0679e-09,2,1.4409e-07,2.5,1.9441e-05,3,0.0026231,3.5,0.35391,4,1.2075,4.5,3.1105,5,6.8138,5.5,12.5577,6,20.7933,6.5,32.7994,7,48.7705,7.5,70.2523,8,92.2493,8.5,119.1843,9,151.556,9.5,186.1836,10,232.7273,10.5,263.31,11,264.7122,11.5,274.5691,12,274.5691,12.5,294.1358,13,294.1358,13.5,294.1358,14,294.1358,14.5,294.1358,15,294.1358,15.5,294.1358,16,294.1358,16.5,294.1358,17,294.1358,17.5,294.1358,18,294.1358,18.5,351.4311,19,351.4311,19.5,351.4311,20,351.4311,20.5,351.4311,21,351.4311,21.5,351.4311,22,351.4311,22.5,351.4311,23,351.4311,23.5,351.4311,24,351.4311,24.5,351.4311,25,351.4311,25.5,351.4311,26,351.4311,26.5,351.4311,27,351.4311,27.5,351.4311,28,351.4311,28.5,351.4311,29,351.4311,29.5,351.4311,30,351.4311)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,0.84041,5,0.66873,5.5,0.59624,6,0.54256,6.5,0.46214,7,0.39522,7.5,0.32186,8,0.30689,8.5,0.26856,9,0.2332,9.5,0.20337,10,0.16468,10.5,0.15492,11,0.17041,11.5,0.17575,12,0.18963,12.5,0.17834,13,0.18498,13.5,0.19218,14,0.1988,14.5,0.20504,15,0.21003,15.5,0.21498,16,0.21983,16.5,0.22331,17,0.22752,17.5,0.23047,18,0.23299,18.5,0.25629,19,0.27838,19.5,0.29596,20,0.31443,20.5,0.33385,21,0.35428,21.5,0.37578,22,0.39844,22.5,0.42233,23,0.44754,23.5,0.47416,24,0.50231,24.5,0.53209,25,0.56363,25.5,0.59705,26,0.63252,26.5,0.67019,27,0.71023,27.5,0.75286,28,0.79827,28.5,0.84671,29,0.89843,29.5,0.95374,30,0.99)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0,3.5,0.0013824,4,0.0035558,4.5,0.0074526,5,0.012032,5.5,0.020467,6,0.036076,6.5,0.055339,7,0.080954,7.5,0.10325,8,0.16267,8.5,0.22436,9,0.30978,9.5,0.42358,10,0.43433,10.5,0.44497,11,0.44572,11.5,0.44645,12,0.4465,12.5,0.44655,13,0.44655,13.5,0.44655,14,0.44655,14.5,0.44655,15,0.44655,15.5,0.44655,16,0.44655,16.5,0.44655,17,0.44655,17.5,0.44655,18,0.44655,18.5,0.44655,19,0.44655,19.5,0.44655,20,0.44655,20.5,0.44655,21,0.44655,21.5,0.44655,22,0.44655,22.5,0.44655,23,0.44655,23.5,0.44655,24,0.44655,24.5,0.44655,25,0.44655,25.5,0.44655,26,0.44655,26.5,0.44655,27,0.44655,27.5,0.44655,28,0.44655,28.5,0.44655,29,0.44655,29.5,0.44655,30,0.44655)}
.func RTJ(Tj) {table(Tj,-40,0.0048104,-30,0.0053256,-20,0.006072,-10,0.0070495,0,0.0082583,10,0.0096982,20,0.011369,30,0.013272,40,0.015405,50,0.01777,60,0.020366,70,0.023193,80,0.026251,90,0.029541,100,0.033061,110,0.036813,120,0.040796,130,0.045011,140,0.049456,150,0.054133,160,0.059041,170,0.06418,180,0.06955,190,0.075151,200,0.080984,300,0.13931,400,0.19764,500,0.25596,600,0.31429,700,0.37262,800,0.43094,900,0.48927,1000,0.54759,1100,0.60592,1200,0.66425,1300,0.72257,1400,0.7809,1500,0.83923,1600,0.89755,1700,0.95588,1800,1.0142,1900,1.0725,2000,1.1309)}
.func VthFwd(Tj) {table(Tj,-40,-2.0591,-30,-1.8898,-20,-1.724,-10,-1.5616,0,-1.4025,10,-1.2468,20,-1.0946,30,-0.94567,40,-0.80017,50,-0.65806,60,-0.51934,70,-0.384,80,-0.25206,90,-0.1235,100,0.0016642,110,0.12344,120,0.24183,130,0.35683,140,0.46844,150,0.57666,160,0.68149,170,0.78294,180,0.88099,190,0.97565,200,1.0669,300,1.9797,400,2.8924,500,3.8052,600,4.718,700,5.6307,800,6,900,6,1000,6,1100,6,1200,6,1300,6,1400,6,1500,6,1600,6,1700,6,1800,6,1900,6,2000,6)}


*** Reverse Conduction Parameters ***
.param Is=10.00u

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.039,3.448,0.052,3.471,0.068,3.433,0.091,3.420,0.120,3.421,0.159,3.406,0.211,3.427,0.280,3.345,0.371,3.370,0.492,3.263,0.652,3.250,0.864,3.143,1.145,3.051,1.517,2.941,2.010,2.796,2.664,2.642,3.531,2.471,4.679,2.287,6.201,2.084,8.219,1.808,10.892,1.438,14.434,1.217,19.129,1.013,25.351,0.794,33.597,0.604,44.525,0.494,59.007,0.412,78.200,0.348,103.635,0.297,137.344,0.254,182.016,0.218,241.219,0.187,319.678,0.162,423.657,0.139,561.456,0.120,744.076,0.104,986.096,0.091,1306.834,0.082,1731.897,0.074,2295.216,0.066)}

.func Cdg(V) {table(V,0.039,2.969,0.052,2.920,0.068,2.894,0.091,2.839,0.120,2.748,0.159,2.671,0.211,2.522,0.280,2.399,0.371,2.186,0.492,2.009,0.652,1.792,0.864,1.629,1.145,1.467,1.517,1.298,2.010,1.134,2.664,0.975,3.531,0.825,4.679,0.681,6.201,0.541,8.219,0.352,10.892,0.134,14.434,0.113,19.129,0.097,25.351,0.076,33.597,0.056,44.525,0.047,59.007,0.042,78.200,0.037,103.635,0.034,137.344,0.031,182.016,0.028,241.219,0.026,319.678,0.024,423.657,0.022,561.456,0.021,744.076,0.020,986.096,0.019,1306.834,0.018,1731.897,0.017,2295.216,0.017)}

.func Cgs(V) {table(V,-8.870,6.941,-8.076,4.288,-7.282,4.033,-6.489,4.101,-5.695,4.262,-4.901,4.532,-4.107,5.355,-3.313,6.703,-2.520,7.534,-1.726,8.031,-0.932,8.264,-0.138,8.368,0.656,8.432,1.449,8.474,2.243,8.504,3.037,8.530,3.831,8.548,4.624,8.567,5.418,8.582,6.212,8.595,7.006,8.603,7.800,8.617,8.593,8.625,9.387,8.634,10.181,8.644,10.975,8.654,11.769,8.661,12.562,8.666,13.356,8.674,14.150,8.679)}


.param Is_ideal=1.000000e-05
.param n_ideal=5.241933e-01
.param Rs_ideal=3.228487e-02
.ENDS 101

.SUBCKT 102 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [Without RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GTQ S d2 Value {V(Rev)}
ETQ Rev 0 Value {AFm*min(Is*(-1+exp(max(V(S,d2),-1n)/(nn(V(G,S))*nscal(V(Tj))))),1e5)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,4.3478e-16,0.5,5.8663e-14,1,7.915e-12,1.5,1.0679e-09,2,1.4409e-07,2.5,1.9441e-05,3,0.0026231,3.5,0.35391,4,1.2075,4.5,3.1105,5,6.8138,5.5,12.5577,6,20.7933,6.5,32.7994,7,48.7705,7.5,70.2523,8,92.2493,8.5,119.1843,9,151.556,9.5,186.1836,10,232.7273,10.5,263.31,11,264.7122,11.5,274.5691,12,274.5691,12.5,294.1358,13,294.1358,13.5,294.1358,14,294.1358,14.5,294.1358,15,294.1358,15.5,294.1358,16,294.1358,16.5,294.1358,17,294.1358,17.5,294.1358,18,294.1358,18.5,351.4311,19,351.4311,19.5,351.4311,20,351.4311,20.5,351.4311,21,351.4311,21.5,351.4311,22,351.4311,22.5,351.4311,23,351.4311,23.5,351.4311,24,351.4311,24.5,351.4311,25,351.4311,25.5,351.4311,26,351.4311,26.5,351.4311,27,351.4311,27.5,351.4311,28,351.4311,28.5,351.4311,29,351.4311,29.5,351.4311,30,351.4311)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,0.84041,5,0.66873,5.5,0.59624,6,0.54256,6.5,0.46214,7,0.39522,7.5,0.32186,8,0.30689,8.5,0.26856,9,0.2332,9.5,0.20337,10,0.16468,10.5,0.15492,11,0.17041,11.5,0.17575,12,0.18963,12.5,0.17834,13,0.18498,13.5,0.19218,14,0.1988,14.5,0.20504,15,0.21003,15.5,0.21498,16,0.21983,16.5,0.22331,17,0.22752,17.5,0.23047,18,0.23299,18.5,0.25629,19,0.27838,19.5,0.29596,20,0.31443,20.5,0.33385,21,0.35428,21.5,0.37578,22,0.39844,22.5,0.42233,23,0.44754,23.5,0.47416,24,0.50231,24.5,0.53209,25,0.56363,25.5,0.59705,26,0.63252,26.5,0.67019,27,0.71023,27.5,0.75286,28,0.79827,28.5,0.84671,29,0.89843,29.5,0.95374,30,0.99)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0,3.5,0.0013824,4,0.0035558,4.5,0.0074526,5,0.012032,5.5,0.020467,6,0.036076,6.5,0.055339,7,0.080954,7.5,0.10325,8,0.16267,8.5,0.22436,9,0.30978,9.5,0.42358,10,0.43433,10.5,0.44497,11,0.44572,11.5,0.44645,12,0.4465,12.5,0.44655,13,0.44655,13.5,0.44655,14,0.44655,14.5,0.44655,15,0.44655,15.5,0.44655,16,0.44655,16.5,0.44655,17,0.44655,17.5,0.44655,18,0.44655,18.5,0.44655,19,0.44655,19.5,0.44655,20,0.44655,20.5,0.44655,21,0.44655,21.5,0.44655,22,0.44655,22.5,0.44655,23,0.44655,23.5,0.44655,24,0.44655,24.5,0.44655,25,0.44655,25.5,0.44655,26,0.44655,26.5,0.44655,27,0.44655,27.5,0.44655,28,0.44655,28.5,0.44655,29,0.44655,29.5,0.44655,30,0.44655)}
.func RTJ(Tj) {table(Tj,-40,0.0048104,-30,0.0053256,-20,0.006072,-10,0.0070495,0,0.0082583,10,0.0096982,20,0.011369,30,0.013272,40,0.015405,50,0.01777,60,0.020366,70,0.023193,80,0.026251,90,0.029541,100,0.033061,110,0.036813,120,0.040796,130,0.045011,140,0.049456,150,0.054133,160,0.059041,170,0.06418,180,0.06955,190,0.075151,200,0.080984,300,0.13931,400,0.19764,500,0.25596,600,0.31429,700,0.37262,800,0.43094,900,0.48927,1000,0.54759,1100,0.60592,1200,0.66425,1300,0.72257,1400,0.7809,1500,0.83923,1600,0.89755,1700,0.95588,1800,1.0142,1900,1.0725,2000,1.1309)}
.func VthFwd(Tj) {table(Tj,-40,-2.0591,-30,-1.8898,-20,-1.724,-10,-1.5616,0,-1.4025,10,-1.2468,20,-1.0946,30,-0.94567,40,-0.80017,50,-0.65806,60,-0.51934,70,-0.384,80,-0.25206,90,-0.1235,100,0.0016642,110,0.12344,120,0.24183,130,0.35683,140,0.46844,150,0.57666,160,0.68149,170,0.78294,180,0.88099,190,0.97565,200,1.0669,300,1.9797,400,2.8924,500,3.8052,600,4.718,700,5.6307,800,6,900,6,1000,6,1100,6,1200,6,1300,6,1400,6,1500,6,1600,6,1700,6,1800,6,1900,6,2000,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-6.75,0.52419,-5,0.52419,-4,0.52356,-3,0.4773,-2,0.41917,-1,0.35203,0,0.28234,1,0.21876,2,0.16376,3,0.1172,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-6.75,0.032285,-5,0.032285,-4,0.032323,-3,0.036006,-2,0.04035,-1,0.045,0,0.049354,1,0.052702,2,0.054946,3,0.056295,4,0.05972,5,0.070299,6,0.10043,7,0.15622,8,0.27523,9,0.47292,10,0.57298,11,1.3549,12,10,13,10,14,10,15,10,16,10,17,10,18,10)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,-40,0.3976,-30,0.43175,-20,0.46651,-10,0.50188,0,0.53786,10,0.57445,20,0.61165,30,0.64946,40,0.68788,50,0.7269,60,0.76654,70,0.80679,80,0.84764,90,0.88911,100,0.93118,110,0.97387,120,1.0172,130,1.0611,140,1.1056,150,1.1507,160,1.1964,170,1.2428,180,1.2897,190,1.3373,200,1.3855,300,1.8671,400,2.3488,500,2.8305,600,3.3122,700,3.7939,800,4.2756,900,4.7573,1000,5.239,1100,5.7207,1200,6.2024,1300,6.6841,1400,7.1658,1500,7.6475,1600,8.1292,1700,8.6109,1800,9.0926,1900,9.5743,2000,10.056)}
.func nscal(Tj) {table(Tj,-40,1.48,-30,1.4579,-20,1.4344,-10,1.4095,0,1.3831,10,1.3553,20,1.3261,30,1.2954,40,1.2633,50,1.2298,60,1.1948,70,1.1584,80,1.1206,90,1.0814,100,1.0407,110,0.9986,120,0.95506,130,0.91009,140,0.86369,150,0.81586,160,0.7666,170,0.71591,180,0.66378,190,0.61023,200,0.55524,300,0.2,400,0.2,500,0.2,600,0.2,700,0.2,800,0.2,900,0.2,1000,0.2,1100,0.2,1200,0.2,1300,0.2,1400,0.2,1500,0.2,1600,0.2,1700,0.2,1800,0.2,1900,0.2,2000,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.039,3.448,0.052,3.471,0.068,3.433,0.091,3.420,0.120,3.421,0.159,3.406,0.211,3.427,0.280,3.345,0.371,3.370,0.492,3.263,0.652,3.250,0.864,3.143,1.145,3.051,1.517,2.941,2.010,2.796,2.664,2.642,3.531,2.471,4.679,2.287,6.201,2.084,8.219,1.808,10.892,1.438,14.434,1.217,19.129,1.013,25.351,0.794,33.597,0.604,44.525,0.494,59.007,0.412,78.200,0.348,103.635,0.297,137.344,0.254,182.016,0.218,241.219,0.187,319.678,0.162,423.657,0.139,561.456,0.120,744.076,0.104,986.096,0.091,1306.834,0.082,1731.897,0.074,2295.216,0.066)}

.func Cdg(V) {table(V,0.039,2.969,0.052,2.920,0.068,2.894,0.091,2.839,0.120,2.748,0.159,2.671,0.211,2.522,0.280,2.399,0.371,2.186,0.492,2.009,0.652,1.792,0.864,1.629,1.145,1.467,1.517,1.298,2.010,1.134,2.664,0.975,3.531,0.825,4.679,0.681,6.201,0.541,8.219,0.352,10.892,0.134,14.434,0.113,19.129,0.097,25.351,0.076,33.597,0.056,44.525,0.047,59.007,0.042,78.200,0.037,103.635,0.034,137.344,0.031,182.016,0.028,241.219,0.026,319.678,0.024,423.657,0.022,561.456,0.021,744.076,0.020,986.096,0.019,1306.834,0.018,1731.897,0.017,2295.216,0.017)}

.func Cgs(V) {table(V,-8.870,6.941,-8.076,4.288,-7.282,4.033,-6.489,4.101,-5.695,4.262,-4.901,4.532,-4.107,5.355,-3.313,6.703,-2.520,7.534,-1.726,8.031,-0.932,8.264,-0.138,8.368,0.656,8.432,1.449,8.474,2.243,8.504,3.037,8.530,3.831,8.548,4.624,8.567,5.418,8.582,6.212,8.595,7.006,8.603,7.800,8.617,8.593,8.625,9.387,8.634,10.181,8.644,10.975,8.654,11.769,8.661,12.562,8.666,13.356,8.674,14.150,8.679)}


.ENDS 102

.SUBCKT 103 D G S Tj Id
*** Forward Conduction Model ***
Gds D s2 Value {V(Fwd)}
Eds Fwd 0 Value {AFm*IdFwd(V(D,s2),V(G,S)-Vths/(1+max(V(G,S)-10,0)**3)+VthFwd(V(Tj)))}
GRds s2 S Value {V(s2,S)/((Rdss + RTJ(V(Tj)))/AFm)}
R1 s2 S 1k
Rbypass D 0 100Meg

.func IdFwd(Vds,Vgs) {a(Vgs)*atan(b(Vgs)*max(Vds,0)) + c(Vgs)*Vds + b(Vgs)*a(Vgs)*min(Vds,0)}

ECurr Id 0 Value {abs(V(Rev)) + abs(V(Fwd))}
*** Third Quadrant [With RR] ***
GRbd D d2 Value {V(D,d2)/((Rscal(V(Tj))*Rs(V(G,S)))/(AFm))}
R2 D d2 1k
GI1 0 qm Value {-1/tau(V(Tj))*V(qm)+V(qe,qm)/TM(V(Tj))}
EV1 qe1 0 Value {min((1+TM(V(Tj))/tau(V(Tj)))*Is*tau(V(Tj))*(-1+exp(max(V(S,d2),-1n)/(nscal(V(Tj))*nn(V(G,S))))),1e6)}
Lqe qe1 qe 25n
Rqe qe qe2 {Rqe}
Cqe qe2 0 100n
GITQ S d2 Value {V(Rev)}
EITQ Rev 0 Value {AFm*V(qe,qm)/TM(V(Tj))}
C1 qm 0 1
R3 qm 0 100G
.func tau(Tj) {1e-9*table(Tj,25,tau1,175,tau2)}
.func TM(Tj) {1e-9*table(Tj,25,tm1,175,tm2)}

*** CV Model ***

G_cdg    D    G    Value {(AFm*(agd*1e-9*Cdg(V(D,G))+{CgdOffset}))*ddt(V(D,G))}
G_cds    d2   S    Value {AFm*ads*1e-9*Cds(V(d2,S))*ddt(V(d2,S))}
G_cgs    G    S    Value {AFm*ags*1e-9*Cgs(V(G,S))*ddt(V(G,S))}

**********************************************************************
********************** Models and Parameters ***********************
**********************************************************************



*** Forward Conduction Parameters ***
.func a(Vgs) {table(Vgs,0,4.3478e-16,0.5,5.8663e-14,1,7.915e-12,1.5,1.0679e-09,2,1.4409e-07,2.5,1.9441e-05,3,0.0026231,3.5,0.35391,4,1.2075,4.5,3.1105,5,6.8138,5.5,12.5577,6,20.7933,6.5,32.7994,7,48.7705,7.5,70.2523,8,92.2493,8.5,119.1843,9,151.556,9.5,186.1836,10,232.7273,10.5,263.31,11,264.7122,11.5,274.5691,12,274.5691,12.5,294.1358,13,294.1358,13.5,294.1358,14,294.1358,14.5,294.1358,15,294.1358,15.5,294.1358,16,294.1358,16.5,294.1358,17,294.1358,17.5,294.1358,18,294.1358,18.5,351.4311,19,351.4311,19.5,351.4311,20,351.4311,20.5,351.4311,21,351.4311,21.5,351.4311,22,351.4311,22.5,351.4311,23,351.4311,23.5,351.4311,24,351.4311,24.5,351.4311,25,351.4311,25.5,351.4311,26,351.4311,26.5,351.4311,27,351.4311,27.5,351.4311,28,351.4311,28.5,351.4311,29,351.4311,29.5,351.4311,30,351.4311)}
.func b(Vgs) {table(Vgs,0,1,0.5,1,1,1,1.5,1,2,1,2.5,1,3,1,3.5,1,4,1,4.5,0.84041,5,0.66873,5.5,0.59624,6,0.54256,6.5,0.46214,7,0.39522,7.5,0.32186,8,0.30689,8.5,0.26856,9,0.2332,9.5,0.20337,10,0.16468,10.5,0.15492,11,0.17041,11.5,0.17575,12,0.18963,12.5,0.17834,13,0.18498,13.5,0.19218,14,0.1988,14.5,0.20504,15,0.21003,15.5,0.21498,16,0.21983,16.5,0.22331,17,0.22752,17.5,0.23047,18,0.23299,18.5,0.25629,19,0.27838,19.5,0.29596,20,0.31443,20.5,0.33385,21,0.35428,21.5,0.37578,22,0.39844,22.5,0.42233,23,0.44754,23.5,0.47416,24,0.50231,24.5,0.53209,25,0.56363,25.5,0.59705,26,0.63252,26.5,0.67019,27,0.71023,27.5,0.75286,28,0.79827,28.5,0.84671,29,0.89843,29.5,0.95374,30,0.99)}
.func c(Vgs) {table(Vgs,0,0,0.5,0,1,0,1.5,0,2,0,2.5,0,3,0,3.5,0.0013824,4,0.0035558,4.5,0.0074526,5,0.012032,5.5,0.020467,6,0.036076,6.5,0.055339,7,0.080954,7.5,0.10325,8,0.16267,8.5,0.22436,9,0.30978,9.5,0.42358,10,0.43433,10.5,0.44497,11,0.44572,11.5,0.44645,12,0.4465,12.5,0.44655,13,0.44655,13.5,0.44655,14,0.44655,14.5,0.44655,15,0.44655,15.5,0.44655,16,0.44655,16.5,0.44655,17,0.44655,17.5,0.44655,18,0.44655,18.5,0.44655,19,0.44655,19.5,0.44655,20,0.44655,20.5,0.44655,21,0.44655,21.5,0.44655,22,0.44655,22.5,0.44655,23,0.44655,23.5,0.44655,24,0.44655,24.5,0.44655,25,0.44655,25.5,0.44655,26,0.44655,26.5,0.44655,27,0.44655,27.5,0.44655,28,0.44655,28.5,0.44655,29,0.44655,29.5,0.44655,30,0.44655)}
.func RTJ(Tj) {table(Tj,-40,0.0048104,-30,0.0053256,-20,0.006072,-10,0.0070495,0,0.0082583,10,0.0096982,20,0.011369,30,0.013272,40,0.015405,50,0.01777,60,0.020366,70,0.023193,80,0.026251,90,0.029541,100,0.033061,110,0.036813,120,0.040796,130,0.045011,140,0.049456,150,0.054133,160,0.059041,170,0.06418,180,0.06955,190,0.075151,200,0.080984,300,0.13931,400,0.19764,500,0.25596,600,0.31429,700,0.37262,800,0.43094,900,0.48927,1000,0.54759,1100,0.60592,1200,0.66425,1300,0.72257,1400,0.7809,1500,0.83923,1600,0.89755,1700,0.95588,1800,1.0142,1900,1.0725,2000,1.1309)}
.func VthFwd(Tj) {table(Tj,-40,-2.0591,-30,-1.8898,-20,-1.724,-10,-1.5616,0,-1.4025,10,-1.2468,20,-1.0946,30,-0.94567,40,-0.80017,50,-0.65806,60,-0.51934,70,-0.384,80,-0.25206,90,-0.1235,100,0.0016642,110,0.12344,120,0.24183,130,0.35683,140,0.46844,150,0.57666,160,0.68149,170,0.78294,180,0.88099,190,0.97565,200,1.0669,300,1.9797,400,2.8924,500,3.8052,600,4.718,700,5.6307,800,6,900,6,1000,6,1100,6,1200,6,1300,6,1400,6,1500,6,1600,6,1700,6,1800,6,1900,6,2000,6)}


*** Reverse Conduction Parameters ***
.func nn(Vgs) {table(Vgs,-6.75,0.52419,-5,0.52419,-4,0.52356,-3,0.4773,-2,0.41917,-1,0.35203,0,0.28234,1,0.21876,2,0.16376,3,0.1172,4,0.1,5,0.1,6,0.1,7,0.1,8,0.1,9,0.1,10,0.1,11,0.1,12,0.1,13,0.1,14,0.1,15,0.1,16,0.1,17,0.1,18,0.1)}
.func Rs(Vgs) {table(Vgs,-6.75,0.032285,-5,0.032285,-4,0.032323,-3,0.036006,-2,0.04035,-1,0.045,0,0.049354,1,0.052702,2,0.054946,3,0.056295,4,0.05972,5,0.070299,6,0.10043,7,0.15622,8,0.27523,9,0.47292,10,0.57298,11,1.3549,12,10,13,10,14,10,15,10,16,10,17,10,18,10)}
.param Is=10.00u
.func Rscal(Tj) {table(Tj,-40,0.3976,-30,0.43175,-20,0.46651,-10,0.50188,0,0.53786,10,0.57445,20,0.61165,30,0.64946,40,0.68788,50,0.7269,60,0.76654,70,0.80679,80,0.84764,90,0.88911,100,0.93118,110,0.97387,120,1.0172,130,1.0611,140,1.1056,150,1.1507,160,1.1964,170,1.2428,180,1.2897,190,1.3373,200,1.3855,300,1.8671,400,2.3488,500,2.8305,600,3.3122,700,3.7939,800,4.2756,900,4.7573,1000,5.239,1100,5.7207,1200,6.2024,1300,6.6841,1400,7.1658,1500,7.6475,1600,8.1292,1700,8.6109,1800,9.0926,1900,9.5743,2000,10.056)}
.func nscal(Tj) {table(Tj,-40,1.48,-30,1.4579,-20,1.4344,-10,1.4095,0,1.3831,10,1.3553,20,1.3261,30,1.2954,40,1.2633,50,1.2298,60,1.1948,70,1.1584,80,1.1206,90,1.0814,100,1.0407,110,0.9986,120,0.95506,130,0.91009,140,0.86369,150,0.81586,160,0.7666,170,0.71591,180,0.66378,190,0.61023,200,0.55524,300,0.2,400,0.2,500,0.2,600,0.2,700,0.2,800,0.2,900,0.2,1000,0.2,1100,0.2,1200,0.2,1300,0.2,1400,0.2,1500,0.2,1600,0.2,1700,0.2,1800,0.2,1900,0.2,2000,0.2)}

*** Device Capacitance Values ***
.func Cds(V) {table(V,0.039,3.448,0.052,3.471,0.068,3.433,0.091,3.420,0.120,3.421,0.159,3.406,0.211,3.427,0.280,3.345,0.371,3.370,0.492,3.263,0.652,3.250,0.864,3.143,1.145,3.051,1.517,2.941,2.010,2.796,2.664,2.642,3.531,2.471,4.679,2.287,6.201,2.084,8.219,1.808,10.892,1.438,14.434,1.217,19.129,1.013,25.351,0.794,33.597,0.604,44.525,0.494,59.007,0.412,78.200,0.348,103.635,0.297,137.344,0.254,182.016,0.218,241.219,0.187,319.678,0.162,423.657,0.139,561.456,0.120,744.076,0.104,986.096,0.091,1306.834,0.082,1731.897,0.074,2295.216,0.066)}

.func Cdg(V) {table(V,0.039,2.969,0.052,2.920,0.068,2.894,0.091,2.839,0.120,2.748,0.159,2.671,0.211,2.522,0.280,2.399,0.371,2.186,0.492,2.009,0.652,1.792,0.864,1.629,1.145,1.467,1.517,1.298,2.010,1.134,2.664,0.975,3.531,0.825,4.679,0.681,6.201,0.541,8.219,0.352,10.892,0.134,14.434,0.113,19.129,0.097,25.351,0.076,33.597,0.056,44.525,0.047,59.007,0.042,78.200,0.037,103.635,0.034,137.344,0.031,182.016,0.028,241.219,0.026,319.678,0.024,423.657,0.022,561.456,0.021,744.076,0.020,986.096,0.019,1306.834,0.018,1731.897,0.017,2295.216,0.017)}

.func Cgs(V) {table(V,-8.870,6.941,-8.076,4.288,-7.282,4.033,-6.489,4.101,-5.695,4.262,-4.901,4.532,-4.107,5.355,-3.313,6.703,-2.520,7.534,-1.726,8.031,-0.932,8.264,-0.138,8.368,0.656,8.432,1.449,8.474,2.243,8.504,3.037,8.530,3.831,8.548,4.624,8.567,5.418,8.582,6.212,8.595,7.006,8.603,7.800,8.617,8.593,8.625,9.387,8.634,10.181,8.644,10.975,8.654,11.769,8.661,12.562,8.666,13.356,8.674,14.150,8.679)}


.ENDS 103



**********************************************************************
******************** SiC Schottky Models *****************************
**********************************************************************
*** SiC Schottky Diode Model ***
*CPW6-1200-Z050A

.SUBCKT 1001 A K Tj Id

** Conduction **
GRbd a1 K Value {V(a1,K)/((Rs(V(Tj)))/AF)}
Rbypass1 a1 K 1k
Rbypass2 A K 1G
GDiode A a1 Value {V(N)}
EDiode N 0 Value {AF*min(Is*(-1+exp(max(V(A,a1),-1n)/(nn(V(Tj))))),1e6)}
** Capacitance **
G_CJ A a1 Value {AF*1e-9*Cj(V(a1,A))*ddt(V(A,a1))}

Ecurr Id 0 Value {V(N)}

.param Is = 1e-06
.func nn(Tj) {table(Tj,25,0.05747,75,0.054122,125,0.050427,175,0.047078)}
.func Rs(Tj) {table(Tj,25,0.0090095,75,0.01181,125,0.015863,175,0.02094)}

.func Cj(V) {table(V,0.0010,4.3938,0.0016,4.3933,0.0026,4.3926,0.0043,4.3914,0.0069,4.3895,0.0112,4.3864,0.0181,4.3813,0.0293,4.3731,0.0475,4.3599,0.0770,4.3384,0.1248,4.3035,0.2023,4.2150,0.3277,4.0832,0.5311,3.8945,0.8606,3.6466,1.3945,3.3299,2.2596,2.9618,3.6615,2.5628,5.9331,2.1609,9.6142,1.7864,15.5790,1.4551,25.2444,1.1339,40.9065,0.8111,66.2857,0.6079,107.4105,0.4685,174.0498,0.3651,282.0333,0.2865,457.0118,0.2265,740.5499,0.1928,1200.0000,0.1907)}

.ENDS 1001
*** SiC Schottky Diode Model ***
*CPW6-1700-Z050A

.SUBCKT 1002 A K Tj Id

** Conduction **
GRbd a1 K Value {V(a1,K)/((Rs(V(Tj)))/AF)}
Rbypass1 a1 K 1k
Rbypass2 A K 1G
GDiode A a1 Value {V(N)}
EDiode N 0 Value {AF*min(Is*(-1+exp(max(V(A,a1),-1n)/(nn(V(Tj))))),1e6)}
** Capacitance **
G_CJ A a1 Value {AF*1e-9*Cj(V(a1,A))*ddt(V(A,a1))}

Ecurr Id 0 Value {V(N)}

.param Is = 1e-06
.func nn(Tj) {table(Tj,25,0.056241,75,0.052507,125,0.048934,175,0.051447)}
.func Rs(Tj) {table(Tj,25,0.009767,75,0.013228,125,0.017929,175,0.022621)}

.func Cj(V) {table(V,0.0010,5.9067,0.0016,5.9066,0.0026,5.9063,0.0043,5.9059,0.0069,5.9052,0.0112,5.9041,0.0181,5.9024,0.0293,5.8995,0.0475,5.8948,0.0770,5.8873,0.1248,5.8508,0.2023,5.7541,0.3277,5.6057,0.5311,5.3997,0.8606,5.1030,1.3945,4.7105,2.2596,4.2477,3.6615,3.7294,5.9331,3.2006,9.6142,2.6984,15.5790,2.2437,25.2444,1.8363,40.9065,1.4578,66.2857,0.9332,107.4105,0.6621,174.0498,0.4950,282.0333,0.3787,457.0118,0.2945,740.5499,0.2556,1200.0000,0.2535)}

.ENDS 1002
